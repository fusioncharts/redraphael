{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f65af0fa8606fdb5d30c","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./node_modules/core-js/library/modules/_has.js","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///./node_modules/core-js/library/modules/_to-iobject.js","webpack:///./node_modules/core-js/library/modules/_wks.js","webpack:///./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack:///./node_modules/core-js/library/modules/_is-object.js","webpack:///./node_modules/babel-runtime/core-js/symbol.js","webpack:///./source/raphael.lib.js","webpack:///./node_modules/core-js/library/modules/_library.js","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./node_modules/core-js/library/modules/_uid.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/core-js/library/modules/_to-integer.js","webpack:///./node_modules/core-js/library/modules/_defined.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_iterators.js","webpack:///./node_modules/core-js/library/modules/_object-keys.js","webpack:///./node_modules/core-js/library/modules/_shared-key.js","webpack:///./node_modules/core-js/library/modules/_shared.js","webpack:///./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:///./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:///./node_modules/core-js/library/modules/_wks-ext.js","webpack:///./node_modules/core-js/library/modules/_wks-define.js","webpack:///./node_modules/core-js/library/modules/_object-pie.js","webpack:///./node_modules/core-js/library/modules/_iter-define.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_redefine.js","webpack:///./node_modules/core-js/library/modules/_object-create.js","webpack:///./node_modules/core-js/library/modules/_object-keys-internal.js","webpack:///./node_modules/core-js/library/modules/_cof.js","webpack:///./node_modules/core-js/library/modules/_to-object.js","webpack:///./node_modules/core-js/library/modules/_object-gops.js","webpack:///./node_modules/core-js/library/modules/_object-gopn.js","webpack:///./source/raphael.js","webpack:///./source/raphael.core.js","webpack:///./node_modules/core-js/library/fn/symbol/iterator.js","webpack:///./node_modules/core-js/library/modules/es6.string.iterator.js","webpack:///./node_modules/core-js/library/modules/_string-at.js","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./node_modules/core-js/library/modules/_iter-create.js","webpack:///./node_modules/core-js/library/modules/_object-dps.js","webpack:///./node_modules/core-js/library/modules/_iobject.js","webpack:///./node_modules/core-js/library/modules/_array-includes.js","webpack:///./node_modules/core-js/library/modules/_to-length.js","webpack:///./node_modules/core-js/library/modules/_to-absolute-index.js","webpack:///./node_modules/core-js/library/modules/_html.js","webpack:///./node_modules/core-js/library/modules/_object-gpo.js","webpack:///./node_modules/core-js/library/modules/web.dom.iterable.js","webpack:///./node_modules/core-js/library/modules/es6.array.iterator.js","webpack:///./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///./node_modules/core-js/library/modules/_iter-step.js","webpack:///./node_modules/core-js/library/fn/symbol/index.js","webpack:///./node_modules/core-js/library/modules/es6.symbol.js","webpack:///./node_modules/core-js/library/modules/_meta.js","webpack:///./node_modules/core-js/library/modules/_enum-keys.js","webpack:///./node_modules/core-js/library/modules/_is-array.js","webpack:///./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack:///./node_modules/core-js/library/modules/_object-gopd.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack:///./source/eve/eve.js","webpack:///./source/raphael.core-extend.js","webpack:///./source/raphael.svg.js","webpack:///./source/raphael.vml.js","webpack:///./source/raphael.canvas.js"],"names":["obj1","obj2","skipUndef","shallow","item","objectStr","Array","merge","UNDEF","BLANK","nullStr","E","arrayToStr","objectToStr","dashedAttr2CSSMap","loadRefImage","element","attrs","src","RefImg","_","Image","undefined","showRecursively","el","origAttrTree","currentEl","currentNode","fn","localEl","localNode","_doHide","hide","parent","node","style","display","show","checkCyclicRef","obj","parentArr","i","length","bIndex","getArrayCopy","array","len","arg","tgtArr","srcArr","srcVal","tgtVal","str","cRef","push","e","Object","prototype","toString","call","cacher","f","scope","postprocessor","key","maxCache","sharedCache","firstArgKey","cache","count","__start","__end","cachedfunction","arg1","hashKey","arguments","join","cur","oldEnd","oldStart","apply","__prev","__next","Raphael","_win","window","global","R","first","args","_url","is","FUNCTION","loaded","eve","on","ARRAY","_engine","create","APPLY","splice","NU","add","slice","pop","upgrade","version","undef","S","HAS","CONCAT","STRING","OBJECT","FINITE","SPLIT","NONE","BLACK","NULL","AUTO","NORMAL","COMMA","TOKEN1","rCheckRegex","isIE","test","navigator","userAgent","paramCounts","a","c","h","l","m","r","q","s","t","v","z","arraySplice","hasPrototypeBug","hasOwnProperty","g","doc","document","win","safePointerEventMapping","mouseover","mousedown","mousemove","mouseup","mouseout","supportsTouch","maxTouchPoints","msMaxTouchPoints","supportsPointer","isEdge","isIE11","opera","isIE10","appVersion","indexOf","isFirefox","isWindows","mStr","lStr","strM","strL","__data","__params","charRegex","pathStringBreakFn","b","name","toLowerCase","subArr","replace","pathValues","CustomAttributes","caproto","ca","customAttributes","Paper","_CustomAttributes","_elementsById","id","_oid","paperproto","events","touchMap","dragstart","dragmove","dragend","Str","String","toFloat","parseFloat","toInt","parseInt","math","Math","mmax","max","mmin","min","abs","pow","mathCos","cos","mathSin","sin","mathSqrt","sqrt","round","PI","deg2rad","rad2deg","lowerCase","upperCase","toUpperCase","objectToString","separator","formatrg","colourRegExp","bezierrg","commaSpaces","p2s","pathCommaRegex","pathCommand","tCommand","isnan","hsrg","hs","rg","availableAttrs","_availableAttrs","blur","cursor","cx","cy","fill","font","gradient","height","href","opacity","path","rx","ry","stroke","target","title","transform","rotation","width","x","y","alpha","availableAnimAttrs","_availableAnimAttrs","eldata","sortByNumber","fun","pipe","rectPath","_rectPath","w","ellipsePath","getPath","_getPath","group","attr","circle","ellipse","rect","image","text","bbox","_getBBox","mapPath","matrix","j","ii","jj","pathi","path2curve","lastArgIfGroup","_lastArgIfGroup","clear","last","constructor","type","serializeArgs","_serializeArgs","arg0","pathString","o","isArray","clone","Function","res","Node","contains","parentNode","_g","extend","createUUID","uuidRegEx","uuidReplacer","random","_radial_gradient","_ISURL","getElementID","PriorityQueue","comparator","_comparator","_elements","isEmpty","size","peek","deq","current","largest","left","right","_compare","_swap","enq","floor","aux","ENABLE_RED_CANVAS","CanvasRenderingContext2D","createElement","getContext","SVGAngle","implementation","hasFeature","svg","vml","canvas","_Paper","_id","rad","deg","toHex","color","trim","bod","docum","ActiveXObject","write","close","body","createPopup","range","createTextRange","value","queryCommandValue","appendChild","defaultView","getComputedStyle","getPropertyValue","hsbtoString","hsltoString","rgbtoString","hex","prepareRGB","clr","getRGB","packageRGB","rgb","hsb2rgb","hsl2rgb","rgb2hsl","rgb2hsb","G","B","X","C","H","V","L","M","_path2string","_cacher","clrToString","colour","red","green","blue","values","error","substring","charAt","match","tintshade","percent","tint","offset","rgba","catmullRom2bezier","crp","d","iLen","p","sanitizePath","pathArg","pathStr","_pathToAbsolute","parsePathString","pth","paths","arr","pathClone","split","subPathArr","pathI","noOfDataPoints","concat","parseTransformString","TString","data","params","_pathCache","findDotsAtSegment","p1x","p1y","c1x","c1y","c2x","c2y","p2x","p2y","t1","t13","t12","t2","t3","mx","my","nx","ny","ax","ay","atan2","n","start","end","base3","p1","p2","p3","p4","bezlen","x1","y1","x2","y2","x3","y3","x4","y4","z2","Tvalues","Cvalues","sum","ct","xbase","ybase","comb","getTatLen","ll","step","intersect","denominator","px","py","px2","toFixed","py2","_removedFactory","methodname","pathDimensions","pathBBox","Y","dim","curveDim","xmin","ymin","xmax","ymax","bb","pathArray","pathToAbsolute","crz","pa","dots","k","kk","l2c","q2c","_13","_23","a2c","angle","large_arc_flag","sweep_flag","recursive","_120","xy","rotate","rx2","ry2","f1","asin","f2","df","f2old","x2old","y2old","c1","s1","c2","s2","tan","hx","hy","m1","m2","m3","m4","newres","findDotAtSegment","dot","_path2curve","path2","curve","bx","by","qx","qy","attrs2","processPath","T","Q","fixArc","pp","shift","pi","fixM","path1","a1","a2","seg","seg2","seglen","seg2len","parseDots","_parseDots","par","tear","_tear","paper","top","prev","bottom","next","tofront","_tofront","toback","_toback","insertafter","_insertafter","el2","paper2","insertbefore","_insertbefore","extractTransform","_extractTransform","tstr","tdata","dx","dy","sx","sy","Matrix","tlen","command","absolute","inver","invert","translate","getBBox","scale","dirtyT","getEmpty","equaliseTransform","_equaliseTransform","maxlength","from","to","tt1","tt2","_getContainer","container","getElementById","tagName","pixelWidth","offsetWidth","pixelHeight","offsetHeight","matrixproto","out","me","get","fromCharCode","toMatrixString","toFilter","norm","normalize","mag","row","scalex","shear","scaley","acos","isSimple","isSuperSimple","noRotation","toTransformString","shorter","vendor","platform","safari","setTimeout","remove","preventDefault","returnValue","preventTouch","originalEvent","stopPropagation","cancelBubble","stopTouch","eventCopyList","stopImmediatePropagation","clientX","clientY","pageX","pageY","bubbles","cancelable","touches","originalTarget","srcElement","relatedTarget","fromElement","changedTouches","layerX","layerY","deltaX","deltaY","makeSelectiveCopy","source","addEvent","addEventListener","realName","capture","dragFn","scrollY","documentElement","scrollTop","scrollX","scrollLeft","targetTouches","nodeName","olde","removeEventListener","attachEvent","event","detacher","detachEvent","dragMove","dummyEve","dragInfo","onmove","dragStartFn","_drag","_blockDrag","isPrimary","touch","identifier","removed","_dragmove","getNode","nextSibling","removeChild","insertBefore","move_scope","dragUp","onend","end_scope","start_scope","undragmove","undragend","unmousemove","unmouseup","elproto","eventName","tragetElem","unbind","shape","stopPartialEventPropagation","removeData","dbclick","handler","context","elem","eventType","isSingleFinger","_tappedOnce","storeHandlers","undbclick","derivedHandler","removeHandlers","getData","downables","mouseDown","untrack","mouseUp","track","undowned","hover","f_in","f_out","scope_in","scope_out","unhover","off","fcclick","downFn","_lastEventTriggered","moveFn","content","_clickStoreActual","_clickStoreDerived","_clickHandlerHelper","touchstart","_lastEventTriggeredAt","Date","getTime","touchmove","pointerdown","pointermove","fcunclick","clickHandlerHelper","clickStoreActual","clickStoreDerived","draggable","drag","onstart","dummydragMoveFn","_dragX","_dragY","startHandlerAttached","onDragOver","undrag","unmousedown","undragstart","follow","callback","stalk","followers","before","after","cb","unfollow","visibility","__set__","_addDefAttribs","paperConfig","config","capStyle","noDefaultAttribs","setConfig","_createDOMNodes","parentElem","elementObj","returnObj","ele","attrKey","createNode","_createNode","children","addDefs","elemObj","defs","setSize","setDimension","paramsObj","status","anim","animateWith","ms","easing","configObject","animate","setViewBox","fit","getById","raphael","x_y","x_y_w_h","isWithoutTransform","dirty","bboxwt","realPath","attrObj","curveslengths","getPointAtSegmentLength","getLengthFactory","istotal","subpath","onlystart","sp","subpaths","point","getTotalLength","getPointAtLength","getSubpathsAtLength","ef","easing_formulas","linear","backIn","backOut","elastic","bounce","oneBounceOut","easeIn","elasticOnce","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeOut","easeInOut","animationElements","requestAnimFrame","animation","Now","deqArr","tmpOpacity","radial","animFrameFn","paused","parentEl","time","diff","that","set","now","origms","init","executeEvent","peekVal","animElements","pos","initstatus","stop","delayend","delaystart","cPos","isNaN","upto255","isRadial","f3","f4","f5","f6","position","real","from2","repeat","totalOrigin","runAnimation","percents","getInstantAnimFrameFn","getAnimFrameFn","checkPercentage","num","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","instantRequestAnimFrame","refOb","Animation","smartMorph","hookFn","executeOb","CubicBezierAtTime","duration","sampleCurveX","solve","epsilon","solveCurveX","t0","d2","onAnimation","newAnim","times","sort","delay","del","converToRadialIfOneRadial","colorNormalizer","colorAr1","colorAr2","newColArr","newColArr2","temp","uniqArr","allToLinear","defaultAngleSet","getColorAtPosition","temp2","prevVal","lastVal","counter","rPos","openBrPos","closedBrPos","unshift","substr","prevPos","nextPos","colPrev","colNext","ratio","col","pathNormalizer","finalp1","finalp2","pathArr1","toSvgPath","pathArr2","createElementNS","bind","dPath","canFallback","str1","str2","testLen","testPoint","setAttribute","trimPathArray","getPathFromArray","_pathNormalizer","linetopath","removeBlanks","_divide","resArr","locArr","arrLen","diffTimes","divideArray","arrToDivide","countArr","transArr","isArr1","commonPathCalculator","uncommon1","uncommon2","lim1","lim2","nearestPoint1","nearestPoint2","map1","map2","groupedPath1","groupedPath2","gpIndex1","gpIndex2","isSame","splitter","mapper","ob","val","stringValue","getNearestExistingPoint","map","lim","index","mapValue","getCoordinateAsMove","pathToString","fPath1","fPath2","divisions","commonPath","tmp","normalizeUncommonPaths","dPath1","dPath2","pathLen1","pathLen2","ceil","isFinite","isInAnim","isInAnimSet","timestamp","tempDiff","change","colorsNormalized","toColour","toPath","pathes","eq","to2","easyeasy","origin","json","pause","pauseChildAnimation","pauseStart","resume","resumeChildAnimation","pauseEnd","stopChildAnimation","jumpToEnd","executeAnimQueue","queue","stopAnimation","currPaper","linkedPaper","toFront","thisNode","follower","toBack","firstChild","insertAfter","thatNode","getLastNode","appendTo","format","token","crispFixer","crispBound","at","normalizer","crisp","define","readyState","isLoaded","_preload","img","cssText","onload","onerror","glob","has","comaseparator","wildcard","numsort","current_event","firstDefined","lastDefined","objtos","ar","oldstop","listeners","indexed","ce","errors","zIndex","_events","names","items","nes","es","sep","RegExp","exist","nt","subname","nts","inodes","funcs","prune","once","object","string","finite","oldRaphael","was","Set","setproto","getOffset","box","getBoundingClientRect","ownerDocument","docElem","clientTop","clientLeft","pageYOffset","pageXOffset","transformPath","toMatrix","pathToRelative","_pathToRelative","rel","st","snapTo","tolerance","rem","registerFont","face","fonts","fontcopy","glyphs","family","prop","glyph","fullfill","tokenRegex","objNotationRegex","replacer","all","quote","quotedName","isFunc","ninja","isPointInsidePath","isPointInsideBBox","interPathHelper","isBBoxIntersect","bbox1","bbox2","bezierBBox","addArrow","isEnd","se","getElementsByTagName","refX","noneStr","arrows","endPath","markerCounter","endMarker","startPath","startMarker","pathId","markerId","$","markers","marker","use","markerHeight","markerWidth","orient","refY","delta","startdx","enddx","getSubpath","typeStringSTR","setWindow","newwin","initWin","getColor","reset","hsb","hsl","getFont","weight","stretch","normal","bold","lighter","bolder","fontName","thefont","print","letterSpacing","letters","notfirst","lineHeight","shifty","descent","curr","elements","getElementByPoint","elementFromPoint","so","sr","createSVGRect","hits","getIntersectionList","raphaelid","getElementsByBBox","forEach","thisArg","bot","getElementsByPoint","isPointInside","itemsArray","setStart","setFinish","removeDefs","updateDefs","hardUpdateChildren","elemChildren","childId","rp","tr","glow","offsetx","offsety","setTime","fltr","stdDeviation","_blur","filter","removeAttribute","runtimeStyle","blurregexp","margin","method","insertion","tail","todel","arglen","exclude","collector","glowConfig","ret","shape2","index2","inter","bez1","bez2","interHelper","interCount","justCount","l1","l2","n1","n2","dots1","dots2","di","di1","dj","dj1","ci","cj","pathIntersection","pathIntersectionNumber","x1m","y1m","x2m","y2m","pj","intr","segment1","segment2","tSpanStr","vAlignStr","lineHeightStr","fontSizeStr","imageStr","notToTuneStr","textStr","textPathStr","rtlStr","arrayStr","middleStr","bottomStr","topStr","pxStr","initialStr","fnStr","brStr","hiddenStr","visibleStr","fillStr","transformStr","visibilityStr","IESplTspanAttr","VERTICAL","HORIZONTAL","PRESERVESTRING","BLANKSTRING","vAlignMultiplier","middle","documentMode","xlinkRegx","textBreakRegx","ltgtbrRegex","nbspRegex","arrayShift","zeroStrokeFix","xlink","svgNSStr","isIpad","block","classic","diamond","open","oval","shapeRenderingAttrs","speed","precision","nav","isIE9","verIE","preLoad","ig","isURL","quickExtend","lastHoveredInfo","elementInfo","safeMouseEventMapping","allPossibleAttrs","elems","updateGradientReference","newGradient","refCount","setAttributeNS","gradientUnitNames","userSpaceOnUse","objectBoundingBox","gradientSpreadNames","pad","redlect","addGradient","SVG","fx","fy","units","spread","vector","opts","_fx","_fy","_r","_cx","_cy","shifted","dir","sqx","specs","updatePosition","pattern","patternTransform","dasharray","addDashes","predefValue","calculatedValues","butt","widthFactor","square","setFillAndStroke","_setFillAndStroke","att","finalAttr","finalS","ignoreAttrs","pathClip","urlArr","pn","hl","titleNode","clipispath","clip","rc","getAttribute","_stopabsolutePath","startString","endString","_vbSize","patternUnits","fillOpacityDirty","strokeOpacityDirty","shapeRendering","tuneText","updateFollowers","_updateFollowers","followerElem","fnName","leading","fontSize","oldAttr","_oldAttr","baseLineDiff","valign","direction","updateNode","tspanAttr","updateTspan","texts","tempIESpan","tspan","updateAlignment","tspans","textChanged","removeAllChild","hasnbsp","spacify","rUUID","textPathParams","textPath","tSpan","txtNode","textPathProps","textPathDef","createTextNode","pathText","textContent","noTSpan","lineCount","whiteSpace","tspan0Attr","innerHTML","Element","getTouchDistance","touch1","touch2","isY","select","_actualListners","_derivedListeners","sw","align","isText","isCalculated","finalParam","subkey","invokedCa","_invokedCa","caObj","def","pinchstart","finger0","finger1","distanceX","distanceY","unpinchstart","__blockDrag","_pinchDragStarted","pinchmove","unpinchmove","pinchend","unpinchend","pinch","pinchstarthandler","pinchinhandler","pinchendhandler","pinchin","unpinch","unpinchin","fcwheel","fcunwheel","actualEventType","isSafe","overrideId","css","_viewBox","con","Error","cnvs","isFloating","xmlns","_left","_top","renderfix","aspectRatio","vb","viewBox","preserveAspectRatio","detachPaper","_detached","attachPaper","getScreenCTM","createSVGMatrix","_desc","txt","desc","setHTMLClassName","LoadRefImage","fillString","Z","bites","cssDot","zoom","pathTypes","ovalTypes","path2vml","total","vals","isMove","compensation","setCoords","fillpos","flip","dxdy","kx","ky","coordsize","coordorigin","fillsize","behavior","adj","applyCustomAttributes","styles","getComputedFontStyle","_break","oriOp","newpath","isOval","isGroup","div","clipRect","dstyle","antialias","textpath","textpathStyle","fontFamily","fontWeight","fontStyle","newfill","fillOpacity","addGradientFill","nonGradOpacity","opacity1","opacity2","newstroke","strokeColor","joinstyle","miterlimit","endcap","dashstyle","span","_style","brect","W","bby","dirtyattrs","dd","bbx","oriFOpacity","oindex","fxfy","color2","clrs","colors","focus","focussize","focusposition","skew","vbs","_viewBoxShift","vbt","oldt","isGrad","isPatt","bbt","xget","yget","soft","evt","className","universalClassName","_HTMLClassName","tx","ty","tzoom","Path","textpathok","cs","createStyleSheet","addRule","namespaces","rvml","PX","mathFloor","DEFAULT_FILL","DEFAULT_STROKE","noHandle","FauxNode","dragi","onendHandler","_getConnectedNodes","above","below","_getTargetNode","coords","_containerEventHandler","offsetX","offsetY","owner","_rElement","mouseInteractions","outlinePath","conf","render","draw","setBBox","ctx","isClipped","validateAttrs","cr","save","fillStyle","strokeStyle","lineWidth","applyTransform","paint","restore","redraw","COMInstance","_bbox","clearRect","addMouseInteractivity","wrapper","_map","area","_mouseArea","eventListeners","updateMapAreaCoords","oArea","CircleFauxNode","pm","getTransformMatrix","setShapeBBox","drawPath","PathParser","setTokens","beginPath","nextCommand","getAsCurrentPoint","addMarker","moveTo","isCommandOrEnd","lineTo","newP","Point","isRelativeCommand","getScalar","getPoint","cntrl","getAsControlPoint","cp","bezierCurveTo","getReflectedControlPoint","quadraticCurveTo","control","xAxisRotation","largeArcFlag","sweepFlag","currp","cpp","centp","u","ad","ah","halfWay","addMarkerAngle","arc","closePath","checkPathHandler","_path","_mousemoveAdded","startListening","isInside","isOutside","transition","_transformPath","elAttrs","_isValid","NodeListItem","NodeList","addList","list","each","iterate","retVal","dispose","CanvasLayer","ncowner","ownerWrapper","_image","getCanvas","addToLayer","mergeWithLayerOnTop","layerObj","mergeWithLayerOnBottom","softDispose","NodeCollection","nodeItems","collectionItems","layerItems","layerOnTop","currentLayer","baseLayer","imageMap","getCurrentContext","setLayerOnTop","getCurrentCanvas","addNode","addCollection","collectionNode","ownerLayer","CanvasObjectModel","wrpr","com","root","layer","canvasEle","RectFauxNode","PathFauxNode","TextFauxNode","GroupFauxNode","nodeList","childNode","fNode","removeNode","refreshNode","refreshAll","angleTo","xp","yp","tokens","previousCommand","points","angles","getToken","makeAbsolute","priorTo","getMarkerPoints","getMarkerAngles","parentObj","strokeAlpha","globalAlpha","fillAlpha","maxR","sX","sY","tX","tY","strokeW","halign","fontArr","totalHeight","totalWidth","Infinity","startX","startY","textX","textY","measureText","fillText","_textdirty","parentMatrix","matrixApplied","repaint","finalAttrs","positionChanged","dimensionChanged","preC","elAbove","elBelow","needsRepaint","mmap","delkeys","stopEvent","onmoveHandler","onstartHandler"],"mappings":"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A8B,aAAa;;AAE3C;AACA;AACA;AACA;AACA;AACA,yCAAyC,oCAAoC;AAC7E,6CAA6C,oCAAoC;AACjF,KAAK,4BAA4B,oCAAoC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA,kCAAkC,2BAA2B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;ACpEA,aAAa,mBAAO,CAAC,CAAW;AAChC,WAAW,mBAAO,CAAC,EAAS;AAC5B,UAAU,mBAAO,CAAC,EAAQ;AAC1B,WAAW,mBAAO,CAAC,CAAS;AAC5B,UAAU,mBAAO,CAAC,CAAQ;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA,kFAAkF;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd,cAAc;AACd,cAAc;AACd,eAAe;AACf,eAAe;AACf,eAAe;AACf,gBAAgB;AAChB;;;;;;;AC7DA,kBAAkB,mBAAO,CAAC,CAAgB,MAAM,mBAAO,CAAC,EAAU;AAClE,+BAA+B,mBAAO,CAAC,EAAe,gBAAgB,mBAAmB,UAAU,EAAE,EAAE;AACvG,CAAC;;;;;;;ACFD,eAAe,mBAAO,CAAC,CAAc;AACrC,eAAe,mBAAO,CAAC,CAAW;AAClC;AACA;AACA;AACA;AACA;;;;;;;ACNA,iBAAiB,mBAAO,CAAC,CAAS;;;;;;;ACAlC;AACA,eAAe,mBAAO,CAAC,EAAc;AACrC,UAAU,mBAAO,CAAC,EAAe;AACjC,kBAAkB,mBAAO,CAAC,EAAkB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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,EAAE,mBAAO,CAAC,EAAgB;AAC1B,EAAE,mBAAO,CAAC,EAAe;AACzB;;AAEA,sBAAsB,mBAAO,CAAC,EAAY;AAC1C;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA,oBAAoB,uBAAuB;;AAE3C,oDAAoD,6BAA6B;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,eAAe,EAAE;AAC3C,0BAA0B,gBAAgB;AAC1C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,8CAA8C,YAAY,EAAE;;AAE5D;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,QAAQ,iCAAiC;AACpG,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,oCAAoC,mBAAO,CAAC,CAAS;AACrD;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrPA,WAAW,mBAAO,CAAC,EAAQ;AAC3B,eAAe,mBAAO,CAAC,CAAc;AACrC,UAAU,mBAAO,CAAC,CAAQ;AAC1B,cAAc,mBAAO,CAAC,CAAc;AACpC;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,EAAU;AAChC,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,GAAG,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"raphael.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"RedRaphael\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RedRaphael\"] = factory();\n\telse\n\t\troot[\"RedRaphael\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 41);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f65af0fa8606fdb5d30c","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_global.js\n// module id = 0\n// module chunks = 0","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_has.js\n// module id = 1\n// module chunks = 0","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_hide.js\n// module id = 2\n// module chunks = 0","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dp.js\n// module id = 3\n// module chunks = 0","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_descriptors.js\n// module id = 4\n// module chunks = 0","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-iobject.js\n// module id = 5\n// module chunks = 0","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks.js\n// module id = 6\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol/iterator.js\n// module id = 7\n// module chunks = 0","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-object.js\n// module id = 8\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol.js\n// module id = 9\n// module chunks = 0","/* eslint require-jsdoc: 'error', valid-jsdoc: 'error', valid-typeof: 'off' */\nlet UNDEF,\n    BLANK = '__blank',\n    nullStr = '\\u2400',\n    E = '',\n    arrayToStr = '[object Array]',\n    objectToStr = '[object Object]',\n    objectStr = 'object',\n    // Map of SVG attribute to CSS styles for all attributes that are in R._availableAttrs\n    // but fall through to the default case in R._setFillAndStroke.\n    dashedAttr2CSSMap = {\n        'font-family': 'fontFamily',\n        'font-size': 'fontSize',\n        'text-anchor': 'textAnchor',\n        'font-weight': 'fontWeight',\n        // 'stroke-linejoin': 'strokeLinejoin',\n        // 'stroke-linecap': 'strokeLinecap',\n        'letter-spacing': 'letterSpacing',\n        // 'stroke-miterlimit': 'strokeMiterlimit',\n        // 'stroke-opacity': 'strokeOpacity',\n        'font-style': 'fontStyle'\n    },\n    loadRefImage = function (element, attrs) {\n        var src = attrs.src,\n            RefImg = element._.RefImg;\n\n        if (!RefImg) {\n            RefImg = element._.RefImg = new Image();\n        }\n\n        if (attrs.src === undefined) {\n            return;\n        }\n        RefImg.src = src;\n        element._.RefImg = RefImg;\n    },\n    /**\n     * Recursively shows the element and stores the visibilties of its parents\n     * in a tree structure for future restoration.\n     * @param {Element} el - Element which is to shown recursively\n     * @return {Function} Function to restore the old visibility state.\n     */\n    showRecursively = function (el) {\n        var origAttrTree = {},\n            currentEl = el,\n            currentNode = origAttrTree,\n            fn = function () {\n                var localEl = el,\n                    localNode = origAttrTree;\n                while (localEl) {\n                    if (localNode._doHide) {\n                        localEl.hide();\n                    }\n                    localEl = localEl.parent;\n                    localNode = localNode.parent;\n                }\n            };\n        while (currentEl) {\n            if (currentEl.node && currentEl.node.style && currentEl.node.style.display === 'none') {\n                currentEl.show();\n                currentNode._doHide = true;\n            }\n            currentEl = currentEl.parent;\n            currentNode.parent = {};\n            currentNode = currentNode.parent;\n        }\n        return fn;\n    },\n    checkCyclicRef = function (obj, parentArr) {\n        var i = parentArr.length,\n            bIndex = -1;\n\n        while (i--) {\n            if (obj === parentArr[i]) {\n                bIndex = i;\n                return bIndex;\n            }\n        }\n\n        return bIndex;\n    },\n    // Returns a copy of a array\n    getArrayCopy = function (array) {\n        var i, len, arg;\n        for (i = 0, len = array.length, arg = new Array(len); i < len; i++) {\n            arg[i] = array[i];\n        }\n        return arg;\n    },\n    merge = function (obj1, obj2, skipUndef, tgtArr, srcArr) {\n        var item,\n            srcVal,\n            tgtVal,\n            str,\n            cRef;\n        // check whether obj2 is an array\n        // if array then iterate through it's index\n        //* *** MOOTOOLS precution\n        if (!srcArr) {\n            tgtArr = [obj1];\n            srcArr = [obj2];\n        } else {\n            tgtArr.push(obj1);\n            srcArr.push(obj2);\n        }\n\n        if (obj2 instanceof Array) {\n            for (item = 0; item < obj2.length; item += 1) {\n                try {\n                    srcVal = obj1[item];\n                    tgtVal = obj2[item];\n                } catch (e) {\n                    continue;\n                }\n\n                if (typeof tgtVal !== objectStr) {\n                    if (!(skipUndef && tgtVal === UNDEF)) {\n                        obj1[item] = tgtVal;\n                    }\n                } else {\n                    if (srcVal === null || typeof srcVal !== objectStr) {\n                        srcVal = obj1[item] = tgtVal instanceof Array ? [] : {};\n                    }\n                    cRef = checkCyclicRef(tgtVal, srcArr);\n                    if (cRef !== -1) {\n                        srcVal = obj1[item] = tgtArr[cRef];\n                    } else {\n                        merge(srcVal, tgtVal, skipUndef, tgtArr, srcArr);\n                    }\n                }\n            }\n        } else {\n            for (item in obj2) {\n                try {\n                    srcVal = obj1[item];\n                    tgtVal = obj2[item];\n                } catch (e) {\n                    continue;\n                }\n\n                if (tgtVal !== null && typeof tgtVal === objectStr) {\n                    // Fix for issue BUG: FWXT-602\n                    // IE < 9 Object.prototype.toString.call(null) gives\n                    // '[object Object]' instead of '[object Null]'\n                    // that's why null value becomes Object in IE < 9\n                    str = Object.prototype.toString.call(tgtVal);\n                    if (str === objectToStr) {\n                        if (srcVal === null || typeof srcVal !== objectStr) {\n                            srcVal = obj1[item] = {};\n                        }\n                        cRef = checkCyclicRef(tgtVal, srcArr);\n                        if (cRef !== -1) {\n                            srcVal = obj1[item] = tgtArr[cRef];\n                        } else {\n                            merge(srcVal, tgtVal, skipUndef, tgtArr, srcArr);\n                        }\n                    } else if (str === arrayToStr) {\n                        if (srcVal === null || !(srcVal instanceof Array)) {\n                            srcVal = obj1[item] = [];\n                        }\n                        cRef = checkCyclicRef(tgtVal, srcArr);\n                        if (cRef !== -1) {\n                            srcVal = obj1[item] = tgtArr[cRef];\n                        } else {\n                            merge(srcVal, tgtVal, skipUndef, tgtArr, srcArr);\n                        }\n                    } else {\n                        obj1[item] = tgtVal;\n                    }\n                } else {\n                    obj1[item] = tgtVal;\n                }\n            }\n        }\n        return obj1;\n    };\n/**\n * Function extend one object's properties with another one\n * @param    {Object} obj1 The object that will be extend\n * @param    {Objcet} obj2 The object, properties of which will be extended into the first one.\n * @param    {boolean} skipUndef Whether to skip the properties with undefined value\n * @param    {boolean} shallow whether it will be a shallow copy or deep copy\n * @return {Object} return the extend object\n */\nexport default function (obj1, obj2, skipUndef, shallow) {\n    var item;\n    // if none of the arguments are object then return back\n    if (typeof obj1 !== objectStr && typeof obj2 !== objectStr) {\n        return null;\n    }\n\n    if (typeof obj2 !== objectStr || obj2 === null) {\n        return obj1;\n    }\n\n    if (typeof obj1 === 'undefined') {\n        obj1 = obj2 instanceof Array ? [] : {};\n    }\n    if (shallow) {\n        // Copy all methods and properties of the object passed in parameter\n        // to the object to which this function is attached.\n        for (item in obj2) {\n            obj1[item] = obj2[item];\n        }\n    } else {\n        merge(obj1, obj2, skipUndef);\n    }\n    return obj1;\n}\n\n/**\n * Function to cache a function's execution\n * @param {Function} f the original function\n * @param {Object} scope the scope on which the function will be called\n * @param {Function} postprocessor the method that will process the returned value\n * @param {string} key key by which the value will be stored\n * @param {number} maxCache The masimum length of cache\n * @param {Object} sharedCache methods might share a common cache if the key is veryLong to reduce the memory\n * @param {boolean} firstArgKey The first argument is the key and there is no other argument\n * @return {any} returns the return of the original method processed by the post processor if any\n */\nvar cacher = function (f, scope, postprocessor, key, maxCache, sharedCache, firstArgKey) {\n    // If it is not a shared cache then \n    var cache = sharedCache || {},\n        count = 0;\n    if (cache.__start === undefined) {\n        cache.__start = null;\n    }\n    if (cache.__end === undefined) {\n        cache.__end = null;\n    }\n    maxCache = maxCache || 1e3;\n    key = key || 'item';\n    /**\n     * Function that replace the original method with the ability to cache\n     * @param {string} arg1 the first and only argument\n     * @return {any} Return the exact result executed by the original method\n     */\n    function cachedfunction (arg1) {\n        var hashKey = firstArgKey ? arg1 : getArrayCopy(arguments).join(nullStr),\n            // newEndStr,\n            // newEnd,\n            cur,\n            // __next,\n            // __prev,\n            // nextStr,\n            oldEnd,\n            oldStart;\n\n        hashKey = hashKey === E ? BLANK : hashKey;\n        // /** **** Cache hit ******/\n        // // If the following condition is true it is a cache hit.\n        // if (hashKey in cache) {\n        //     // cur is the element due to cache hit\n        //     cur = cache[hashKey];\n        //     nextStr = cur.__prev; // nextStr is the id of __prev element of cur.\n        //     __next = cur.__next; // __next is the next node of the current hit node\n        //     __prev = ((nextStr !== null) && cache[nextStr]) || null; // __prev is the previous node of the current hit node\n\n        //     // Scope of error: Always check if the start and cur are not same node.\n        //     // start and cur can be same when same node has back to back cache hits.\n        //     if (cache.__start === cur) {\n        //         // do nothing.\n        //     } else if (cache[cache.__end] === cur) { // when the cur element is the last element of cache\n        //         cache.__start.__prev = cache.__end;\n\n        //         newEndStr = cache[cache.__end].__prev; // Take Id of the previous element of the cur element\n        //         cache[newEndStr].__next = null; // Make it's next pointer null so that it doesn't point to cur\n\n        //         cur.__prev = null; // taking cur to the front. make it's previous point to null, since there is no element ahead of it\n        //         cur.__next = cache.__start; // make it's __next pointer to the present element at the front.\n\n        //         cache.__start = cache[cache.__end]; // start pointer now point to the first element\n        //         cache.__end = newEndStr; // end holds the ID of the last element\n        //     } else { // when cur element is any element except start and end\n        //         cache.__start.__prev = hashKey; // present start node's previous pointer should point to the cur node\n\n        //         cur.__next = cache.__start; // cur node's __next pointer now points to the present start, making the present start to 2nd position\n        //         cur.__prev = null; // since cur is in front, no one should be ahead of it. hence __prev = null\n\n        //         __next.__prev = nextStr; // cur's __next node should point to cur's __prev node\n        //         __prev.__next = __next; // cur's __prev node should point to cur's __next node\n\n        //         cache.__start = cur; // start point to the cur node\n        //     }\n        // } else {\n        //     /** ***** Cache miss *******/\n        //     // Else, it is a cache miss.\n\n        //     /* ----- deletion process begins here -----\n        //         *  deletion takes place if cache is full \n        //         * */\n        //     if (count > maxCache) {\n        //         // Take the second last element\n        //         newEndStr = cache[cache.__end].__prev;\n\n        //         newEnd = cache[newEndStr];\n        //         // __next pointer of the second last element should be deleted.(Beware! Not doing this step will lead to memory leak)\n        //         newEnd.__next = null;\n\n        //         // clear the pointers of the node to be deleted\n        //         cache[cache.__end].__prev = null;\n\n        //         // delete the node\n        //         delete cache[cache.__end];\n        //         // update the end pointer\n        //         cache.__end = newEndStr;\n        //         count--; // decrement the counter\n        //     }\n\n        //     /* ----- insertion process begins here ----- */\n        //     // create a new node\n        //     cache[hashKey] = {\n        //         __prev: null,\n        //         __next: cache.__start // newNode's __next pointer should point to the present start\n        //     };\n        //     // If there is a function then call the function to get the results\n        //     f && (cache[hashKey][key] = postprocessor ? postprocessor(f.apply(scope, arguments)) : f.apply(scope, arguments));\n\n        //     // If start is present(start can be null if it is first node), point start.__prev to the new object\n        //     if (cache.__start !== null) {\n        //         cache.__start.__prev = hashKey; // The present start node will fall second.\n        //     }\n        //     // finally assign start to the new node as start always points to the node at front\n        //     cache.__start = cache[hashKey];\n        //     // In case newNode is the first node of the cache end will also be null, but it should point to the start.\n        //     (cache.__end === null) && (cache.__end = hashKey);\n        //     count++;\n        // }\n        // cur is the element due to cache hit\n        cur = cache[hashKey];\n        if (!cur) { /** ***** Cache miss *******/\n            /* ----- insertion process begins here ----- */\n            // create a new node and finally assign the new node as start as it should always points to the node at front\n            cur = cache[hashKey] = {};\n            // If there is a function then call the function to get the results\n            f && (cache[hashKey][key] = postprocessor ? postprocessor(f.apply(scope, arguments)) : f.apply(scope, arguments));\n            // In case newNode is the first node of the cache end will also be null, but it should point to the start.\n            (cache.__end === null) && (cache.__end = hashKey);\n            // increase the counter\n            count++;\n            /* ----- deletion process begins here -----\n            *  deletion takes place if cache is full \n            */\n            if (count > maxCache && cache.__end) {\n                oldEnd = cache[cache.__end];\n                // __next pointer of the second last element should be deleted.\n                cache[oldEnd.__prev].__next = null;\n                // delete the node\n                delete cache[cache.__end];\n                // update the end pointer\n                cache.__end = oldEnd.__prev;\n                count--; // decrement the counter\n            }\n        } else { // hit then conect the prev and next of hit to each other\n            if (cur.__prev) {\n                cache[cur.__prev].__next = cur.__next;\n                // Not the last element\n                if (cur.__next) {\n                    cur.__next.__prev = cur.__prev;\n                } else { // is the last element then update the end element\n                    cache.__end = cur.__prev;\n                }\n            }\n        }\n        // this is not the start element then set it as the start element\n        oldStart = cache.__start;\n        if (oldStart !== cur) {\n            cur.__prev = null;\n            cur.__next = oldStart;\n            oldStart && (oldStart.__prev = hashKey);\n            cache.__start = cur;\n        }\n        return cache[hashKey][key];\n    }\n    return cachedfunction;\n};\n\nexport {merge, getArrayCopy, dashedAttr2CSSMap, loadRefImage, showRecursively, cacher};\n\n\n\n// WEBPACK FOOTER //\n// ./source/raphael.lib.js","module.exports = true;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_library.js\n// module id = 11\n// module chunks = 0","var core = module.exports = { version: '2.6.10' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_core.js\n// module id = 12\n// module chunks = 0","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-object.js\n// module id = 13\n// module chunks = 0","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails.js\n// module id = 14\n// module chunks = 0","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_property-desc.js\n// module id = 15\n// module chunks = 0","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_uid.js\n// module id = 16\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 17\n// module chunks = 0","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-integer.js\n// module id = 18\n// module chunks = 0","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_defined.js\n// module id = 19\n// module chunks = 0","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-primitive.js\n// module id = 20\n// module chunks = 0","module.exports = {};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iterators.js\n// module id = 21\n// module chunks = 0","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys.js\n// module id = 22\n// module chunks = 0","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared-key.js\n// module id = 23\n// module chunks = 0","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: ' 2019 Denis Pushkarev (zloirock.ru)'\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared.js\n// module id = 24\n// module chunks = 0","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-bug-keys.js\n// module id = 25\n// module chunks = 0","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-to-string-tag.js\n// module id = 26\n// module chunks = 0","exports.f = require('./_wks');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-ext.js\n// module id = 27\n// module chunks = 0","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-define.js\n// module id = 28\n// module chunks = 0","exports.f = {}.propertyIsEnumerable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-pie.js\n// module id = 29\n// module chunks = 0","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-define.js\n// module id = 30\n// module chunks = 0","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_export.js\n// module id = 31\n// module chunks = 0","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ie8-dom-define.js\n// module id = 32\n// module chunks = 0","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_dom-create.js\n// module id = 33\n// module chunks = 0","module.exports = require('./_hide');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_redefine.js\n// module id = 34\n// module chunks = 0","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-create.js\n// module id = 35\n// module chunks = 0","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys-internal.js\n// module id = 36\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_cof.js\n// module id = 37\n// module chunks = 0","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-object.js\n// module id = 38\n// module chunks = 0","exports.f = Object.getOwnPropertySymbols;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gops.js\n// module id = 39\n// module chunks = 0","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn.js\n// module id = 40\n// module chunks = 0","// import Raphael from './index';\n\n// export default Raphael\n\nimport Raphael from './raphael.core';\nimport extended from './raphael.core-extend';\n\nimport svg from './raphael.svg';\nimport vml from './raphael.vml';\nimport canvas from './raphael.canvas';\n\nextended(Raphael);\nsvg(Raphael);\nvml(Raphael);\ncanvas(Raphael);\n\nexport default Raphael;\n\n\n\n// WEBPACK FOOTER //\n// ./source/raphael.js","/**!\n * RedRaphael 1.0.0 - JavaScript Vector Library\n * Copyright (c) 2012-2013 FusionCharts, Inc. <http://www.fusioncharts.com>\n *\n * Raphael 2.1.0\n * Copyright (c) 2008-2012 Dmitry Baranovskiy <http://raphaeljs.com>\n * Copyright  2008-2012 Sencha Labs <http://sencha.com>\n *\n * Licensed under the MIT license.\n */\n\nimport eve from './eve/eve';\nimport extend, {merge, getArrayCopy, cacher} from './raphael.lib';\n\nvar _win = (typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : null);\n\n    /*\\\n     * Raphael\n     [ method ]\n     **\n     * Creates a canvas object on which to draw.\n     * You must do this first, as all future calls to drawing methods\n     * from this instance will be bound to this canvas.\n     > Parameters\n     **\n     - container (HTMLElement|string) DOM element or its ID which is going to be a parent for drawing surface\n     - width (number)\n     - height (number)\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - x (number)\n     - y (number)\n     - width (number)\n     - height (number)\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - all (array) (first 3 or 4 elements in the array are equal to [containerID, width, height] or [x, y, width, height]. The rest are element descriptions in format {type: type, <attributes>}). See @Paper.add.\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - onReadyCallback (function) function that is going to be called on DOM ready event. You can also subscribe to this event via Eves DOMLoad event. In this case method returns `undefined`.\n     = (object) @Paper\n     > Usage\n     | // Each of the following examples create a canvas\n     | // that is 320px wide by 200px high.\n     | // Canvas is created at the viewports 10,50 coordinate.\n     | var paper = Raphael(10, 50, 320, 200);\n     | // Canvas is created at the top left corner of the #notepad element\n     | // (or its top right corner in dir=\"rtl\" elements)\n     | var paper = Raphael(document.getElementById(\"notepad\"), 320, 200);\n     | // Same as above\n     | var paper = Raphael(\"notepad\", 320, 200);\n     | // Image dump\n     | var set = Raphael([\"notepad\", 320, 200, {\n     |     type: \"rect\",\n     |     x: 10,\n     |     y: 10,\n     |     width: 25,\n     |     height: 25,\n     |     stroke: \"#f00\"\n     | }, {\n     |     type: \"text\",\n     |     x: 30,\n     |     y: 40,\n     |     text: \"Dump\"\n     | }]);\n    \\*/\n    function R(first) {\n        var args,\n            arg,\n            f;\n\n        // Code commented as resources will now be referenced using relative URLs.\n        // @todo Remove once we have ascertained that there are no issues in any environment.\n        // if (R._url) { // Reinitialize URLs to be safe from pop state event\n        //     R._url = (R._g && R._g.win || _window).location.href.replace(/#.*?$/, E);\n        // }\n        // If the URL is undefined only then initialize the URL with blank in order to support\n        // both relative as well as absolute URLs\n        // @todo Need to track the URL change and modify the URL for the gradient and other elements dynamically.\n        if (R._url === undefined) {\n            R._url = E;\n        }\n\n        if (R.is(first, FUNCTION)) {\n            return loaded ? first() : eve.on(\"raphael.DOMload\", first);\n        }\n        else if (R.is(first, ARRAY)) {\n            return R._engine.create[APPLY](R, first.splice(0, 3 + R.is(first[0], NU))).add(first);\n        }\n        else {\n            arg = getArrayCopy(arguments);\n            args = Array.prototype.slice.call(arg, 0);\n            if (R.is(args[args.length - 1], FUNCTION)) {\n                f = args.pop();\n                return loaded ? f.call(R._engine.create[APPLY](R, args)) : eve.on(\"raphael.DOMload\", function() {\n                    f.call(R._engine.create[APPLY](R, args));\n                });\n            } else {\n                return R._engine.create[APPLY](R, arguments);\n            }\n        }\n    }\n\n    R.upgrade = \"1.0.0\";\n    R.version = \"2.1.0\";\n    R.eve = eve;\n    // RedRaphael = R;\n\nvar loaded,\n    UNDEF,\n    undef,\n    E = '',\n    S = ' ',\n    HAS = 'hasOwnProperty',\n    APPLY = 'apply',\n    CONCAT = 'concat',\n    NU = 'number',\n    STRING = 'string',\n    ARRAY = 'array',\n    OBJECT = 'object',\n    FINITE = 'finite',\n    SPLIT = 'split',\n    NONE = 'none',\n    BLACK = '#000',\n    NULL = 'null',\n    FUNCTION = 'function',\n    AUTO = 'auto',\n    NORMAL = 'normal',\n    COMMA = ',',\n    TOKEN1 = '$1',\n    rCheckRegex = /R/i,\n    isIE = /trident/i.test(_win.navigator.userAgent),\n    paramCounts = {\n        a: 7,\n        c: 6,\n        h: 1,\n        l: 2,\n        m: 2,\n        r: 4,\n        q: 4,\n        s: 4,\n        t: 2,\n        v: 1,\n        z: 0\n    },\n    arraySplice = Array.prototype.splice,\n    hasPrototypeBug = (function () {\n        var a = function () { /* no body */ };\n        return a.hasOwnProperty('prototype');\n    }()),\n    g = {\n        doc: _win.document,\n        win: _win\n    },\n    doc = g.doc,\n    win = g.win,\n    safePointerEventMapping = R.safePointerEventMapping = {\n        mouseover: \"pointerover\",\n        mousedown: \"pointerdown\",\n        mousemove: \"pointermove\",\n        mouseup: \"pointerup\",\n        mouseout: \"pointerout\"\n    },\n    navigator = win.navigator,\n    supportsTouch = R.supportsTouch = 'ontouchstart' in doc ||\n        navigator.maxTouchPoints || navigator.msMaxTouchPoints,\n    supportsPointer = R.supportsPointer = \"onpointerover\" in doc,\n    isEdge = R.isEdge = /Edge/.test(navigator.userAgent),\n    isIE11 = R.isIE11 = /trident/i.test(navigator.userAgent) &&\n        /rv:11/i.test(navigator.userAgent) && !win.opera,\n    isIE10 = R.isIE10 = navigator.appVersion.indexOf('MSIE 10') !== -1,\n    isFirefox = R.isFirefox = /Firefox/.test(navigator.userAgent),\n    isWindows = R.isWindows = /Windows/.test(navigator.userAgent),\n    mStr = 'm',\n    lStr = 'l',\n    strM = 'M',\n    strL = 'L',\n    __data,\n    __params = [],\n    charRegex = /[a-z]/i,\n    pathStringBreakFn = function pathStringBreakFn(a, b, c) {\n        var name = b.toLowerCase(),\n        subArr = [],\n        i = 0;\n        __params.length = 0;\n        c.replace(pathValues, function (a, b) {\n            b && __params.push(+b);\n        });\n        if (name === 'r') {\n            __data.push([b][CONCAT](__params));\n        } else if(name === 'z'){\n            __data.push([b]);\n        } else if (__params.length >= paramCounts[name]) {\n                while (i < __params.length) {\n                    if (i % paramCounts[name]) {\n                        // push the rest of the co-ordinates into the path sub array.\n                        subArr.push(__params[i]);\n                    } else {\n                        // if any path is previously parsed then push it\n                        subArr.length && __data.push(subArr) && (subArr = []);\n                        // new path array for the last known path command\n                        subArr.push(b,__params[i]);\n                    }\n                    i++;\n                }\n                // push the last parsed path sub array\n                __data.push(subArr);\n        }\n    },\n\n        CustomAttributes = function () {\n            /*\\\n             * Raphael.ca\n             [ property (object) ]\n             **\n             * Shortcut for @Raphael.customAttributes\n            \\*/\n            /*\\\n             * Raphael.customAttributes\n             [ property (object) ]\n             **\n             * If you have a set of attributes that you would like to represent\n             * as a function of some number across all papers you can do it\n             * easily with custom attributes:\n             > Usage\n             | Raphael.customAttributes.hue = function (num) {\n             |     num = num % 1;\n             |     return {fill: \"hsb(\" + num + \", 0.75, 1)\"};\n             | };\n             | // Custom attribute hue will change fill\n             | // to be given hue with fixed saturation and brightness.\n             | // Now you can use it like this:\n             | var c = paper.circle(10, 10, 10).attr({hue: .45});\n             | // or even like this:\n             | c.animate({hue: 1}, 1e3);\n             |\n             | // You could also create custom attribute\n             | // with multiple parameters:\n             | Raphael.customAttributes.hsb = function (h, s, b) {\n             |     return {fill: \"hsb(\" + [h, s, b].join(COMMA) + \")\"};\n             | };\n             | c.attr({hsb: \"0.5 .8 1\"});\n             | c.animate({hsb: [1, 0, 0.5]}, 1e3);\n            \\*/\n        },\n        caproto = R.ca = R.customAttributes = CustomAttributes.prototype,\n\n        Paper = function () {\n            /*\\\n             * Paper.ca\n             [ property (object) ]\n             **\n             * Shortcut for @Paper.customAttributes\n            \\*/\n            /*\\\n             * Paper.customAttributes\n             [ property (object) ]\n             **\n             * If you have a set of attributes that you would like to represent\n             * as a function of some number you can do it easily with custom attributes:\n             > Usage\n             | paper.customAttributes.hue = function (num) {\n             |     num = num % 1;\n             |     return {fill: \"hsb(\" + num + \", 0.75, 1)\"};\n             | };\n             | // Custom attribute hue will change fill\n             | // to be given hue with fixed saturation and brightness.\n             | // Now you can use it like this:\n             | var c = paper.circle(10, 10, 10).attr({hue: .45});\n             | // or even like this:\n             | c.animate({hue: 1}, 1e3);\n             |\n             | // You could also create custom attribute\n             | // with multiple parameters:\n             | paper.customAttributes.hsb = function (h, s, b) {\n             |     return {fill: \"hsb(\" + [h, s, b].join(COMMA) + \")\"};\n             | };\n             | c.attr({hsb: \"0.5 .8 1\"});\n             | c.animate({hsb: [1, 0, 0.5]}, 1e3);\n            \\*/\n            this.ca = this.customAttributes = new CustomAttributes();\n            this._CustomAttributes = function () {};\n            this._CustomAttributes.prototype = this.ca;\n            this._elementsById = {};\n            this.id = R._oid++;\n            eve('raphael.new', this);\n        },\n\n        /*\\\n         * Raphael.fn\n         [ property (object) ]\n         **\n         * You can add your own method to the canvas. For example if you want to draw a pie chart,\n         * you can create your own pie chart function and ship it as a Raphal plugin. To do this\n         * you need to extend the `Raphael.fn` object. You should modify the `fn` object before a\n         * Raphal instance is created, otherwise it will take no effect. Please note that the\n         * ability for namespaced plugins was removed in Raphael 2.0. It is up to the plugin to\n         * ensure any namespacing ensures proper context.\n         > Usage\n         | Raphael.fn.arrow = function (x1, y1, x2, y2, size) {\n         |     return this.path( ... );\n         | };\n         | // or create namespace\n         | Raphael.fn.mystuff = {\n         |     arrow: function () {},\n         |     star: function () {},\n         |     // etc\n         | };\n         | var paper = Raphael(10, 10, 630, 480);\n         | // then use it\n         | paper.arrow(10, 10, 30, 30, 5).attr({fill: \"#f00\"});\n         | paper.mystuff.arrow();\n         | paper.mystuff.star();\n        \\*/\n        paperproto = R.fn = Paper.prototype = R.prototype,\n\n        // Add new dragstart, dragmove and dragend events in order to support touch drag in both touch and hybrid devices\n        events = \"click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel dragstart dragmove dragend\"[SPLIT](S),\n        touchMap = {\n            dragstart: \"touchstart\",\n            dragmove: \"touchmove\",\n            dragend: \"touchend\"\n        },\n\n        Str = String,\n        toFloat = win.parseFloat,\n        toInt = win.parseInt,\n        math = Math,\n        mmax = math.max,\n        mmin = math.min,\n        abs = math.abs,\n        pow = math.pow,\n        mathCos = math.cos,\n        mathSin = math.sin,\n        mathSqrt = math.sqrt,\n        round = math.round,\n        PI = math.PI,\n        deg2rad = PI / 180,\n        rad2deg = 180 / PI,\n\n        lowerCase = Str.prototype.toLowerCase,\n        upperCase = Str.prototype.toUpperCase,\n        objectToString = Object.prototype.toString,\n\n        separator = /[, ]+/,\n        formatrg = /\\{(\\d+)\\}/g,\n        colourRegExp = /^\\s*((#[a-f\\d]{6})|(#[a-f\\d]{3})|rgba?\\(\\s*([\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?(?:\\s*,\\s*[\\d\\.]+%?)?)\\s*\\)|hsba?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?)%?\\s*\\)|hsla?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?)%?\\s*\\))\\s*$/i,\n        bezierrg = /^(?:cubic-)?bezier\\(([^,]+),([^,]+),([^,]+),([^\\)]+)\\)/,\n        commaSpaces = /[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*/,\n        p2s = /,?([achlmqrstvxz]),?/gi,\n        pathCommaRegex = /,?[a-z],?/i,\n        pathCommand = /([achlmrqstvz])[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*)+)/ig,\n        tCommand = /([rstm])[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*)+)/ig,\n        pathValues = /(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*/ig,\n\n        isnan = {\n            \"NaN\": 1,\n            \"Infinity\": 1,\n            \"-Infinity\": 1\n        },\n        hsrg = {\n            hs: 1,\n            rg: 1\n        },\n        availableAttrs = R._availableAttrs = {\n            \"arrow-end\": NONE,\n            \"arrow-start\": NONE,\n            blur: 0,\n            \"clip-rect\": \"0 0 1e9 1e9\",\n            \"clip-path\": E,\n            cursor: \"default\",\n            cx: 0,\n            cy: 0,\n            fill: \"#fff\",\n            \"fill-opacity\": 1,\n            font: '10px \"Arial\"',\n            \"font-family\": '\"Arial\"',\n            \"font-size\": \"10\",\n            \"font-style\": NORMAL,\n            \"font-weight\": 400,\n            gradient: 0,\n            height: 0,\n            href: \"about:blank\",\n            \"letter-spacing\": 0,\n            \"line-height\": 12,\n            \"vertical-align\": \"middle\",\n            opacity: 1,\n            path: \"M0,0\",\n            r: 0,\n            rx: 0,\n            ry: 0,\n            src: E,\n            stroke: \"#000\",\n            \"stroke-dasharray\": E,\n            \"stroke-linecap\": \"butt\",\n            \"stroke-linejoin\": \"butt\",\n            \"stroke-miterlimit\": 0,\n            \"stroke-opacity\": 1,\n            \"stroke-width\": 1,\n            target: \"_blank\",\n            \"text-anchor\": \"middle\",\n            \"visibility\": E,\n            title: E,\n            transform: E,\n            rotation: 0,\n            width: 0,\n            x: 0,\n            y: 0,\n            \"shape-rendering\": AUTO,\n            alpha: NU,\n            //Adding all the possible attributes for svg\n            \"font-stretch\": NORMAL,\n            \"alignment-baseline\": AUTO,\n            \"baseline-shift\": AUTO,\n            \"clip-rule\": \"nonzero\",\n            // @todo - need to validate whether direction is required here or not.\n            // \"direction\": \"ltr\",\n            \"dominant-baseline\": AUTO,\n            \"fill-rule\": \"nonzero\",\n            \"filter\": NONE,\n            \"flood-color\": BLACK,\n            \"flood-opacity\": 1,\n            \"font-size-adjust\": NONE,\n            \"font-stretch\": NORMAL,\n            \"font-variant\": NORMAL,\n            \"kerning\": AUTO,\n            \"lighting-color\": \"white\",\n            \"marker-end\": NONE,\n            \"marker-mid\": NONE,\n            \"marker-start\": NONE,\n            \"mask\": NONE,\n            \"pointer-events\": \"visiblePainted\",\n            \"stop-color\": BLACK,\n            \"stop-opacity\": 1,\n            \"stroke-dashoffset\": 0,\n            \"text-decoration\": NONE,\n            \"vector-effect\": E,\n            \"visibility\": \"visible\",\n            \"word-spacing\": NORMAL,\n            \"writing-mode\": \"lr-tb\"\n        },\n        availableAnimAttrs = R._availableAnimAttrs = {\n            blur: NU,\n            \"clip-rect\": \"csv\",\n            \"clip-path\": \"path\",\n            cx: NU,\n            cy: NU,\n            fill: \"colour\",\n            \"fill-opacity\": NU,\n            \"font-size\": NU,\n            height: NU,\n            opacity: NU,\n            path: \"path\",\n            r: NU,\n            rx: NU,\n            ry: NU,\n            stroke: \"colour\",\n            \"stroke-opacity\": NU,\n            \"stroke-width\": NU,\n            transform: \"transform\",\n            width: NU,\n            x: NU,\n            y: NU,\n            // Required for pie 3d\n            \"color\": \"colour\",\n            \"borderColor\": \"colour\",\n            \"borderWidth\": NU,\n            alpha: NU,\n            \"text-bound\": \"text-bound\"\n        },\n        eldata = {},\n\n        sortByNumber = function(a, b) {\n            return toFloat(a) - toFloat(b);\n        },\n        fun = function() {\n        },\n        pipe = function(x) {\n            return x;\n        },\n\n        rectPath = R._rectPath = function(x, y, w, h, r) {\n            if (r) {\n                return [[strM, x + r, y], [lStr, w - r * 2, 0], [\"a\", r, r, 0, 0, 1, r, r], [lStr, 0, h - r * 2], [\"a\", r, r, 0, 0, 1, -r, r], [lStr, r * 2 - w, 0], [\"a\", r, r, 0, 0, 1, -r, -r], [lStr, 0, r * 2 - h], [\"a\", r, r, 0, 0, 1, r, -r], [\"z\"]];\n            }\n            return [[strM, x, y], [lStr, w, 0], [lStr, 0, h], [lStr, -w, 0], [\"z\"]];\n        },\n\n        ellipsePath = function(x, y, rx, ry) {\n            if (ry == null) {\n                ry = rx;\n            }\n            return [[strM, x, y], [mStr, 0, -ry], [\"a\", rx, ry, 0, 1, 1, 0, 2 * ry], [\"a\", rx, ry, 0, 1, 1, 0, -2 * ry], [\"z\"]];\n        },\n\n        getPath = R._getPath = {\n            group: function() {\n                return false;\n            },\n            path: function(el) {\n                return el.attr(\"path\");\n            },\n            circle: function(el) {\n                var a = el.attrs;\n                return ellipsePath(a.cx, a.cy, a.r);\n            },\n            ellipse: function(el) {\n                var a = el.attrs;\n                return ellipsePath(a.cx, a.cy, a.rx, a.ry);\n            },\n            rect: function(el) {\n                var a = el.attrs;\n                return rectPath(a.x, a.y, a.width, a.height, a.r);\n            },\n            image: function(el) {\n                var a = el.attrs;\n                return rectPath(a.x, a.y, a.width, a.height);\n            },\n            text: function(el) {\n                var bbox = el._getBBox();\n                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\n            }\n        },\n\n        /*\\\n         * Raphael.mapPath\n         [ method ]\n         **\n         * Transform the path string with given matrix.\n         > Parameters\n         - path (string) path string\n         - matrix (object) see @Matrix\n         = (string) transformed path string\n        \\*/\n        mapPath = R.mapPath = function(path, matrix) {\n            if (!matrix) {\n                return path;\n            }\n            var x,\n                y,\n                i,\n                j,\n                ii,\n                jj,\n                pathi;\n\n            path = path2curve(path).slice(0);\n            for (i = 0, ii = path.length; i < ii; i++) {\n                pathi = path[i] = path[i].slice(0);\n                for (j = 1, jj = pathi.length; j < jj; j += 2) {\n                    x = matrix.x(pathi[j], pathi[j + 1]);\n                    y = matrix.y(pathi[j], pathi[j + 1]);\n                    pathi[j] = x;\n                    pathi[j + 1] = y;\n                }\n            }\n            return path;\n        },\n\n        lastArgIfGroup = R._lastArgIfGroup = function (args, clear) {\n            var last = args.length - 1,\n                arg = args[last];\n\n            if (arg && (arg.constructor === R.el.constructor) && arg.type === 'group') {\n                if (clear) {\n                    args[last] = undefined;\n                    delete args[last];\n                    arraySplice.call(args, last, 1);\n                }\n                return arg;\n            }\n        },\n\n        serializeArgs = R._serializeArgs = function (args) {\n            var arg0 = args[0],\n                pathString,\n                attrs,\n                i,\n                ii;\n\n            if (R.is(arg0, OBJECT) && !R.is(arg0, ARRAY) && arg0.type !== 'group') {\n\n                attrs = arg0;\n\n                if (arg0.path) {\n                    pathString = arg0.path;\n                    pathString && !R.is(pathString, STRING) &&\n                        !R.is(pathString[0], ARRAY) && (pathString += E);\n                }\n\n                for (i = 1, ii = arguments.length; i < ii; i += 2) {\n                    if (!attrs[arguments[i]]) {\n                        attrs[arguments[i]] = arguments[i + 1];\n                    }\n                }\n            }\n            else {\n                attrs = {};\n                for (i = 1, ii = arguments.length; i < ii; i += 2) {\n                    attrs[arguments[i]] = args[(i-1) / 2] || arguments[i+1];\n                }\n            }\n            return attrs;\n        },\n\n        /*\\\n         * Raphael.is\n         [ method ]\n         **\n         * Handfull replacement for `typeof` operator.\n         > Parameters\n         - o () any object or primitive\n         - type (string) name of the type, i.e. string, function, number, etc.\n         = (boolean) is given value is of given type\n        \\*/\n        is = R.is = function(o, type) {\n            if (type === FINITE) {\n                return !isnan[HAS](+o);\n            }\n            if (type === ARRAY) {\n                return o instanceof Array;\n            }\n            if (type === OBJECT && (o === undef || o === null)) {\n                return false;\n            }\n            return  (type === NULL && o === null) ||\n                (type === typeof o && o !== null) ||\n                (type === OBJECT && o === Object(o)) ||\n                (type === ARRAY && Array.isArray && Array.isArray(o)) ||\n                objectToString.call(o).slice(8, -1).toLowerCase() === type;\n        },\n\n        /*\\\n          * Raphael.clone\n          [ method ]\n          **\n          * Returns a recursively cloned version of an object.\n         \\*/\n        clone = R.clone = hasPrototypeBug ? function (obj) {\n                if (Object(obj) !== obj) {\n                    return obj;\n                }\n                // when obj is a function then new obj.constructor is equal to calling new Function()\n                // which uses dynamic evaluation, that violates CSP for 'unsafe-eval'\n                if (obj instanceof Function) {\n                    return obj;\n                }\n                var res = new obj.constructor;\n                for (var key in obj)\n                    if (key !== \"prototype\" && obj[HAS](key)) {\n                        res[key] = clone(obj[key]);\n                    }\n                return res;\n            } : function (obj) {\n                if (Object(obj) !== obj) {\n                    return obj;\n                }\n                // when obj is a function then new obj.constructor is equal to calling new Function()\n                // which uses dynamic evaluation, that violates CSP for 'unsafe-eval'\n                if (obj instanceof Function) {\n                    return obj;\n                }\n                var res = new obj.constructor;\n                for (var key in obj)\n                    if (obj[HAS](key)) {\n                        res[key] = clone(obj[key]);\n                    }\n                return res;\n            },\n        /**\n         * Function to manage the click\n         */\n        Node = _win.Node;\n        //Adding pollyfill for IE11\n        if (Node && !Node.prototype.contains) {\n            Node.prototype.contains = function(el){\n                while (el = el.parentNode) {\n                    if (el === this) return true;\n                }\n                return false;\n            }\n        }\n\n    R._g = g;\n    R.merge = merge;\n    R.extend = extend;\n    /*\n      * Raphael.createUUID\n      [ method ]\n      **\n      * Returns RFC4122, version 4 ID\n     */\n    R.createUUID = (function(uuidRegEx, uuidReplacer) {\n        return function() {\n            return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(uuidRegEx, uuidReplacer).toUpperCase();\n        };\n    })(/[xy]/g, function(c) {\n        var r = math.random() * 16 | 0,\n            v = c === \"x\" ? r : (r & 3 | 8);\n        return v.toString(16);\n    });\n\n    R._radial_gradient = /^x?r(?:\\(([^\\)]*?)\\))?/;\n    R._ISURL = /^url\\(['\"]?([^\\)]+?)['\"]?\\)$/i;\n\n    /*\n      * Raphael.getElementID\n      [ method ]\n      **\n      * Add 'rr-' prefix before created IDs\n     */\n    R.getElementID = function (id) {\n        return \"rr-\" + id;\n    };\n\n    // PriorityQueue Function Declaration\n    function PriorityQueue(comparator) {\n      this._comparator = comparator;\n      this._elements = [];\n    }\n\n    PriorityQueue.prototype.isEmpty = function() {\n      return this.size() === 0;\n    };\n\n    PriorityQueue.prototype.peek = function() {\n      if (this.isEmpty()) return null;\n\n      return this._elements[0];\n    };\n\n    PriorityQueue.prototype.deq = function() {\n      var first = this.peek();\n      var last = this._elements.pop();\n      var size = this.size();\n\n      if (size === 0) return first;\n\n      this._elements[0] = last;\n      var current = 0;\n\n      while (current < size) {\n        var largest = current;\n        var left = (2 * current) + 1;\n        var right = (2 * current) + 2;\n\n        if (left < size && this._compare(left, largest) >= 0) {\n          largest = left;\n        }\n\n        if (right < size && this._compare(right, largest) >= 0) {\n          largest = right;\n        }\n\n        if (largest === current) break;\n\n        this._swap(largest, current);\n        current = largest;\n      }\n\n      return first;\n    };\n\n    PriorityQueue.prototype.enq = function(element) {\n      var size = this._elements.push(element);\n      var current = size - 1;\n\n      while (current > 0) {\n        var parent = Math.floor((current - 1) / 2);\n\n        if (this._compare(current, parent) <= 0) break;\n\n        this._swap(parent, current);\n        current = parent;\n      }\n\n      return size;\n    };\n\n    PriorityQueue.prototype.size = function() {\n      return this._elements.length;\n    };\n\n    PriorityQueue.prototype._compare = function(a, b) {\n      return this._comparator(this._elements[a], this._elements[b]);\n    };\n\n    PriorityQueue.prototype._swap = function(a, b) {\n      var aux = this._elements[a];\n      this._elements[a] = this._elements[b];\n      this._elements[b] = aux;\n    };\n\n    /*\\\n     * Raphael.type\n     [ property (string) ]\n     **\n     * Can be SVG, VML or empty, depending on browser support.\n    \\*/\n    R.type = (win.ENABLE_RED_CANVAS && (win.CanvasRenderingContext2D || doc.createElement('canvas').getContext)) ? \"CANVAS\" :\n            (win.SVGAngle || doc.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\") ? \"SVG\" : \"VML\");\n\n    /*\\\n     * Raphael.svg\n     [ property (boolean) ]\n     **\n     * `true` if browser supports SVG.\n    \\*/\n    /*\\\n     * Raphael.vml\n     [ property (boolean) ]\n     **\n     * `true` if browser supports VML.\n    \\*/\n    R.svg = !((R.vml = R.type === \"VML\") || (R.canvas = R.type === \"CANVAS\"));\n\n    R._Paper = Paper;\n    R._id = 0;\n    R._oid = 0;\n\n    /*\\\n     * Raphael.rad\n     [ method ]\n     **\n     * Transform angle to radians\n     > Parameters\n     - deg (number) angle in degrees\n     = (number) angle in radians.\n    \\*/\n    R.rad = function (deg) {\n        return deg % 360 * deg2rad;\n    };\n\n    /*\\\n     * Raphael.deg\n     [ method ]\n     **\n     * Transform angle to degrees\n     > Parameters\n     - deg (number) angle in radians\n     = (number) angle in degrees.\n    \\*/\n    R.deg = function (rad) {\n        return rad * rad2deg % 360;\n    };\n\n    var toHex = function (color) {\n            if (R.vml) {\n                // http://dean.edwards.name/weblog/2009/10/convert-any-colour-value-to-hex-in-msie/\n                var trim = /^\\s+|\\s+$/g;\n                var bod;\n                try {\n                    var docum = new ActiveXObject(\"htmlfile\");\n                    docum.write(\"<body>\");\n                    docum.close();\n                    bod = docum.body;\n                } catch (e) {\n                    bod = createPopup().document.body;\n                }\n                var range = bod.createTextRange();\n                toHex = cacher(function(color) {\n                    try {\n                        bod.style.color = Str(color).replace(trim, E);\n                        var value = range.queryCommandValue(\"ForeColor\");\n                        value = ((value & 255) << 16) | (value & 65280) | ((value & 16711680) >>> 16);\n                        return \"#\" + (\"000000\" + value.toString(16)).slice(-6);\n                    } catch (e) {\n                        return NONE;\n                    }\n                });\n            } else {\n                var i = g.doc.createElement(\"i\");\n                i.title = \"Rapha\\xebl Colour Picker\";\n                i.style.display = NONE;\n                g.doc.body.appendChild(i);\n                toHex = cacher(function(color) {\n                    i.style.color = color;\n                    return g.doc.defaultView.getComputedStyle(i, E).getPropertyValue(\"color\");\n                });\n            }\n            return toHex(color);\n        },\n        hsbtoString = function() {\n            return \"hsb(\" + [this.h, this.s, this.b] + \")\";\n        },\n        hsltoString = function() {\n            return \"hsl(\" + [this.h, this.s, this.l] + \")\";\n        },\n        rgbtoString = function() {\n            return this.hex;\n        },\n        prepareRGB = function(r, g, b) {\n            if (g == null && is(r, OBJECT) && \"r\" in r && \"g\" in r && \"b\" in r) {\n                b = r.b;\n                g = r.g;\n                r = r.r;\n            }\n            if (g == null && is(r, STRING)) {\n                var clr = R.getRGB(r);\n                r = clr.r;\n                g = clr.g;\n                b = clr.b;\n            }\n            if (r > 1 || g > 1 || b > 1) {\n                r /= 255;\n                g /= 255;\n                b /= 255;\n            }\n\n            return [r, g, b];\n        },\n        packageRGB = function(r, g, b, o) {\n            var rgb = {\n                r: (r *= 255),\n                g: (g *= 255),\n                b: (b *= 255),\n                hex: R.rgb(r, g, b),\n                toString: rgbtoString\n            };\n            is(o, FINITE) && (rgb.opacity = o);\n            return rgb;\n        };\n\n    /*\\\n     * Raphael.color\n     [ method ]\n     **\n     * Parses the color string and returns object with all values for the given color.\n     > Parameters\n     - clr (string) color string in one of the supported formats (see @Raphael.getRGB)\n     = (object) Combined RGB & HSB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #,\n     o     error (boolean) `true` if string cant be parsed,\n     o     h (number) hue,\n     o     s (number) saturation,\n     o     v (number) value (brightness),\n     o     l (number) lightness\n     o }\n    \\*/\n    R.color = function(clr) {\n        var rgb;\n        if (R.is(clr, OBJECT) && \"h\" in clr && \"s\" in clr && \"b\" in clr) {\n            rgb = R.hsb2rgb(clr);\n            clr.r = rgb.r;\n            clr.g = rgb.g;\n            clr.b = rgb.b;\n            clr.hex = rgb.hex;\n        } else if (R.is(clr, OBJECT) && \"h\" in clr && \"s\" in clr && lStr in clr) {\n            rgb = R.hsl2rgb(clr);\n            clr.r = rgb.r;\n            clr.g = rgb.g;\n            clr.b = rgb.b;\n            clr.hex = rgb.hex;\n        } else {\n            if (R.is(clr, STRING)) {\n                clr = R.getRGB(clr);\n            }\n            if (R.is(clr, OBJECT) && \"r\" in clr && \"g\" in clr && \"b\" in clr) {\n                rgb = R.rgb2hsl(clr);\n                clr.h = rgb.h;\n                clr.s = rgb.s;\n                clr.l = rgb.l;\n                rgb = R.rgb2hsb(clr);\n                clr.v = rgb.b;\n            } else {\n                clr = {\n                    hex: NONE\n                };\n                clr.r = clr.g = clr.b = clr.h = clr.s = clr.v = clr.l = -1;\n            }\n        }\n        clr.toString = rgbtoString;\n        return clr;\n    };\n\n    /*\\\n     * Raphael.hsb2rgb\n     [ method ]\n     **\n     * Converts HSB values to RGB object.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - v (number) value or brightness\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #\n     o }\n    \\*/\n    R.hsb2rgb = function(h, s, v, o) {\n        if (this.is(h, OBJECT) && \"h\" in h && \"s\" in h && \"b\" in h) {\n            v = h.b;\n            s = h.s;\n            h = h.h;\n            o = h.o;\n        }\n        h *= 360;\n        var R, G, B, X, C;\n        h = (h % 360) / 60;\n        C = v * s;\n        X = C * (1 - abs(h % 2 - 1));\n        R = G = B = v - C;\n\n        h = ~~h;\n        R += [C, X, 0, 0, X, C][h];\n        G += [X, C, C, X, 0, 0][h];\n        B += [0, 0, X, C, C, X][h];\n        return packageRGB(R, G, B, o);\n    };\n\n    /*\\\n     * Raphael.hsl2rgb\n     [ method ]\n     **\n     * Converts HSL values to RGB object.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - l (number) luminosity\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #\n     o }\n    \\*/\n    R.hsl2rgb = function(h, s, l, o) {\n        if (this.is(h, OBJECT) && \"h\" in h && \"s\" in h && lStr in h) {\n            l = h.l;\n            s = h.s;\n            h = h.h;\n        }\n        if (h > 1 || s > 1 || l > 1) {\n            h /= 360;\n            s /= 100;\n            l /= 100;\n        }\n        h *= 360;\n        var R, G, B, X, C;\n        h = (h % 360) / 60;\n        C = 2 * s * (l < .5 ? l : 1 - l);\n        X = C * (1 - abs(h % 2 - 1));\n        R = G = B = l - C / 2;\n\n        h = ~~h;\n        R += [C, X, 0, 0, X, C][h];\n        G += [X, C, C, X, 0, 0][h];\n        B += [0, 0, X, C, C, X][h];\n        return packageRGB(R, G, B, o);\n    };\n\n    /*\\\n     * Raphael.rgb2hsb\n     [ method ]\n     **\n     * Converts RGB values to HSB object.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (object) HSB object in format:\n     o {\n     o     h (number) hue\n     o     s (number) saturation\n     o     b (number) brightness\n     o }\n    \\*/\n    R.rgb2hsb = function(r, g, b) {\n        b = prepareRGB(r, g, b);\n        r = b[0];\n        g = b[1];\n        b = b[2];\n\n        var H, S, V, C;\n        V = mmax(r, g, b);\n        C = V - mmin(r, g, b);\n        H = (C === 0 ? null :\n            V === r ? (g - b) / C :\n            V === g ? (b - r) / C + 2 :\n            (r - g) / C + 4\n            );\n        H = ((H + 360) % 6) * 60 / 360;\n        S = C === 0 ? 0 : C / V;\n        return {\n            h: H,\n            s: S,\n            b: V,\n            toString: hsbtoString\n        };\n    };\n\n    /*\\\n     * Raphael.rgb2hsl\n     [ method ]\n     **\n     * Converts RGB values to HSL object.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (object) HSL object in format:\n     o {\n     o     h (number) hue\n     o     s (number) saturation\n     o     l (number) luminosity\n     o }\n    \\*/\n    R.rgb2hsl = function(r, g, b) {\n        b = prepareRGB(r, g, b);\n        r = b[0];\n        g = b[1];\n        b = b[2];\n\n        var H, S, L, M, m, C;\n        M = mmax(r, g, b);\n        m = mmin(r, g, b);\n        C = M - m;\n        H = (C === 0 ? null :\n            M === r ? (g - b) / C :\n            M === g ? (b - r) / C + 2 :\n            (r - g) / C + 4);\n        H = ((H + 360) % 6) * 60 / 360;\n        L = (M + m) / 2;\n        S = (C === 0 ? 0 :\n            L < .5 ? C / (2 * L) :\n            C / (2 - 2 * L));\n        return {\n            h: H,\n            s: S,\n            l: L,\n            toString: hsltoString\n        };\n    };\n\n    R._path2string = function() {\n        return this.join(COMMA).replace(p2s, TOKEN1);\n    };\n\n    R._cacher = cacher;\n\n    function clrToString() {\n        return this.hex;\n    }\n\n    /*\\\n     * Raphael.getRGB\n     [ method ]\n     **\n     * Parses colour string as RGB object\n     > Parameters\n     - colour (string) colour string in one of formats:\n     # <ul>\n     #     <li>Colour name (<code>red</code>, <code>green</code>, <code>cornflowerblue</code>, etc)</li>\n     #     <li>#  shortened HTML colour: (<code>#000</code>, <code>#fc0</code>, etc)</li>\n     #     <li>#  full length HTML colour: (<code>#000000</code>, <code>#bd2300</code>)</li>\n     #     <li>rgb(, , )  red, green and blue channels values: (<code>rgb(200,&nbsp;100,&nbsp;0)</code>)</li>\n     #     <li>rgb(%, %, %)  same as above, but in %: (<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>)</li>\n     #     <li>hsb(, , )  hue, saturation and brightness values: (<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>)</li>\n     #     <li>hsb(%, %, %)  same as above, but in %</li>\n     #     <li>hsl(, , )  same as hsb</li>\n     #     <li>hsl(%, %, %)  same as hsb</li>\n     # </ul>\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue\n     o     hex (string) color in HTML/CSS format: #,\n     o     error (boolean) true if string cant be parsed\n     o }\n    \\*/\n    R.getRGB = cacher(function(colour) {\n        var opacity,\n            res,\n            red,\n            green,\n            blue,\n            t,\n            values,\n            rgb;\n\n        colour && is(colour, OBJECT) && \"opacity\" in colour &&\n            (opacity = colour.opacity);\n        if (!colour || !!((colour = Str(colour)).indexOf(\"-\") + 1)) {\n            return {\n                r: -1,\n                g: -1,\n                b: -1,\n                hex: NONE,\n                error: 1,\n                toString: clrToString\n            };\n        }\n        if (colour === NONE) {\n            return {\n                r: -1,\n                g: -1,\n                b: -1,\n                hex: NONE,\n                toString: clrToString\n            };\n        }\n        !(hsrg[HAS](colour.toLowerCase().substring(0, 2)) ||\n            colour.charAt() === \"#\") && (colour = toHex(colour));\n\n\n        if ((rgb = colour.match(colourRegExp))) {\n            if (rgb[2]) {\n                blue = toInt(rgb[2].substring(5), 16);\n                green = toInt(rgb[2].substring(3, 5), 16);\n                red = toInt(rgb[2].substring(1, 3), 16);\n            }\n            if (rgb[3]) {\n                blue = toInt((t = rgb[3].charAt(3)) + t, 16);\n                green = toInt((t = rgb[3].charAt(2)) + t, 16);\n                red = toInt((t = rgb[3].charAt(1)) + t, 16);\n            }\n            if (rgb[4]) {\n                values = rgb[4][SPLIT](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) === \"%\" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) === \"%\" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) === \"%\" && (blue *= 2.55);\n                rgb[1].toLowerCase().slice(0, 4) === \"rgba\" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) === \"%\" && (opacity /= 100);\n            }\n            if (rgb[5]) {\n                values = rgb[5][SPLIT](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) === \"%\" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) === \"%\" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) === \"%\" && (blue *= 2.55);\n                (values[0].slice(-3) === \"deg\" || values[0].slice(-1) === \"\\xb0\") && (red /= 360);\n                rgb[1].toLowerCase().slice(0, 4) === \"hsba\" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) === \"%\" && (opacity /= 100);\n                return R.hsb2rgb(red, green, blue, opacity);\n            }\n            if (rgb[6]) {\n                values = rgb[6][SPLIT](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) === \"%\" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) === \"%\" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) === \"%\" && (blue *= 2.55);\n                (values[0].slice(-3) === \"deg\" || values[0].slice(-1) === \"\\xb0\") && (red /= 360);\n                rgb[1].toLowerCase().slice(0, 4) === \"hsla\" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) === \"%\" && (opacity /= 100);\n                return R.hsl2rgb(red, green, blue, opacity);\n            }\n            rgb = {\n                r: red,\n                g: green,\n                b: blue,\n                toString: clrToString\n            };\n            rgb.hex = \"#\" + (16777216 | blue | (green << 8) | (red << 16)).toString(16).slice(1);\n            R.is(opacity, FINITE) && (rgb.opacity = opacity);\n            return rgb;\n        }\n        return {\n            r: -1,\n            g: -1,\n            b: -1,\n            hex: NONE,\n            error: 1,\n            toString: clrToString\n        };\n    }, R);\n\n    R.tintshade = cacher(function(colour, percent) {\n        var rgb = R.getRGB(colour),\n            tint,\n            offset = 255;\n\n        (percent < 0) && (percent *= -1, offset = 0);\n        (percent > 1) && (percent = 1);\n\n        tint = percent === 0 ? rgb : {\n            r: offset - (offset - rgb.r) * percent,\n            g: offset - (offset - rgb.g) * percent,\n            b: offset - (offset - rgb.b) * percent,\n            toString: clrToString\n        };\n        tint.hex = R.rgb(tint.r, tint.g, tint.b);\n        rgb.error && (tint.error = rgb.error);\n\n        if (\"opacity\" in rgb) {\n            tint.rgba = 'rgba(' + [tint.r, tint.g, tint.b, rgb.opacity].join(',') + ')';\n            tint.opacity = rgb.opacity;\n        }\n        else {\n            tint.rgba = 'rgb(' + [tint.r, tint.g, tint.b].join(',') + ')';\n        }\n        return tint;\n    }, R);\n\n    /*\\\n     * Raphael.rgb\n     [ method ]\n     **\n     * Converts RGB values to hex representation of the colour.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (string) hex representation of the colour.\n    \\*/\n    R.rgb = cacher(function(r, g, b) {\n        return \"#\" + (16777216 | b | (g << 8) | (r << 16)).toString(16).slice(1);\n    });\n\n    // http://schepers.cc/getting-to-the-point\n    function catmullRom2bezier(crp, z) {\n        var d = [];\n        for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {\n            var p = [\n            {\n                x: +crp[i - 2],\n                y: +crp[i - 1]\n            },\n            {\n                x: +crp[i],\n                y: +crp[i + 1]\n            },\n            {\n                x: +crp[i + 2],\n                y: +crp[i + 3]\n            },\n            {\n                x: +crp[i + 4],\n                y: +crp[i + 5]\n            }\n            ];\n            if (z) {\n                if (!i) {\n                    p[0] = {\n                        x: +crp[iLen - 2],\n                        y: +crp[iLen - 1]\n                    };\n                } else if (iLen - 4 === i) {\n                    p[3] = {\n                        x: +crp[0],\n                        y: +crp[1]\n                    };\n                } else if (iLen - 2 === i) {\n                    p[2] = {\n                        x: +crp[0],\n                        y: +crp[1]\n                    };\n                    p[3] = {\n                        x: +crp[2],\n                        y: +crp[3]\n                    };\n                }\n            } else {\n                if (iLen - 4 === i) {\n                    p[3] = p[2];\n                } else if (!i) {\n                    p[0] = {\n                        x: +crp[i],\n                        y: +crp[i + 1]\n                    };\n                }\n            }\n            d.push([\"C\",\n                (-p[0].x + 6 * p[1].x + p[2].x) / 6,\n                (-p[0].y + 6 * p[1].y + p[2].y) / 6,\n                (p[1].x + 6 * p[2].x - p[3].x) / 6,\n                (p[1].y + 6 * p[2].y - p[3].y) / 6,\n                p[2].x,\n                p[2].y\n                ]);\n        }\n\n        return d;\n    }\n\n    R.sanitizePath = function (pathArg) {\n        var pathStr;\n        pathStr = pathArg.join ? pathArg.join(COMMA) : pathArg;\n        if (rCheckRegex.test(pathStr)) {\n            pathStr = R._pathToAbsolute(pathStr);\n        } else {\n            pathStr = pathStr.replace(p2s, TOKEN1);\n        }\n        return pathStr;\n    };\n\n    /*\\\n     * Raphael.parsePathString\n     [ method ]\n     **\n     * Utility method\n     **\n     * Parses given path string into an array of arrays of path segments.\n     > Parameters\n     - pathString (string|array) path string or array of segments (in the last case it will be returned straight away)\n     = (array) array of segments.\n    \\*/\n    R.parsePathString = function(pathString) {\n        if (!pathString  || !pathString.length) {\n            return null;\n        }\n        var pth = paths(pathString);\n        if (pth.arr) {\n            return pathClone(pth.arr);\n        }\n        __data = undef;\n        if (R.is(pathString, ARRAY)) {\n            pathString = Str(pathString)\n                          .replace(/,?([A-Z]),?/g, ',$1,')\n                          .replace(/(^,?)|(,?$)/g, '')\n                          .replace(/,,?/g,',')\n                          .split(',');\n            if(R.is(pathString[0], ARRAY)) { // rough assumption\n             __data = pathClone(pathString);\n            } else {\n                var i, subPathArr = [], l = pathString.length, pathI, noOfDataPoints;\n                __data = [];\n                for (i = 0; i < l; i += 1) {\n                    // if any path command is encountered\n                    if (charRegex.test(pathString[i])) {\n                        // if any previous path command was parsed with its allowed set of points then push\n                        // that parsed path sub-array to final path array.\n                        subPathArr.length && __data.push(subPathArr);\n                        // update the path command and path sub-array.\n                        pathI = pathString[i];\n                        subPathArr = [pathI];\n                        // no of points that will be parsed for the path copmmand.\n                        noOfDataPoints = paramCounts[pathI.toLowerCase()];\n                    } else if(noOfDataPoints){ // push all the allowed data points to the subarray\n                        subPathArr.push(+pathString[i]);\n                        noOfDataPoints--;\n                    } else if(pathString[i].length){\n                        // push the last parsed path sub-array to final path array.\n                        __data.push(subPathArr);\n                        // create a new sub array with the last known path command\n                        subPathArr = [pathI].concat(+pathString[i]);\n                        noOfDataPoints = paramCounts[pathI.toLowerCase()] - 1;\n                    }\n                }\n                __data.push(subPathArr);\n            }\n        }\n        if (!__data || !__data.length) {\n            __data = [];\n            Str(pathString).replace(pathCommand, pathStringBreakFn);\n        }\n        __data.toString = R._path2string;\n        pth.arr = __data;\n        return pth.arr;\n    }\n\n    /*\\\n     * Raphael.parseTransformString\n     [ method ]\n     **\n     * Utility method\n     **\n     * Parses given path string into an array of transformations.\n     > Parameters\n     - TString (string|array) transform string or array of transformations (in the last case it will be returned straight away)\n     = (array) array of transformations.\n    \\*/\n    R.parseTransformString = cacher(function(TString) {\n        if (!TString) {\n            return null;\n        }\n        var paramCounts = {\n            r: 3,\n            s: 4,\n            t: 2,\n            m: 6\n        },\n        data = [];\n        if (R.is(TString, ARRAY) && R.is(TString[0], ARRAY)) { // rough assumption\n            data = pathClone(TString);\n        }\n        if (!data.length) {\n            Str(TString).replace(tCommand, function(a, b, c) {\n                var params = [],\n                name = lowerCase.call(b);\n                c.replace(pathValues, function(a, b) {\n                    b && params.push(+b);\n                });\n                data.push([b][CONCAT](params));\n            });\n        }\n        data.toString = R._path2string;\n        return data;\n    });\n    // PATHS\n    var _pathCache = {},\n    paths = cacher(function() {\n        // var p = paths.ps = paths.ps || {};\n        // if (p[ps]) {\n        //     p[ps].sleep = 100;\n        // } else {\n        //     p[ps] = {\n        //         sleep: 100\n        //     };\n        // }\n        // setTimeout(function() {\n        //     for (var key in p)\n        //         if (p[HAS](key) && key != ps) {\n        //             p[key].sleep--;\n        //             !p[key].sleep && delete p[key];\n        //         }\n        // });\n        return {};\n    }, undef, undef, undef, 500, _pathCache, true);\n\n    /*\\\n     * Raphael.findDotsAtSegment\n     [ method ]\n     **\n     * Utility method\n     **\n     * Find dot coordinates on the given cubic bezier curve at the given t.\n     > Parameters\n     - p1x (number) x of the first point of the curve\n     - p1y (number) y of the first point of the curve\n     - c1x (number) x of the first anchor of the curve\n     - c1y (number) y of the first anchor of the curve\n     - c2x (number) x of the second anchor of the curve\n     - c2y (number) y of the second anchor of the curve\n     - p2x (number) x of the second point of the curve\n     - p2y (number) y of the second point of the curve\n     - t (number) position on the curve (0..1)\n     = (object) point information in format:\n     o {\n     o     x: (number) x coordinate of the point\n     o     y: (number) y coordinate of the point\n     o     m: {\n     o         x: (number) x coordinate of the left anchor\n     o         y: (number) y coordinate of the left anchor\n     o     }\n     o     n: {\n     o         x: (number) x coordinate of the right anchor\n     o         y: (number) y coordinate of the right anchor\n     o     }\n     o     start: {\n     o         x: (number) x coordinate of the start of the curve\n     o         y: (number) y coordinate of the start of the curve\n     o     }\n     o     end: {\n     o         x: (number) x coordinate of the end of the curve\n     o         y: (number) y coordinate of the end of the curve\n     o     }\n     o     alpha: (number) angle of the curve derivative at the point\n     o }\n    \\*/\n    R.findDotsAtSegment = function(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n        var t1 = 1 - t,\n        t13 = pow(t1, 3),\n        t12 = pow(t1, 2),\n        t2 = t * t,\n        t3 = t2 * t,\n        x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x,\n        y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y,\n        mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x),\n        my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y),\n        nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x),\n        ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y),\n        ax = t1 * p1x + t * c1x,\n        ay = t1 * p1y + t * c1y,\n        cx = t1 * c2x + t * p2x,\n        cy = t1 * c2y + t * p2y,\n        alpha = (90 - math.atan2(mx - nx, my - ny) * 180 / PI);\n        (mx > nx || my < ny) && (alpha += 180);\n        return {\n            x: x,\n            y: y,\n            m: {\n                x: mx,\n                y: my\n            },\n            n: {\n                x: nx,\n                y: ny\n            },\n            start: {\n                x: ax,\n                y: ay\n            },\n            end: {\n                x: cx,\n                y: cy\n            },\n            alpha: alpha\n        };\n    };\n\n    function base3(t, p1, p2, p3, p4) {\n        var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4,\n        t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;\n        return t * t2 - 3 * p1 + 3 * p2;\n    }\n\n    function bezlen(x1, y1, x2, y2, x3, y3, x4, y4, z) {\n        if (z == null) {\n            z = 1;\n        }\n        z = z > 1 ? 1 : z < 0 ? 0 : z;\n        var z2 = z / 2,\n        n = 12,\n        Tvalues = [-0.1252, 0.1252, -0.3678, 0.3678, -0.5873, 0.5873, -0.7699, 0.7699, -0.9041, 0.9041, -0.9816, 0.9816],\n        Cvalues = [0.2491, 0.2491, 0.2335, 0.2335, 0.2032, 0.2032, 0.1601, 0.1601, 0.1069, 0.1069, 0.0472, 0.0472],\n        sum = 0;\n        for (var i = 0; i < n; i++) {\n            var ct = z2 * Tvalues[i] + z2,\n            xbase = base3(ct, x1, x2, x3, x4),\n            ybase = base3(ct, y1, y2, y3, y4),\n            comb = xbase * xbase + ybase * ybase;\n            sum += Cvalues[i] * mathSqrt(comb);\n        }\n        return z2 * sum;\n    }\n\n    function getTatLen(x1, y1, x2, y2, x3, y3, x4, y4, ll) {\n        if (ll < 0 || bezlen(x1, y1, x2, y2, x3, y3, x4, y4) < ll) {\n            return;\n        }\n        var t = 1,\n        step = t / 2,\n        t2 = t - step,\n        l,\n        e = .01;\n        l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\n        while (abs(l - ll) > e) {\n            step /= 2;\n            t2 += (l < ll ? 1 : -1) * step;\n            l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\n        }\n        return t2;\n    }\n\n    function intersect(x1, y1, x2, y2, x3, y3, x4, y4) {\n        if (\n            mmax(x1, x2) < mmin(x3, x4) ||\n            mmin(x1, x2) > mmax(x3, x4) ||\n            mmax(y1, y2) < mmin(y3, y4) ||\n            mmin(y1, y2) > mmax(y3, y4)\n            ) {\n            return;\n        }\n        var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),\n        ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),\n        denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\n        if (!denominator) {\n            return;\n        }\n        var px = nx / denominator,\n        py = ny / denominator,\n        px2 = +px.toFixed(2),\n        py2 = + py.toFixed(2);\n        if (\n            px2 < +mmin(x1, x2).toFixed(2) ||\n            px2 > +mmax(x1, x2).toFixed(2) ||\n            px2 < +mmin(x3, x4).toFixed(2) ||\n            px2 > +mmax(x3, x4).toFixed(2) ||\n            py2 < +mmin(y1, y2).toFixed(2) ||\n            py2 > +mmax(y1, y2).toFixed(2) ||\n            py2 < +mmin(y3, y4).toFixed(2) ||\n            py2 > +mmax(y3, y4).toFixed(2)\n            ) {\n            return;\n        }\n        return {\n            x: px,\n            y: py\n        };\n    }\n\n    R._removedFactory = function(methodname) {\n        return function() {\n            eve(\"raphael.log\", null, \"Rapha\\xebl: you are calling to method \\u201c\" + methodname + \"\\u201d of removed object\", methodname);\n        };\n    };\n\n    /*\\\n     * Raphael.pathBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Return bounding box of a given path\n     > Parameters\n     - path (string) path string\n     = (object) bounding box\n     o {\n     o     x: (number) x coordinate of the left top point of the box\n     o     y: (number) y coordinate of the left top point of the box\n     o     x2: (number) x coordinate of the right bottom point of the box\n     o     y2: (number) y coordinate of the right bottom point of the box\n     o     width: (number) width of the box\n     o     height: (number) height of the box\n     o     cx: (number) x coordinate of the center of the box\n     o     cy: (number) y coordinate of the center of the box\n     o }\n    \\*/\n    var pathDimensions = R.pathBBox = function(path) {\n        var pth = paths(path);\n        if (!path) {\n            return {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n                x2: 0,\n                y2: 0\n            };\n        }\n        path = path2curve(path);\n        var x = 0,\n        y = 0,\n        X = [],\n        Y = [],\n        p;\n        for (var i = 0, ii = path.length; i < ii; i++) {\n            p = path[i];\n            if (p[0] === strM) {\n                x = p[1];\n                y = p[2];\n                X.push(x);\n                Y.push(y);\n            } else {\n                var dim = curveDim(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n                X = X[CONCAT](dim.min.x, dim.max.x);\n                Y = Y[CONCAT](dim.min.y, dim.max.y);\n                x = p[5];\n                y = p[6];\n            }\n        }\n        var xmin = mmin[APPLY](0, X),\n        ymin = mmin[APPLY](0, Y),\n        xmax = mmax[APPLY](0, X),\n        ymax = mmax[APPLY](0, Y),\n        bb = {\n            x: xmin,\n            y: ymin,\n            x2: xmax,\n            y2: ymax,\n            width: xmax - xmin,\n            height: ymax - ymin\n        };\n        pth.bbox = clone(bb);\n        return bb;\n    },\n    pathClone = function(pathArray) {\n        var res = clone(pathArray);\n        res.toString = R._path2string;\n        return res;\n    },\n    pathToAbsolute = R._pathToAbsolute = function(pathArray) {\n        var pth = paths(pathArray), res;\n        if (!pth.abs) {\n            if (!R.is(pathArray, ARRAY) || !R.is(pathArray && pathArray[0], ARRAY)) { // rough assumption\n                pathArray = R.parsePathString(pathArray);\n            }\n            if (!pathArray || !pathArray.length) {\n                res = [[strM, 0, 0]];\n                res.toString = R._path2string;\n                return res;\n            }\n            var x = 0,\n                y = 0,\n                mx = 0,\n                my = 0,\n                start = 0;\n            res = [];\n            if (pathArray[0][0] === strM) {\n                x = +pathArray[0][1];\n                y = +pathArray[0][2];\n                mx = x;\n                my = y;\n                start++;\n                res[0] = [strM, x, y];\n            }\n            var crz = pathArray.length === 3 && pathArray[0][0] === strM && pathArray[1][0].toUpperCase() === \"R\" && pathArray[2][0].toUpperCase() === \"Z\";\n            for (var r, pa, i = start, ii = pathArray.length; i < ii; i++) {\n                res.push(r = []);\n                pa = pathArray[i];\n                if (pa[0] != upperCase.call(pa[0])) {\n                    r[0] = upperCase.call(pa[0]);\n                    switch (r[0]) {\n                        case \"A\":\n                            r[1] = pa[1];\n                            r[2] = pa[2];\n                            r[3] = pa[3];\n                            r[4] = pa[4];\n                            r[5] = pa[5];\n                            r[6] = +(pa[6] + x);\n                            r[7] = +(pa[7] + y);\n                            break;\n                        case \"V\":\n                            r[1] = +pa[1] + y;\n                            break;\n                        case \"H\":\n                            r[1] = +pa[1] + x;\n                            break;\n                        case \"R\":\n                            var dots = [x, y][CONCAT](pa.slice(1));\n                            for (var j = 2, jj = dots.length; j < jj; j++) {\n                                dots[j] = +dots[j] + x;\n                                dots[++j] = +dots[j] + y;\n                            }\n                            res.pop();\n                            res = res[CONCAT](catmullRom2bezier(dots, crz));\n                            break;\n                        case \"M\":\n                            mx = +pa[1] + x;\n                            my = +pa[2] + y;\n                        default:\n                            for (j = 1, jj = pa.length; j < jj; j++) {\n                                r[j] = +pa[j] + ((j % 2) ? x : y);\n                                (j % 2) ? (x = r[j]) : (y = r[j]);\n                            }\n                    }\n                } else if (pa[0] === \"R\") {\n                    dots = [x, y][CONCAT](pa.slice(1));\n                    res.pop();\n                    res = res[CONCAT](catmullRom2bezier(dots, crz));\n                    r = [\"R\"][CONCAT](pa.slice(-2));\n                } else {\n                    for (var k = 0, kk = pa.length; k < kk; k++) {\n                        r[k] = pa[k];\n                    }\n                }\n                switch (r[0]) {\n                    case \"Z\":\n                        x = mx;\n                        y = my;\n                        break;\n                    case \"H\":\n                        x = r[1];\n                        break;\n                    case \"V\":\n                        y = r[1];\n                        break;\n                    case \"M\":\n                        mx = r[r.length - 2];\n                        my = r[r.length - 1];\n                    default:\n                        x = r[r.length - 2];\n                        y = r[r.length - 1];\n                }\n            }\n            res.toString = R._path2string;\n            pth.abs = res;\n        }\n        return pathClone(pth.abs);\n    },\n    l2c = function(x1, y1, x2, y2) {\n        return [x1, y1, x2, y2, x2, y2];\n    },\n    q2c = function(x1, y1, ax, ay, x2, y2) {\n        var _13 = 1 / 3,\n        _23 = 2 / 3;\n        return [\n        _13 * x1 + _23 * ax,\n        _13 * y1 + _23 * ay,\n        _13 * x2 + _23 * ax,\n        _13 * y2 + _23 * ay,\n        x2,\n        y2\n        ];\n    },\n    a2c = function(x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n        sweep_flag = sweep_flag && +sweep_flag;\n        large_arc_flag = large_arc_flag && +large_arc_flag;\n        // for more information of where this math came from visit:\n        // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n        // If rx = 0 or ry = 0 then this arc is treated as a straight line segment (a \"lineto\") joining the endpoints\n        if (rx === 0 || ry === 0){\n            return l2c(x1, y1, x2, y2);\n        }\n        var _120 = PI * 120 / 180,\n        rad = deg2rad * (+angle || 0),\n        res = [],\n        xy,\n        rotate = cacher(function(x, y, rad) {\n            var X = x * mathCos(rad) - y * mathSin(rad),\n            Y = x * mathSin(rad) + y * mathCos(rad);\n            return {\n                x: X,\n                y: Y\n            };\n        });\n        if (!recursive) {\n            xy = rotate(x1, y1, -rad);\n            x1 = xy.x;\n            y1 = xy.y;\n            xy = rotate(x2, y2, -rad);\n            x2 = xy.x;\n            y2 = xy.y;\n            var cos = mathCos(deg2rad * angle),\n            sin = mathSin(deg2rad * angle),\n            x = (x1 - x2) / 2,\n            y = (y1 - y2) / 2;\n            var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n            if (h > 1) {\n                h = mathSqrt(h);\n                rx = h * rx;\n                ry = h * ry;\n            }\n            var rx2 = rx * rx,\n            ry2 = ry * ry,\n            k = (large_arc_flag === sweep_flag ? -1 : 1) *\n            mathSqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),\n            cx = k * rx * y / ry + (x1 + x2) / 2,\n            cy = k * -ry * x / rx + (y1 + y2) / 2,\n            f1 = math.asin(((y1 - cy) / ry).toFixed(9)),\n            f2 = math.asin(((y2 - cy) / ry).toFixed(9));\n\n            f1 = x1 < cx ? PI - f1 : f1;\n            f2 = x2 < cx ? PI - f2 : f2;\n            f1 < 0 && (f1 = PI * 2 + f1);\n            f2 < 0 && (f2 = PI * 2 + f2);\n            if (sweep_flag && f1 > f2) {\n                f1 = f1 - PI * 2;\n            }\n            if (!sweep_flag && f2 > f1) {\n                f2 = f2 - PI * 2;\n            }\n        } else {\n            f1 = recursive[0];\n            f2 = recursive[1];\n            cx = recursive[2];\n            cy = recursive[3];\n        }\n        var df = f2 - f1;\n        if (abs(df) > _120) {\n            var f2old = f2,\n            x2old = x2,\n            y2old = y2;\n            f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\n            x2 = cx + rx * mathCos(f2);\n            y2 = cy + ry * mathSin(f2);\n            res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\n        }\n        df = f2 - f1;\n        var c1 = mathCos(f1),\n        s1 = mathSin(f1),\n        c2 = mathCos(f2),\n        s2 = mathSin(f2),\n        t = math.tan(df / 4),\n        hx = 4 / 3 * rx * t,\n        hy = 4 / 3 * ry * t,\n        m1 = [x1, y1],\n        m2 = [x1 + hx * s1, y1 - hy * c1],\n        m3 = [x2 + hx * s2, y2 - hy * c2],\n        m4 = [x2, y2];\n        m2[0] = 2 * m1[0] - m2[0];\n        m2[1] = 2 * m1[1] - m2[1];\n        if (recursive) {\n            return [m2, m3, m4][CONCAT](res);\n        } else {\n            res = [m2, m3, m4][CONCAT](res).join()[SPLIT](COMMA);\n            var newres = [];\n            for (var i = 0, ii = res.length; i < ii; i++) {\n                newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n            }\n            return newres;\n        }\n    },\n    findDotAtSegment = function(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n        var t1 = 1 - t;\n        return {\n            x: pow(t1, 3) * p1x + pow(t1, 2) * 3 * t * c1x + t1 * 3 * t * t * c2x + pow(t, 3) * p2x,\n            y: pow(t1, 3) * p1y + pow(t1, 2) * 3 * t * c1y + t1 * 3 * t * t * c2y + pow(t, 3) * p2y\n        };\n    },\n    curveDim = cacher(function(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n        var a = (c2x - 2 * c1x + p1x) - (p2x - 2 * c2x + c1x),\n        b = 2 * (c1x - p1x) - 2 * (c2x - c1x),\n        c = p1x - c1x,\n        t1 = (-b + mathSqrt(b * b - 4 * a * c)) / 2 / a,\n        t2 = (-b - mathSqrt(b * b - 4 * a * c)) / 2 / a,\n        y = [p1y, p2y],\n        x = [p1x, p2x],\n        dot;\n        abs(t1) > \"1e12\" && (t1 = .5);\n        abs(t2) > \"1e12\" && (t2 = .5);\n        if (t1 > 0 && t1 < 1) {\n            dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\n            x.push(dot.x);\n            y.push(dot.y);\n        }\n        if (t2 > 0 && t2 < 1) {\n            dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\n            x.push(dot.x);\n            y.push(dot.y);\n        }\n        a = (c2y - 2 * c1y + p1y) - (p2y - 2 * c2y + c1y);\n        b = 2 * (c1y - p1y) - 2 * (c2y - c1y);\n        c = p1y - c1y;\n        t1 = (-b + mathSqrt(b * b - 4 * a * c)) / 2 / a;\n        t2 = (-b - mathSqrt(b * b - 4 * a * c)) / 2 / a;\n        abs(t1) > \"1e12\" && (t1 = .5);\n        abs(t2) > \"1e12\" && (t2 = .5);\n        if (t1 > 0 && t1 < 1) {\n            dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\n            x.push(dot.x);\n            y.push(dot.y);\n        }\n        if (t2 > 0 && t2 < 1) {\n            dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\n            x.push(dot.x);\n            y.push(dot.y);\n        }\n        return {\n            min: {\n                x: mmin[APPLY](0, x),\n                y: mmin[APPLY](0, y)\n            },\n            max: {\n                x: mmax[APPLY](0, x),\n                y: mmax[APPLY](0, y)\n            }\n        };\n    }),\n    path2curve = R._path2curve = cacher(function(path, path2) {\n        var pth = !path2 && paths(path);\n        if (!path2 && pth.curve) {\n            return pathClone(pth.curve);\n        }\n        var p = pathToAbsolute(path),\n        p2 = path2 && pathToAbsolute(path2),\n        attrs = {\n            x: 0,\n            y: 0,\n            bx: 0,\n            by: 0,\n            X: 0,\n            Y: 0,\n            qx: null,\n            qy: null\n        },\n        attrs2 = {\n            x: 0,\n            y: 0,\n            bx: 0,\n            by: 0,\n            X: 0,\n            Y: 0,\n            qx: null,\n            qy: null\n        },\n        processPath = function(path, d) {\n            var nx, ny;\n            if (!path) {\n                return [\"C\", d.x, d.y, d.x, d.y, d.x, d.y];\n            }\n            !(path[0] in {\n                T: 1,\n                Q: 1\n            }) && (d.qx = d.qy = null);\n            switch (path[0]) {\n                case \"M\":\n                    d.X = path[1];\n                    d.Y = path[2];\n                    break;\n                case \"A\":\n                    path = [\"C\"][CONCAT](a2c[APPLY](0, [d.x, d.y][CONCAT](path.slice(1))));\n                    break;\n                case \"S\":\n                    nx = d.x + (d.x - (d.bx || d.x));\n                    ny = d.y + (d.y - (d.by || d.y));\n                    path = [\"C\", nx, ny][CONCAT](path.slice(1));\n                    break;\n                case \"T\":\n                    d.qx = d.x + (d.x - (d.qx || d.x));\n                    d.qy = d.y + (d.y - (d.qy || d.y));\n                    path = [\"C\"][CONCAT](q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n                    break;\n                case \"Q\":\n                    d.qx = path[1];\n                    d.qy = path[2];\n                    path = [\"C\"][CONCAT](q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n                    break;\n                case \"L\":\n                    path = [\"C\"][CONCAT](l2c(d.x, d.y, path[1], path[2]));\n                    break;\n                case \"H\":\n                    path = [\"C\"][CONCAT](l2c(d.x, d.y, path[1], d.y));\n                    break;\n                case \"V\":\n                    path = [\"C\"][CONCAT](l2c(d.x, d.y, d.x, path[1]));\n                    break;\n                case \"Z\":\n                    path = [\"C\"][CONCAT](l2c(d.x, d.y, d.X, d.Y));\n                    break;\n            }\n            return path;\n        },\n        fixArc = function(pp, i) {\n            if (pp[i].length > 7) {\n                pp[i].shift();\n                var pi = pp[i];\n                while (pi.length) {\n                    pp.splice(i++, 0, [\"C\"][CONCAT](pi.splice(0, 6)));\n                }\n                pp.splice(i, 1);\n                ii = mmax(p.length, p2 && p2.length || 0);\n            }\n        },\n        fixM = function(path1, path2, a1, a2, i) {\n            if (path1 && path2 && path1[i][0] === strM && path2[i][0] != strM && !i) {\n                path2.splice(i, 0, [strM, a2.x, a2.y]);\n                a1.bx = 0;\n                a1.by = 0;\n                a1.x = path1[i][1];\n                a1.y = path1[i][2];\n                ii = mmax(p.length, p2 && p2.length || 0);\n            }\n        };\n        for (var i = 0, ii = mmax(p.length, p2 && p2.length || 0); i < ii; i++) {\n            p[i] = processPath(p[i], attrs);\n            fixArc(p, i);\n            p2 && (p2[i] = processPath(p2[i], attrs2));\n            p2 && fixArc(p2, i);\n            fixM(p, p2, attrs, attrs2, i);\n            fixM(p2, p, attrs2, attrs, i);\n            var seg = p[i],\n            seg2 = p2 && p2[i],\n            seglen = seg.length,\n            seg2len = p2 && seg2.length;\n            attrs.x = seg[seglen - 2];\n            attrs.y = seg[seglen - 1];\n            attrs.bx = toFloat(seg[seglen - 4]) || attrs.x;\n            attrs.by = toFloat(seg[seglen - 3]) || attrs.y;\n            attrs2.bx = p2 && (toFloat(seg2[seg2len - 4]) || attrs2.x);\n            attrs2.by = p2 && (toFloat(seg2[seg2len - 3]) || attrs2.y);\n            attrs2.x = p2 && seg2[seg2len - 2];\n            attrs2.y = p2 && seg2[seg2len - 1];\n        }\n        if (!p2) {\n            pth.curve = pathClone(p);\n        }\n        return p2 ? [p, p2] : p;\n    }, null, pathClone),\n    parseDots = R._parseDots = cacher(function(gradient) {\n        var dots = [];\n        for (var i = 0, ii = gradient.length; i < ii; i++) {\n            var dot = {},\n            par = gradient[i].match(/^([^:]*):?([\\d\\.]*)/);\n            dot.color = R.getRGB(par[1]);\n            if (dot.color.error) {\n                return null;\n            }\n            //store opacity information\n            dot.opacity = dot.color.opacity;\n            dot.color = dot.color.hex;\n            par[2] && (dot.offset = par[2] + \"%\");\n            dots.push(dot);\n        }\n        for (i = 1, ii = dots.length - 1; i < ii; i++) {\n            if (!dots[i].offset) {\n                var start = toFloat(dots[i - 1].offset || 0),\n                end = 0;\n                for (var j = i + 1; j < ii; j++) {\n                    if (dots[j].offset) {\n                        end = dots[j].offset;\n                        break;\n                    }\n                }\n                if (!end) {\n                    end = 100;\n                    j = ii;\n                }\n                end = toFloat(end);\n                var d = (end - start) / (j - i + 1);\n                for (; i < j; i++) {\n                    start += d;\n                    dots[i].offset = start + \"%\";\n                }\n            }\n        }\n        return dots;\n    }),\n    tear = R._tear = function(el, paper) {\n        el === paper.top && (paper.top = el.prev);\n        el === paper.bottom && (paper.bottom = el.next);\n        el.next && (el.next.prev = el.prev);\n        el.prev && (el.prev.next = el.next);\n    },\n    tofront = R._tofront = function(el, paper) {\n        if (paper.top === el) {\n            return false;\n        }\n        tear(el, paper);\n        el.next = null;\n        el.prev = paper.top;\n        paper.top.next = el;\n        paper.top = el;\n        return true;\n    },\n    toback = R._toback = function(el, paper) {\n        if (paper.bottom === el) {\n            return false;\n        }\n        tear(el, paper);\n        el.next = paper.bottom;\n        el.prev = null;\n        paper.bottom.prev = el;\n        paper.bottom = el;\n        return true;\n    },\n    insertafter = R._insertafter = function(el, el2, paper, paper2) {\n        tear(el, paper);\n        el.parent = paper2;\n        el2 === paper2.top && (paper2.top = el);\n        el2.next && (el2.next.prev = el);\n        el.next = el2.next;\n        el.prev = el2;\n        el2.next = el;\n    },\n    insertbefore = R._insertbefore = function(el, el2, paper, paper2) {\n        tear(el, paper);\n        el.parent = paper2;\n        el2 === paper2.bottom && (paper2.bottom = el);\n        el2.prev && (el2.prev.next = el);\n        el.prev = el2.prev;\n        el2.prev = el;\n        el.next = el2;\n    },\n\n    extractTransform = R._extractTransform = function(el, tstr) {\n        if (tstr == null) {\n            return el._.transform;\n        }\n        tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, el._.transform || E);\n        var tdata = R.parseTransformString(tstr),\n        deg = 0,\n        dx = 0,\n        dy = 0,\n        sx = 1,\n        sy = 1,\n        _ = el._,\n        m = new Matrix;\n        _.transform = tdata || [];\n        if (tdata) {\n            for (var i = 0, ii = tdata.length; i < ii; i++) {\n                var t = tdata[i],\n                tlen = t.length,\n                command = Str(t[0]).toLowerCase(),\n                absolute = t[0] != command,\n                inver = absolute ? m.invert() : 0,\n                x1,\n                y1,\n                x2,\n                y2,\n                bb;\n                if (command === \"t\" && tlen === 3) {\n                    if (absolute) {\n                        x1 = inver.x(0, 0);\n                        y1 = inver.y(0, 0);\n                        x2 = inver.x(t[1], t[2]);\n                        y2 = inver.y(t[1], t[2]);\n                        m.translate(x2 - x1, y2 - y1);\n                    } else {\n                        m.translate(t[1], t[2]);\n                    }\n                } else if (command === \"r\") {\n                    if (tlen === 2) {\n                        bb = _.bb || (_.bb = el.getBBox(1));\n                        m.rotate(t[1], bb.x + bb.width / 2, bb.y + bb.height / 2);\n                        deg += t[1];\n                    } else if (tlen === 4) {\n                        if (absolute) {\n                            x2 = inver.x(t[2], t[3]);\n                            y2 = inver.y(t[2], t[3]);\n                            m.rotate(t[1], x2, y2);\n                        } else {\n                            m.rotate(t[1], t[2], t[3]);\n                        }\n                        deg += t[1];\n                    }\n                } else if (command === \"s\") {\n                    if (tlen === 2 || tlen === 3) {\n                        bb = _.bb || (_.bb = el.getBBox(1));\n                        m.scale(t[1], t[tlen - 1], bb.x + bb.width / 2, bb.y + bb.height / 2);\n                        sx *= t[1];\n                        sy *= t[tlen - 1];\n                    } else if (tlen === 5) {\n                        if (absolute) {\n                            x2 = inver.x(t[3], t[4]);\n                            y2 = inver.y(t[3], t[4]);\n                            m.scale(t[1], t[2], x2, y2);\n                        } else {\n                            m.scale(t[1], t[2], t[3], t[4]);\n                        }\n                        sx *= t[1];\n                        sy *= t[2];\n                    }\n                } else if (command === mStr && tlen === 7) {\n                    m.add(t[1], t[2], t[3], t[4], t[5], t[6]);\n                }\n                _.dirtyT = 1;\n                el.matrix = m;\n            }\n        }\n\n        /*\\\n         * Element.matrix\n         [ property (object) ]\n         **\n         * Keeps @Matrix object, which represents element transformation\n        \\*/\n        el.matrix = m;\n\n        _.sx = sx;\n        _.sy = sy;\n        _.deg = deg;\n        _.dx = dx = m.e;\n        _.dy = dy = m.f;\n\n        if (sx === 1 && sy === 1 && !deg && _.bbox) {\n            _.bbox.x += +dx;\n            _.bbox.y += +dy;\n        } else {\n            _.dirtyT = 1;\n        }\n    },\n    getEmpty = function(item) {\n        var l = item[0];\n        switch (l.toLowerCase()) {\n            case \"t\":\n                return [l, 0, 0];\n            case \"m\":\n                return [l, 1, 0, 0, 1, 0, 0];\n            case \"r\":\n                if (item.length === 4) {\n                    return [l, 0, item[2], item[3]];\n                } else {\n                    return [l, 0];\n                }\n            case \"s\":\n                if (item.length === 5) {\n                    return [l, 1, 1, item[3], item[4]];\n                } else if (item.length === 3) {\n                    return [l, 1, 1];\n                } else {\n                    return [l, 1];\n                }\n        }\n    },\n    equaliseTransform = R._equaliseTransform = function(t1, t2) {\n        t2 = Str(t2).replace(/\\.{3}|\\u2026/g, t1);\n        t1 = R.parseTransformString(t1) || [];\n        t2 = R.parseTransformString(t2) || [];\n        var maxlength = mmax(t1.length, t2.length),\n        from = [],\n        to = [],\n        i = 0, j, jj,\n        tt1, tt2;\n        for (; i < maxlength; i++) {\n            tt1 = t1[i] || getEmpty(t2[i]);\n            tt2 = t2[i] || getEmpty(tt1);\n            if ((tt1[0] != tt2[0]) ||\n                (tt1[0].toLowerCase() === \"r\" && (tt1[2] != tt2[2] || tt1[3] != tt2[3])) ||\n                (tt1[0].toLowerCase() === \"s\" && (tt1[3] != tt2[3] || tt1[4] != tt2[4]))\n                ) {\n                return;\n            }\n            from[i] = [];\n            to[i] = [];\n            for (j = 0, jj = mmax(tt1.length, tt2.length); j < jj; j++) {\n                j in tt1 && (from[i][j] = tt1[j]);\n                j in tt2 && (to[i][j] = tt2[j]);\n            }\n        }\n        return {\n            from: from,\n            to: to\n        };\n    };\n    R._getContainer = function(x, y, w, h) {\n        var container;\n        container = h == null && !R.is(x, OBJECT) ? g.doc.getElementById(x) : x;\n        if (container == null) {\n            return;\n        }\n        if (container.tagName) {\n            if (y == null) {\n                return {\n                    container: container,\n                    width: container.style.pixelWidth || container.offsetWidth,\n                    height: container.style.pixelHeight || container.offsetHeight\n                };\n            } else {\n                return {\n                    container: container,\n                    width: y,\n                    height: w\n                };\n            }\n        }\n        return {\n            container: 1,\n            x: x,\n            y: y,\n            width: w,\n            height: h\n        };\n    };\n\n    R._engine = {};\n\n    /*\\\n     * Raphael.path2curve\n     [ method ]\n     **\n     * Utility method\n     **\n     * Converts path to a new path where all segments are cubic bezier curves.\n     > Parameters\n     - pathString (string|array) path string or array of segments\n     = (array) array of segments.\n    \\*/\n    R.path2curve = path2curve;\n\n    /*\\\n     * Raphael.matrix\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns matrix based on given parameters.\n     > Parameters\n     - a (number)\n     - b (number)\n     - c (number)\n     - d (number)\n     - e (number)\n     - f (number)\n     = (object) @Matrix\n    \\*/\n    R.matrix = function(a, b, c, d, e, f) {\n        return new Matrix(a, b, c, d, e, f);\n    };\n\n    function Matrix(a, b, c, d, e, f) {\n        if (a != null) {\n            this.a = +a;\n            this.b = +b;\n            this.c = +c;\n            this.d = +d;\n            this.e = +e;\n            this.f = +f;\n        } else {\n            this.a = 1;\n            this.b = 0;\n            this.c = 0;\n            this.d = 1;\n            this.e = 0;\n            this.f = 0;\n        }\n    }\n    (function(matrixproto) {\n\n        /*\\\n         * Matrix.add\n         [ method ]\n         **\n         * Adds given matrix to existing one.\n         > Parameters\n         - a (number)\n         - b (number)\n         - c (number)\n         - d (number)\n         - e (number)\n         - f (number)\n         or\n         - matrix (object) @Matrix\n        \\*/\n        matrixproto.add = function(a, b, c, d, e, f) {\n            var out = [[], [], []],\n            m = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]],\n            matrix = [[a, c, e], [b, d, f], [0, 0, 1]],\n            x, y, z, res;\n\n            if (a && a instanceof Matrix) {\n                matrix = [[a.a, a.c, a.e], [a.b, a.d, a.f], [0, 0, 1]];\n            }\n\n            for (x = 0; x < 3; x++) {\n                for (y = 0; y < 3; y++) {\n                    res = 0;\n                    for (z = 0; z < 3; z++) {\n                        res += m[x][z] * matrix[z][y];\n                    }\n                    out[x][y] = res;\n                }\n            }\n            this.a = out[0][0];\n            this.b = out[1][0];\n            this.c = out[0][1];\n            this.d = out[1][1];\n            this.e = out[0][2];\n            this.f = out[1][2];\n        };\n\n        /*\\\n         * Matrix.invert\n         [ method ]\n         **\n         * Returns inverted version of the matrix\n         = (object) @Matrix\n        \\*/\n        matrixproto.invert = function() {\n            var me = this,\n            x = me.a * me.d - me.b * me.c;\n            return new Matrix(me.d / x, -me.b / x, -me.c / x, me.a / x, (me.c * me.f - me.d * me.e) / x, (me.b * me.e - me.a * me.f) / x);\n        };\n\n        /*\\\n         * Matrix.clone\n         [ method ]\n         **\n         * Returns copy of the matrix\n         = (object) @Matrix\n        \\*/\n        matrixproto.clone = function() {\n            return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\n        };\n\n        /*\\\n         * Matrix.translate\n         [ method ]\n         **\n         * Translate the matrix\n         > Parameters\n         - x (number)\n         - y (number)\n        \\*/\n        matrixproto.translate = function(x, y) {\n            this.add(1, 0, 0, 1, x, y);\n        };\n\n        /*\\\n         * Matrix.scale\n         [ method ]\n         **\n         * Scales the matrix\n         > Parameters\n         - x (number)\n         - y (number) #optional\n         - cx (number) #optional\n         - cy (number) #optional\n        \\*/\n        matrixproto.scale = function(x, y, cx, cy) {\n            y == null && (y = x);\n            (cx || cy) && this.add(1, 0, 0, 1, cx, cy);\n            this.add(x, 0, 0, y, 0, 0);\n            (cx || cy) && this.add(1, 0, 0, 1, -cx, -cy);\n        };\n\n        /*\\\n         * Matrix.rotate\n         [ method ]\n         **\n         * Rotates the matrix\n         > Parameters\n         - a (number)\n         - x (number)\n         - y (number)\n        \\*/\n        matrixproto.rotate = function(a, x, y) {\n            a = R.rad(a);\n            x = x || 0;\n            y = y || 0;\n            var cos = +mathCos(a).toFixed(9),\n            sin = + mathSin(a).toFixed(9);\n            this.add(cos, sin, -sin, cos, x, y);\n            this.add(1, 0, 0, 1, -x, -y);\n        };\n\n        /*\\\n         * Matrix.x\n         [ method ]\n         **\n         * Return x coordinate for given point after transformation described by the matrix. See also @Matrix.y\n         > Parameters\n         - x (number)\n         - y (number)\n         = (number) x\n        \\*/\n        matrixproto.x = function(x, y) {\n            return x * this.a + y * this.c + this.e;\n        };\n\n        /*\\\n         * Matrix.y\n         [ method ]\n         **\n         * Return y coordinate for given point after transformation described by the matrix. See also @Matrix.x\n         > Parameters\n         - x (number)\n         - y (number)\n         = (number) y\n        \\*/\n        matrixproto.y = function(x, y) {\n            return x * this.b + y * this.d + this.f;\n        };\n        matrixproto.get = function(i) {\n            return +this[Str.fromCharCode(97 + i)].toFixed(4);\n        };\n        matrixproto.toString = function() {\n            return R.svg ?\n            \"matrix(\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + \")\" :\n            [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join();\n        };\n        matrixproto.toMatrixString = function() {\n            return \"matrix(\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + \")\";\n        };\n        matrixproto.toFilter = function() {\n            return \"progid:DXImageTransform.Microsoft.Matrix(M11=\" + this.get(0) +\n            \", M12=\" + this.get(2) + \", M21=\" + this.get(1) + \", M22=\" + this.get(3) +\n            \", Dx=\" + this.get(4) + \", Dy=\" + this.get(5) + \", sizingmethod='auto expand')\";\n        };\n        matrixproto.offset = function() {\n            return [this.e.toFixed(4), this.f.toFixed(4)];\n        };\n        function norm(a) {\n            return a[0] * a[0] + a[1] * a[1];\n        }\n        function normalize(a) {\n            var mag = mathSqrt(norm(a));\n            a[0] && (a[0] /= mag);\n            a[1] && (a[1] /= mag);\n        }\n\n        /*\\\n         * Matrix.split\n         [ method ]\n         **\n         * Splits matrix into primitive transformations\n         = (object) in format:\n         o dx (number) translation by x\n         o dy (number) translation by y\n         o scalex (number) scale by x\n         o scaley (number) scale by y\n         o shear (number) shear\n         o rotate (number) rotation in deg\n         o isSimple (boolean) could it be represented via simple transformations\n        \\*/\n        matrixproto.split = function() {\n            var out = {};\n            // translation\n            out.dx = this.e;\n            out.dy = this.f;\n\n            // scale and shear\n            var row = [[this.a, this.c], [this.b, this.d]];\n            out.scalex = mathSqrt(norm(row[0]));\n            normalize(row[0]);\n\n            out.shear = row[0][0] * row[1][0] + row[0][1] * row[1][1];\n            row[1] = [row[1][0] - row[0][0] * out.shear, row[1][1] - row[0][1] * out.shear];\n\n            out.scaley = mathSqrt(norm(row[1]));\n            normalize(row[1]);\n            out.shear /= out.scaley;\n\n            // rotation\n            var sin = -row[0][1],\n            cos = row[1][1];\n            if (cos < 0) {\n                out.rotate = R.deg(math.acos(cos));\n                if (sin < 0) {\n                    out.rotate = 360 - out.rotate;\n                }\n            } else {\n                out.rotate = R.deg(math.asin(sin));\n            }\n\n            out.isSimple = !+out.shear.toFixed(9) && (out.scalex.toFixed(9) === out.scaley.toFixed(9) || !out.rotate);\n            out.isSuperSimple = !+out.shear.toFixed(9) && out.scalex.toFixed(9) === out.scaley.toFixed(9) && !out.rotate;\n            out.noRotation = !+out.shear.toFixed(9) && !out.rotate;\n            return out;\n        };\n\n        /*\\\n         * Matrix.toTransformString\n         [ method ]\n         **\n         * Return transform string that represents given matrix\n         = (string) transform string\n        \\*/\n        matrixproto.toTransformString = function(shorter) {\n            var s = shorter || this[SPLIT]();\n            if (s.isSimple) {\n                s.scalex = +s.scalex.toFixed(4);\n                s.scaley = +s.scaley.toFixed(4);\n                s.rotate = +s.rotate.toFixed(4);\n                return  (s.dx || s.dy ? \"t\" + [s.dx, s.dy] : E) +\n                (s.scalex != 1 || s.scaley != 1 ? \"s\" + [s.scalex, s.scaley, 0, 0] : E) +\n                (s.rotate ? \"r\" + [s.rotate, 0, 0] : E);\n            } else {\n                return mStr + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)];\n            }\n        };\n    })(Matrix.prototype);\n\n    // WebKit rendering bug workaround method\n    var navigator = win.navigator,\n        version = navigator.userAgent.match(/Version\\/(.*?)\\s/) || navigator.userAgent.match(/Chrome\\/(\\d+)/);\n\n    if ((navigator.vendor === \"Apple Computer, Inc.\") && (version && version[1] < 4 || navigator.platform.slice(0, 2) === \"iP\") ||\n        (navigator.vendor === \"Google Inc.\" && version && version[1] < 8)) {\n\n        /*\\\n         * Paper.safari\n         [ method ]\n         **\n         * There is an inconvenient rendering bug in Safari (WebKit):\n         * sometimes the rendering should be forced.\n         * This method should help with dealing with this bug.\n        \\*/\n        paperproto.safari = function() {\n            var rect = this.rect(-99, -99, this.width + 99, this.height + 99).attr({\n                stroke: NONE\n            });\n            setTimeout(function() {\n                rect.remove();\n            });\n            return true;\n        };\n    } else {\n        paperproto.safari = fun;\n    }\n\n    var preventDefault = function() {\n        this.returnValue = false;\n    },\n    preventTouch = function() {\n        return this.originalEvent.preventDefault();\n    },\n    stopPropagation = function() {\n        this.cancelBubble = true;\n    },\n    stopTouch = function() {\n        return this.originalEvent.stopPropagation();\n    },\n    eventCopyList = {\n        stopPropagation: 'fn',\n        stopImmediatePropagation: 'fn',\n        preventDefault: 'fn',\n        type: true,\n        clientX: true,\n        clientY: true,\n        pageX: true,\n        pageY: true,\n        bubbles: true,\n        cancelable: true,\n        touches: true,\n        target: true,\n        originalTarget: true,\n        srcElement: true,\n        relatedTarget: true,\n        fromElement: true,\n        changedTouches: true,\n        layerX: true,\n        layerY: true,\n        deltaX: true,\n        deltaY: true\n    },\n    makeSelectiveCopy = R.makeSelectiveCopy = function (target, source) {\n        for (let eve in eventCopyList) {\n            if (eventCopyList[eve] === 'fn') {\n                target[eve] = (function () {\n                    return function () {\n                        source[eve]();\n                    }\n                })(source);\n            } else {\n                target[eve] = source[eve];\n            }\n        }\n        target.originalEvent = source;\n        // For IOS device\n        target.type || (target.type = source.originalEvent && source.originalEvent.type);\n    },\n    // This function is used to add drag related events and element.mouseover/element.mouseout event.\n    // It is advised to use element.on instead\n    addEvent = R.addEvent = (function() {\n        if (g.doc.addEventListener) {\n            return function(obj, type, fn, element) {\n                // If pointer is supported then use pointer events else use default events\n                var realName = supportsPointer ? safePointerEventMapping[type] :\n                    supportsTouch ? touchMap[type] : type,\n                    f,\n                    args;\n                // capture mode false is included in the eventListener function only when it is a non-IE device.\n                // For all IE device rendering svg we have have a specific bug in the browser. If we use {}, {capture: false}\n                // or {capture: true}, irrespective of the boolean value it always sets {capture: true} for events attached\n                // on body and div which results in bug when stopPropagation is called.\n                if (!isIE) {\n                    args = {\n                        capture: false\n                    };\n                }\n\n                /**\n                 * Special case for pointerup\n                 * When dragged over an element then pointer up is not fired, so we have to associate\n                 * respective events for various browsers\n                 */\n                if (element.dragFn) {\n                    if (realName === 'pointerup') {\n                        realName = 'mouseup';\n                    } else if (realName === UNDEF) { // for hybrid devices\n                        realName = 'touchend'\n                    }\n                }\n\n                f = function(e) {\n                    var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                        scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n                        target;\n                    if (supportsTouch && touchMap[type]) {\n                        for (var i = 0, ii = e.targetTouches && e.targetTouches.length; i < ii; i++) {\n                            target = e.targetTouches[i].target;\n                            if (target === obj || (target.nodeName === 'tspan' && target.parentNode === obj)) {\n                                var olde = e;\n                                e = e.targetTouches[i];\n                                e.originalEvent = olde;\n                                e.preventDefault = preventTouch;\n                                e.stopPropagation = stopTouch;\n                                break;\n                            }\n                        }\n                    }\n                    return fn.call(element, e, e.clientX + scrollX, e.clientY + scrollY);\n                };\n                obj.addEventListener(realName, f, args);\n                return function() {\n                    obj.removeEventListener(realName, f, args);\n                    return true;\n                };\n            };\n        } else if (g.doc.attachEvent) {\n            return function(obj, type, fn, element) {\n                var f = function(e) {\n                    e = e || g.win.event;\n                    var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                    scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n                    x = e.clientX + scrollX,\n                    y = e.clientY + scrollY;\n                    e.preventDefault = e.preventDefault || preventDefault;\n                    e.stopPropagation = e.stopPropagation || stopPropagation;\n                    return fn.call(element, e, x, y);\n                };\n                obj.attachEvent(\"on\" + type, f);\n                var detacher = function() {\n                    obj.detachEvent(\"on\" + type, f);\n                    return true;\n                };\n                return detacher;\n            };\n        }\n    })(),\n\n    dragMove = function(e) {\n        var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n            x = (e.clientX !== UNDEF ? e.clientX : (e.changedTouches && e.changedTouches[0].clientX)) + scrollX,\n            y = (e.clientY !== UNDEF ? e.clientY : (e.changedTouches && e.changedTouches[0].clientY)) + scrollY,\n            data,\n            dummyEve = {},\n            el = this,\n            j = el.dragInfo.onmove.length;\n\n        // Setting the minimum threshold of 2 pixels to trigger dragmove\n        // el.blockDrag is true during pinch zoom in touch devices\n        if ((el.dragStartFn && !(Math.abs(x - el._drag.x) >= 2.5 || Math.abs(y - el._drag.y) >= 2.5)) ||\n            el._blockDrag || (supportsPointer && supportsTouch && !e.isPrimary)) {\n            return;\n        }\n\n        while (j--) {\n            if (supportsTouch && e.type === 'touchmove') {\n                var i = e.touches.length,\n                touch;\n                while (i--) {\n                    touch = e.touches[i];\n                    if (touch.identifier === el._drag.id) {\n                        x = touch.clientX + scrollX;\n                        y = touch.clientY + scrollY;\n                        break;\n                    }\n                }\n            }\n\n            if (el.removed) {\n                continue;\n            }\n\n            if (el.dragStartFn) {\n                el.dragStartFn(j);\n                el.dragStartFn = undefined;\n                el.dragInfo._dragmove = true;\n            }\n\n            if (g.win.opera) {\n                var node = R._engine.getNode(el),\n                next = node.nextSibling,\n                parent = node.parentNode,\n                display = node.style.display;\n\n                parent.removeChild(node);\n\n                node.style.display = NONE;\n                node.style.display = display;\n                next ? parent.insertBefore(node, next) : parent.appendChild(node);\n            }\n            //Function to copy some properties of the actual event into the dummy event\n            makeSelectiveCopy(dummyEve, e);\n\n            data = dummyEve.data = [x - el._drag.x, y - el._drag.y, x, y];\n            eve(\"raphael.drag.move.\" + el.id, el.dragInfo.move_scope[j] || el, dummyEve, data);\n        }\n    },\n    dragUp = function(e) {\n        var el = this,\n            dragInfo = el.dragInfo,\n            i = dragInfo.onend.length;\n\n        // Dragend handler is called only when dragmove is fired\n        if (el.dragInfo._dragmove) {\n            while (i--) {\n                el._drag = {};\n                eve(\"raphael.drag.end.\" + el.id, dragInfo.end_scope[i] || dragInfo.start_scope[i] ||\n                    dragInfo.move_scope[i] || el, e);\n            }\n        }\n        el.dragInfo._dragmove = undefined;\n        supportsTouch && !(isIE11 || isEdge) && !(isWindows && isFirefox) &&\n            (el.paper.canvas.style['touch-action'] = 'auto');\n        // After execution of the callbacks the eventListeners are removed\n        R.undragmove.call(el, dragMove);\n        R.undragend.call(el, dragUp);\n        R.unmousemove.call(el, dragMove).unmouseup.call(el, dragUp);\n    },\n\n    /*\\\n     * Raphael.el\n     [ property (object) ]\n     **\n     * You can add your own method to elements. This is usefull when you want to hack default functionality or\n     * want to wrap some common transformation or attributes in one method. In difference to canvas methods,\n     * you can redefine element method at any time. Expending element methods wouldnt affect set.\n     > Usage\n     | Raphael.el.red = function () {\n     |     this.attr({fill: \"#f00\"});\n     | };\n     | // then use it\n     | paper.circle(100, 100, 20).red();\n    \\*/\n    elproto = R.el = {};\n\n    /*\\\n     * Element.click\n     [ method ]\n     **\n     * Adds event handler for click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unclick\n     [ method ]\n     **\n     * Removes event handler for click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.dblclick\n     [ method ]\n     **\n     * Adds event handler for double click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.undblclick\n     [ method ]\n     **\n     * Removes event handler for double click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mousedown\n     [ method ]\n     **\n     * Adds event handler for mousedown for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmousedown\n     [ method ]\n     **\n     * Removes event handler for mousedown for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mousemove\n     [ method ]\n     **\n     * Adds event handler for mousemove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmousemove\n     [ method ]\n     **\n     * Removes event handler for mousemove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseout\n     [ method ]\n     **\n     * Adds event handler for mouseout for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseout\n     [ method ]\n     **\n     * Removes event handler for mouseout for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseover\n     [ method ]\n     **\n     * Adds event handler for mouseover for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseover\n     [ method ]\n     **\n     * Removes event handler for mouseover for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseup\n     [ method ]\n     **\n     * Adds event handler for mouseup for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseup\n     [ method ]\n     **\n     * Removes event handler for mouseup for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchstart\n     [ method ]\n     **\n     * Adds event handler for touchstart for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchstart\n     [ method ]\n     **\n     * Removes event handler for touchstart for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchmove\n     [ method ]\n     **\n     * Adds event handler for touchmove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchmove\n     [ method ]\n     **\n     * Removes event handler for touchmove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchend\n     [ method ]\n     **\n     * Adds event handler for touchend for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchend\n     [ method ]\n     **\n     * Removes event handler for touchend for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchcancel\n     [ method ]\n     **\n     * Adds event handler for touchcancel for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchcancel\n     [ method ]\n     **\n     * Removes event handler for touchcancel for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    for (var i = events.length; i--; ) {\n        (function(eventName) {\n            // tragetElem is introducded if we want to add the evt listener on a different dom based on some\n            // specific events, eg - dragMovde and dragEnd\n            R[eventName] = elproto[eventName] = function(fn, scope, tragetElem) {\n                if (R.is(fn, FUNCTION)) {\n                    this.events = this.events || [];\n                    this.events.push({\n                        name: eventName,\n                        f: fn,\n                        unbind: addEvent(tragetElem || this.shape || this.node || g.doc, eventName, fn, scope || this)\n                    });\n                }\n                return this;\n            };\n            R[\"un\" + eventName] = elproto[\"un\" + eventName] = function(fn) {\n                var events = this.events || [],\n                l = events.length;\n                while (l--)\n                    if (events[l].name === eventName && events[l].f === fn) {\n                        events[l].unbind();\n                        events.splice(l, 1);\n                        !events.length && delete this.events;\n                        return this;\n                    }\n                return this;\n            };\n        })(events[i]);\n    }\n\n    /*\\\n     * Element.data\n     [ method ]\n     **\n     * Adds or retrieves given value asociated with given key.\n     **\n     * See also @Element.removeData\n     > Parameters\n     - key (string) key to store data\n     - value (any) #optional value to store\n     = (object) @Element\n     * or, if value is not specified:\n     = (any) value\n     > Usage\n     | for (var i = 0, i < 5, i++) {\n     |     paper.circle(10 + 15 * i, 10, 10)\n     |          .attr({fill: \"#000\"})\n     |          .data(\"i\", i)\n     |          .fcclick(function () {\n     |             alert(this.data(\"i\"));\n     |          });\n     | }\n    \\*/\n    elproto.data = function(key, value) {\n        var data = eldata[this.id] = eldata[this.id] || {};\n        if (arguments.length === 1) {\n            if (R.is(key, OBJECT)) {\n                for (var i in key)\n                    if (key[HAS](i)) {\n                        this.data(i, key[i]);\n                    }\n                return this;\n            }\n            R.stopPartialEventPropagation || eve(\"raphael.data.get.\" + this.id, this, data[key], key);\n            return data[key];\n        }\n        data[key] = value;\n        R.stopPartialEventPropagation || eve(\"raphael.data.set.\" + this.id, this, value, key);\n        return this;\n    };\n\n    /*\\\n     * Element.removeData\n     [ method ]\n     **\n     * Removes value associated with an element by given key.\n     * If key is not provided, removes all the data of the element.\n     > Parameters\n     - key (string) #optional key\n     = (object) @Element\n    \\*/\n    elproto.removeData = function (key) {\n        if (key == null) {\n            delete eldata[this.id];\n        } else {\n            eldata[this.id] && delete eldata[this.id][key];\n        }\n        return this;\n    };\n\n    elproto.dbclick = function (handler, context) {\n        let elem = this,\n            eventType,\n            isSingleFinger = function (event) {\n                return !event.touches || (event.touches && event.touches.length === 1);\n            },\n            fn = function (e) {\n                // Check for multi-touch devices. When 2 finger touch is done then pointerup\n                // is fired twice resulting into double click zoom\n                if ( supportsPointer && !e.isPrimary) {\n                    return;\n                }\n                e && e.preventDefault();\n                if (!isSingleFinger(e)) {\n                    return;\n                }\n                if (elem._tappedOnce) {\n                    handler.call(context || elem, e);\n                    elem._tappedOnce = false;\n                } else {\n                    elem._tappedOnce = true;\n                    // 500ms time for double tap expiration\n                    setTimeout(function () {\n                        elem._tappedOnce = false;\n                    }, 500);\n                }\n            };\n\n        eventType = supportsPointer ? 'pointerup' : R.supportsTouch ? 'touchstart' : 'mouseup';\n\n        elem.node.addEventListener(eventType, fn);\n        R.storeHandlers(elem, handler, fn);\n\n    };\n\n    elproto.undbclick = function (handler) {\n        var elem = this,\n            derivedHandler = removeHandlers(elem, handler);\n\n        derivedHandler && elem.node.removeEventListener(supportsPointer ? 'pointerup' :\n            R.supportsTouch ? 'touchstart' : 'mouseup', derivedHandler);\n    };\n\n     /*\\\n     * Element.getData\n     [ method ]\n     **\n     * Retrieves the element data\n     = (object) data\n    \\*/\n    elproto.getData = function () {\n        return clone(eldata[this.id] || {});\n    };\n\n    var downables = [],\n        mouseDown = function () {\n            this.untrack = addEvent(g.doc, 'mouseup', mouseUp, this);\n        },\n        mouseUp = function () {\n            this.untrack();\n            this.untrack = null;\n            return this.fn && this.fn.apply(this.scope || this.el, arguments);\n\n        };\n    elproto.mouseup = function (fn, scope, track, tragetElem) {\n        if (!track) {\n            return R.mouseup.apply(this, [fn, scope, tragetElem]);\n        }\n        downables.push(track = {\n            el: this,\n            fn: fn,\n            scope: scope\n        });\n        track.unbind = addEvent(this.shape || this.node || g.doc,\n            'mousedown', mouseDown, track);\n\n        return this;\n    };\n\n    elproto.unmouseup = function (fn) {\n        var i = downables.length,\n            undowned;\n        while (i--) {\n            if (downables[i].el === this && downables[i].fn === fn) {\n                undowned = downables[i];\n                undowned.unbind();\n                undowned.untrack && undowned.untrack();\n                downables.splice(i, 1);\n            }\n        }\n        return undowned ? this : R.unmouseup.apply(this, arguments);\n    };\n\n    /*\\\n     * Element.hover\n     [ method ]\n     **\n     * Adds event handlers for hover for the element.\n     > Parameters\n     - f_in (function) handler for hover in\n     - f_out (function) handler for hover out\n     - icontext (object) #optional context for hover in handler\n     - ocontext (object) #optional context for hover out handler\n     = (object) @Element\n    \\*/\n    elproto.hover = function(f_in, f_out, scope_in, scope_out) {\n        return this.on('fc-mouseover', f_in, scope_in).on('fc-mouseout', f_out, scope_out);\n    };\n\n    /*\\\n     * Element.unhover\n     [ method ]\n     **\n     * Removes event handlers for hover for the element.\n     > Parameters\n     - f_in (function) handler for hover in\n     - f_out (function) handler for hover out\n     = (object) @Element\n    \\*/\n    elproto.unhover = function(f_in, f_out) {\n        return this.off('fc-mouseover', f_in).off('fc-mouseout', f_out);\n    };\n\n    elproto.fcclick = function (handler, context) {\n        var elem = this,\n            node = elem.node,\n            eventType,\n            fn,\n            x1,\n            y1,\n            downFn = function (e) {\n                elem._lastEventTriggered = 'mousedown';\n                // Storing the mouse down coordinates\n                x1 = e.clientX !== UNDEF ? e.clientX : (e.changedTouches &&\n                    e.changedTouches[0].clientX);\n                y1 = (e.clientY !== UNDEF ? e.clientY : (e.changedTouches &&\n                    e.changedTouches[0].clientY));\n            },\n            moveFn = function (e) {\n                let x2 = e.clientX !== UNDEF ? e.clientX : (e.changedTouches &&\n                    e.changedTouches[0].clientX),\n                y2 = (e.clientY !== UNDEF ? e.clientY : (e.changedTouches &&\n                    e.changedTouches[0].clientY));\n                // maintaning a minimum pixel gap of 2.5 to trigger mousemove\n                if (Math.abs(x1 - x2) >= 2.5 || Math.abs(y1 - y2) >= 2.5) {\n                    elem._lastEventTriggered = undefined;\n                }\n            },\n            content;\n        elem._clickStoreActual || (elem._clickStoreActual = []);\n        elem._clickStoreDerived || (elem._clickStoreDerived = []);\n\n        // Helper functions of click attached only once\n        if (!elem._clickHandlerHelper) {\n            // For devices that does not support pointer\n            if (!supportsPointer && R.supportsTouch) {\n                content = {\n                    touchstart: function () {\n                        elem._lastEventTriggered = 'touchstart';\n                        elem._lastEventTriggeredAt = new Date().getTime();\n                    },\n                    touchmove: moveFn\n                };\n            } else if (supportsPointer && R.supportsTouch) { // For touch device supporting pointers\n                content = {\n                    pointerdown: downFn,\n                    pointermove: moveFn\n                };\n            } else {\n                content = {\n                    mousedown: downFn,\n                    mousemove: moveFn\n                };\n            }\n\n            for (eventType in content) {\n                if (node.addEventListener) {\n                    node.addEventListener(eventType, content[eventType]);\n                } else {\n                    node.attachEvent('on'+ eventType, content[eventType]);\n                }\n            }\n            elem._clickHandlerHelper = content;\n        }\n\n        // Creating the actual handler\n        if (!supportsPointer && R.supportsTouch) {\n            eventType = 'touchend',\n            fn = function (e) {\n                // Restricting click to be called after touchmove followed by touchstart\n                // Restricting click to be triggered after long tap\n                if (elem._lastEventTriggered === 'touchstart' &&\n                    new Date().getTime() - elem._lastEventTriggeredAt <= 500) {\n                        setTimeout(function () {\n                            handler.call(context || elem, e);\n                        }, 0);\n                    }\n            };\n        } else {\n            eventType = 'click',\n            fn = function (e) {\n                // Restricting click to be called after mousemove followed by mousedown\n                elem._lastEventTriggered === 'mousedown' &&\n                    handler.call(context || elem, e);\n            };\n        }\n\n        if (node.addEventListener) {\n            node.addEventListener(eventType, fn);\n        } else {\n            node.attachEvent('on'+ eventType, fn);\n        }\n\n        // Stroring the events for future removal\n        elem._clickStoreDerived.push(fn);\n        elem._clickStoreActual.push(handler);\n        return elem;\n    };\n\n    elproto.fcunclick = function (handler) {\n        var elem = this,\n            node = elem.node,\n            i,\n            eventType,\n            clickHandlerHelper = elem._clickHandlerHelper,\n            clickStoreActual = elem._clickStoreActual,\n            clickStoreDerived = elem._clickStoreDerived;\n\n        if (clickStoreActual) {\n            for (i = clickStoreActual.length - 1; i >= 0; i--) {\n                if (clickStoreActual[i] === handler) {\n                    if (node.removeEventListener) {\n                        node.removeEventListener(!supportsPointer && R.supportsTouch ?\n                            'touchend' : 'click', clickStoreDerived[i]);\n                    } else {\n                        node.detachEvent('onclick', clickStoreDerived[i]);\n                    }\n                    clickStoreActual.splice(i, 1);\n                    clickStoreDerived.splice(i, 1);\n                }\n            }\n\n            // When all click listeners are removed\n            if (!clickStoreActual.length) {\n                for (eventType in clickHandlerHelper) {\n                    if (node.removeEventListener) {\n                        node.removeEventListener(eventType, clickHandlerHelper[eventType]);\n                    } else {\n                        node.detachEvent('on'+ eventType, clickHandlerHelper[eventType]);\n                    }\n                }\n                elem._clickHandlerHelper = undefined;\n            }\n        }\n        return elem;\n    };\n    var draggable = [];\n\n    /*\\\n     * Element.drag\n     [ method ]\n     **\n     * Adds event handlers for drag of the element.\n     > Parameters\n     - onmove (function) handler for moving\n     - onstart (function) handler for drag start\n     - onend (function) handler for drag end\n     - mcontext (object) #optional context for moving handler\n     - scontext (object) #optional context for drag start handler\n     - econtext (object) #optional context for drag end handler\n     * Additionaly following `drag` events will be triggered: `drag.start.<id>` on start,\n     * `drag.end.<id>` on end and `drag.move.<id>` on every move. When element will be dragged over another element\n     * `drag.over.<id>` will be fired as well.\n     *\n     * Start event and start handler will be called in specified context or in context of the element with following parameters:\n     o x (number) x position of the mouse\n     o y (number) y position of the mouse\n     o event (object) DOM event object\n     * Move event and move handler will be called in specified context or in context of the element with following parameters:\n     o dx (number) shift by x from the start point\n     o dy (number) shift by y from the start point\n     o x (number) x position of the mouse\n     o y (number) y position of the mouse\n     o event (object) DOM event object\n     * End event and end handler will be called in specified context or in context of the element with following parameters:\n     o event (object) DOM event object\n     = (object) @Element\n    \\*/\n    elproto.drag = function(onmove, onstart, onend, move_scope, start_scope, end_scope) {\n        var element = this,\n            dragInfo = element.dragInfo || (element.dragInfo = {\n            // Store all the callbacks for various eventListeners on the same element\n            onmove: [],\n            onstart: [],\n            onend: [],\n            move_scope: [],\n            start_scope: [],\n            end_scope: []\n        });\n        // Storing the callback functions and scopes in any\n        onmove && dragInfo.onmove.push(onmove) && dragInfo.move_scope.push(move_scope);\n        onstart && dragInfo.onstart.push(onstart) && dragInfo.start_scope.push(start_scope);\n        onend && dragInfo.onend.push(onend) && dragInfo.end_scope.push(end_scope);\n\n        element.dragFn = element.dragFn || function (e) {\n            var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n                dummyEve = {},\n                data,\n                i,\n                j,\n                k,\n                ii,\n                jj,\n                kk,\n                dummydragMoveFn,\n                _dragX,\n                _dragY,\n                dragInfo = element.dragInfo,\n                args = [dragMove, undef, g.doc];\n            // Diabling drag incase of multi touch\n            if (supportsPointer && !e.isPrimary) {\n                return;\n            }\n            // Blocking page scroll when drag is triggered\n            if (supportsTouch) {\n                if (!supportsPointer) {\n                    e.preventDefault();\n                } else if (!(isIE11 || isEdge) && !(isWindows && isFirefox)){\n                    element.paper.canvas.style['touch-action'] = 'none';\n                }\n            }\n            // In hybrid devices, sometimes the e.clientX and e.clientY is not defined\n            element._drag.x = _dragX = (e.clientX !== UNDEF ? e.clientX : (e.changedTouches &&\n                e.changedTouches[0].clientX)) + scrollX;\n            element._drag.y = _dragY = (e.clientY !== UNDEF ? e.clientY : (e.changedTouches &&\n                e.changedTouches[0].clientY)) + scrollY;\n            element._drag.id = e.identifier;\n\n            // For IOS touch devices\n            if (supportsTouch && !supportsPointer) {\n                R.dragmove.apply(element, args);\n            } else  {\n                R.mousemove.apply(element, args).mouseup.call(element, dragUp, undef, undef, g.doc)\n\n            }\n\n            if (supportsTouch) {\n                // dragEnd is added for hybrid devices and other touch devices\n                R.dragend.call(element, dragUp, undef, g.doc);\n            }\n\n            //Function to copy some properties of the actual event into the dummy event\n            makeSelectiveCopy(dummyEve, e);\n\n            data = dummyEve.data = [_dragX, _dragY];\n\n            // Attaching handlers for various events\n            for (i = 0, ii = dragInfo.onstart.length; i < ii; i ++) {\n                eve.on(\"raphael.drag.start.\" + element.id, dragInfo.onstart[i]);\n            }\n\n            for (j = 0, jj = dragInfo.onmove.length; j < jj; j ++) {\n                eve.on(\"raphael.drag.move.\" + element.id, dragInfo.onmove[j]);\n            }\n\n            for (k = 0, kk = dragInfo.onend.length; k < kk; k ++) {\n                eve.on(\"raphael.drag.end.\" + element.id, dragInfo.onend[k]);\n            }\n\n            // Where there is no dragMove but there is dragStart handler\n            // The logic is implemented as dragstart is fired only when there is mousedown followed by mousemove\n            if (ii && !jj) {\n                dummydragMoveFn = function() {\n                    element.undragmove();\n                    dragInfo.onmove = [];\n                };\n                dragInfo.onmove.push(dummydragMoveFn);\n                eve.on(\"raphael.drag.end.\" + element.id, dummydragMoveFn);\n            }\n\n            // Queuing up the dragStartFn. It is fired if dragmove is fired after dragStart\n            element.dragStartFn = function (i) {\n                eve(\"raphael.drag.start.\" + element.id, element.dragInfo.start_scope[i] || element.dragInfo.move_scope[i] ||\n                    element, dummyEve, data);\n            }\n        }\n        element._drag = {};\n        draggable.push({\n            el: element,\n            start: element.dragFn,\n            onstart: onstart,\n            onmove: onmove,\n            onend: onend\n        });\n\n        if (onstart && !element.startHandlerAttached) {\n            // For IOS touch devices\n            if (supportsTouch && !supportsPointer) {\n                element.dragstart(element.dragFn);\n            } else {\n                element.mousedown(element.dragFn);\n            }\n            element.startHandlerAttached = true;\n        }\n\n        return element;\n    };\n\n    /*\\\n     * Element.onDragOver\n     [ method ]\n     **\n     * Shortcut for assigning event handler for `drag.over.<id>` event, where id is id of the element (see @Element.id).\n     > Parameters\n     - f (function) handler for event, first argument would be the element you are dragging over\n    \\*/\n    elproto.onDragOver = function(f) {\n        f ? eve.on(\"raphael.drag.over.\" + this.id, f) : eve.unbind(\"raphael.drag.over.\" + this.id);\n    };\n\n    /*\\\n     * Element.undrag\n     [ method ]\n     **\n     * Removes all drag event handlers from given element.\n    \\*/\n    elproto.undrag = function() {\n        var elem = this,\n            i = draggable.length;\n        while (i--) {\n            if (draggable[i].el === elem) {\n                elem.unmousedown(elem.dragFn);\n                draggable.splice(i, 1);\n                eve.unbind(\"raphael.drag.*.\" + elem.id);\n                elem.dragInfo = undefined;\n                elem.dragFn = undefined;\n                elem.startHandlerAttached = undefined;\n            }\n        }\n\n        R.unmousemove.call(elem, dragMove).unmouseup.call(elem, dragUp);\n        R.undragmove.call(elem, dragMove);\n        R.undragend.call(elem, dragUp);\n        delete elem._drag;\n    };\n\n    /**\n     * Function to remove the individual dragStart handler from the element. If no handler is provided, all the dragMove\n     * handlers are removed.\n     */\n    elproto.undragstart = function (handler) {\n        var elem = this,\n            dragInfo = elem.dragInfo,\n            onstart = dragInfo && dragInfo.onstart,\n            i,\n            ii,\n            start_scope = dragInfo && dragInfo.start_scope;\n\n        if (handler) {\n            for (i = 0, ii = onstart && onstart.length; i < ii; i++) {\n                if (onstart[i] === handler) {\n                    onstart.splice(i, 1);\n                    start_scope.splice(i, 1);\n                    eve.unbind(\"raphael.drag.start.\" + this.id, handler);\n                    break;\n                }\n            }\n        }\n\n        if (!(onstart && onstart.length) || !handler) {\n            R.undragstart.call(elem, elem.dragFn);\n            R.unmousedown.call(elem, elem.dragFn);\n            eve.unbind(\"raphael.drag.start.\" + this.id);\n            // Setting the flag for drag start as false\n            elem.startHandlerAttached = false;\n            dragInfo && (dragInfo.onstart = [], dragInfo.start_scope = []);\n        }\n    }\n\n    /**\n     * Function to remove the individual dragMove handler from the element. If no handler is provided, all the dragMove\n     * handlers are removed.\n     */\n    elproto.undragmove = function (handler) {\n        var elem = this,\n            dragInfo = elem.dragInfo,\n            onmove = dragInfo && dragInfo.onmove,\n            i,\n            ii,\n            move_scope = dragInfo && dragInfo.move_scope;\n\n        if (handler) {\n            for (i = 0, ii = onmove && onmove.length; i < ii; i++) {\n                if (onmove[i] === handler) {\n                    onmove.splice(i, 1);\n                    move_scope.splice(i, 1);\n                    eve.unbind(\"raphael.drag.move.\" + this.id, handler);\n                    break;\n                }\n            }\n        }\n\n        if (!(onmove && onmove.length) || !handler) {\n            R.undragmove.call(elem, dragMove);\n            R.unmousemove.call(elem, dragMove);\n            dragInfo && (dragInfo.onmove = [], dragInfo.move_scope = []);\n            eve.unbind(\"raphael.drag.move.\" + this.id);\n        }\n    }\n\n    /**\n     * Function to remove the individual dragStart handler from the element. If no handler is provided, all the dragEnd\n     * handlers are removed.\n     */\n    elproto.undragend = function (handler) {\n        var elem = this,\n            dragInfo = elem.dragInfo,\n            onend = dragInfo && dragInfo.onend,\n            i,\n            ii,\n            end_scope = dragInfo && dragInfo.end_scope;\n\n        if (handler) {\n            for (i = 0, ii = onend && onend.length; i < ii; i++) {\n                if (onend[i] === handler) {\n                    onend.splice(i, 1);\n                    end_scope.splice(i, 1);\n                    eve.unbind(\"raphael.drag.end.\" + this.id, handler);\n                    break;\n                }\n            }\n        }\n\n        if (!(onend && onend.length) || !handler) {\n            R.undragend.call(elem, dragUp);\n            R.unmouseup.call(elem, dragUp);\n            dragInfo && (dragInfo.onend = [], dragInfo.end_scope = []);\n            eve.unbind(\"raphael.drag.end.\" + this.id);\n        }\n    }\n\n    elproto.follow = function(el, callback, stalk) {\n        if (el.removed || el.constructor !== R.el.constructor) {\n            return this;\n        }\n        el.followers.push({\n            el: this,\n            stalk: (stalk = {before: 'insertBefore', after: 'insertAfter'}[stalk]),\n            cb: callback\n        });\n\n        stalk && this[stalk](el);\n        return this;\n    };\n\n    elproto.unfollow = function(el) {\n        if (el.removed || el.constructor !== R.el.constructor) {\n            return this;\n        }\n        for (var i = 0, ii = el.followers.length; i < ii; i++) {\n            if (el.followers[i].el === this) {\n                el.followers.splice(i, 1);\n                break;\n            }\n        }\n        return this;\n    };\n\n    /*\\\n     * Paper.hide\n     [ method ]\n     **\n     * Hides a paper\n     **\n     > Usage\n     | paper.hide();\n    \\*/\n    paperproto.hide = function () {\n        var paper = this;\n        paper.canvas.style.visibility = \"hidden\";\n        return paper;\n    };\n\n    /*\\\n     * Paper.show\n     [ method ]\n     **\n     * Shows a hidden paper\n     **\n     > Usage\n     | paper.show();\n    \\*/\n    paperproto.show = function () {\n        var paper = this;\n        paper.canvas.style.visibility = E;\n        return paper;\n    };\n\n    /*\\\n     * Paper.group\n     [ method ]\n     **\n     * Creates a group\n     **\n     > Parameters\n     **\n     - id (number) id of the group\n     = (object) Raphal element object with type group\n     **\n     > Usage\n     | var g = paper.group();\n    \\*/\n    paperproto.group = function () { // id\n        var paper = this,\n            args = getArrayCopy(arguments),\n            group = lastArgIfGroup(args, true),\n            out = R._engine.group(paper, args[0], group, !!args[1]);\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.circle\n     [ method ]\n     **\n     * Draws a circle.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the centre\n     - y (number) y coordinate of the centre\n     - r (number) radius\n     = (object) Raphal element object with type circle\n     **\n     > Usage\n     | var c = paper.circle(50, 50, 40);\n    \\*/\n    paperproto.circle = function () { // x, y, r\n        var paper = this,\n            args = getArrayCopy(arguments),\n            group = lastArgIfGroup(args, true),\n            attrs = paper._addDefAttribs() ? serializeArgs(args,\n                \"cx\", 0,\n                \"cy\", 0,\n                \"r\", 0,\n                \"fill\", NONE,\n                \"stroke\", BLACK) : serializeArgs(args),\n            out = R._engine.circle(paper, attrs, group);\n\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n\n    /*\\\n     * Paper.rect\n     [ method ]\n     *\n     * Draws a rectangle.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the top left corner\n     - y (number) y coordinate of the top left corner\n     - width (number) width\n     - height (number) height\n     - r (number) #optional radius for rounded corners, default is 0\n     = (object) Raphal element object with type rect\n     **\n     > Usage\n     | // regular rectangle\n     | var c = paper.rect(10, 10, 50, 50);\n     | // rectangle with rounded corners\n     | var c = paper.rect(40, 40, 50, 50, 10);\n    \\*/\n    paperproto.rect = function () {\n        var paper = this,\n            args = getArrayCopy(arguments),\n            group = lastArgIfGroup(args, true),\n            attrs = paper._addDefAttribs() ? serializeArgs(args,\n                \"x\", 0,\n                \"y\", 0,\n                \"width\", 0,\n                \"height\", 0,\n                \"r\", 0,\n                \"fill\", NONE,\n                \"stroke\", BLACK) : serializeArgs(args),\n            out = R._engine.rect(paper, attrs, group);\n\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.ellipse\n     [ method ]\n     **\n     * Draws an ellipse.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the centre\n     - y (number) y coordinate of the centre\n     - rx (number) horizontal radius\n     - ry (number) vertical radius\n     = (object) Raphal element object with type ellipse\n     **\n     > Usage\n     | var c = paper.ellipse(50, 50, 40, 20);\n    \\*/\n    paperproto.ellipse = function () {\n        var paper = this,\n            args = getArrayCopy(arguments),\n            group = lastArgIfGroup(args, true),\n            attrs = paper._addDefAttribs() ? serializeArgs(args,\n                \"x\", 0,\n                \"y\", 0,\n                \"rx\", 0,\n                \"ry\", 0,\n                \"fill\", NONE,\n                \"stroke\", BLACK) : serializeArgs(args),\n            out = R._engine.ellipse(this, attrs, group);\n\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.path\n     [ method ]\n     **\n     * Creates a path element by given path data string.\n     > Parameters\n     - pathString (string) #optional path string in SVG format.\n     * Path string consists of one-letter commands, followed by comma seprarated arguments in numercal form. Example:\n     | \"M10,20L30,40\"\n     * Here we can see two commands: M, with arguments `(10, 20)` and L with arguments `(30, 40)`. Upper case letter mean command is absolute, lower caserelative.\n     *\n     # <p>Here is short list of commands available, for more details see <a href=\"http://www.w3.org/TR/SVG/paths.html#PathData\" title=\"Details of a path's data attribute's format are described in the SVG specification.\">SVG path string format</a>.</p>\n     # <table><thead><tr><th>Command</th><th>Name</th><th>Parameters</th></tr></thead><tbody>\n     # <tr><td>M</td><td>moveto</td><td>(x y)+</td></tr>\n     # <tr><td>Z</td><td>closepath</td><td>(none)</td></tr>\n     # <tr><td>L</td><td>lineto</td><td>(x y)+</td></tr>\n     # <tr><td>H</td><td>horizontal lineto</td><td>x+</td></tr>\n     # <tr><td>V</td><td>vertical lineto</td><td>y+</td></tr>\n     # <tr><td>C</td><td>curveto</td><td>(x1 y1 x2 y2 x y)+</td></tr>\n     # <tr><td>S</td><td>smooth curveto</td><td>(x2 y2 x y)+</td></tr>\n     # <tr><td>Q</td><td>quadratic Bzier curveto</td><td>(x1 y1 x y)+</td></tr>\n     # <tr><td>T</td><td>smooth quadratic Bzier curveto</td><td>(x y)+</td></tr>\n     # <tr><td>A</td><td>elliptical arc</td><td>(rx ry x-axis-rotation large-arc-flag sweep-flag x y)+</td></tr>\n     # <tr><td>R</td><td><a href=\"http://en.wikipedia.org/wiki/CatmullRom_spline#Catmull.E2.80.93Rom_spline\">Catmull-Rom curveto</a>*</td><td>x1 y1 (x y)+</td></tr></tbody></table>\n     * * Catmull-Rom curveto is a not standard SVG command and added in 2.0 to make life easier.\n     * Note: there is a special case when path consist of just three commands: M10,10Rz. In this case path will smoothly connects to its beginning.\n     > Usage\n     | var c = paper.path(\"M10 10L90 90\");\n     | // draw a diagonal line:\n     | // move to 10,10, line to 90,90\n     * For example of path strings, check out these icons: http://raphaeljs.com/icons/\n    \\*/\n    paperproto.path = function () {\n        var paper = this,\n            args = getArrayCopy(arguments),\n            group = lastArgIfGroup(args, true),\n            paperConfig = paper.config,\n            capStyle = (paperConfig && paperConfig[\"stroke-linecap\"]) || \"butt\",\n            attrs = paper._addDefAttribs() ? serializeArgs(args,\n                \"path\", E,\n                \"fill\", NONE,\n                \"stroke\", BLACK,\n                \"stroke-linecap\", capStyle) : serializeArgs(args),\n            out = R._engine.path(paper, attrs, group);\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.image\n     [ method ]\n     **\n     * Embeds an image into the surface.\n     **\n     > Parameters\n     **\n     - src (string) URI of the source image\n     - x (number) x coordinate position\n     - y (number) y coordinate position\n     - width (number) width of the image\n     - height (number) height of the image\n     = (object) Raphal element object with type image\n     **\n     > Usage\n     | var c = paper.image(\"apple.png\", 10, 10, 80, 80);\n    \\*/\n    paperproto.image = function () {\n        var paper = this,\n            args = getArrayCopy(arguments),\n            group = lastArgIfGroup(args, true),\n            attrs = paper._addDefAttribs() ? serializeArgs(args,\n                // \"src\", E,\n                \"x\", 0,\n                \"y\", 0,\n                \"width\", 0,\n                \"height\", 0) : serializeArgs(args),\n            out = R._engine.image(paper, attrs, group);\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.text\n     [ method ]\n     **\n     * Draws a text string. If you need line breaks, put \\n in the string.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate position\n     - y (number) y coordinate position\n     - text (string) The text string to draw\n     = (object) Raphal element object with type text\n     **\n     > Usage\n     | var t = paper.text(50, 50, \"Raphal\\nkicks\\nbutt!\");\n    \\*/\n    paperproto.text = function() {\n        var paper = this,\n            args = getArrayCopy(arguments),\n            group = lastArgIfGroup(args, true),\n            attrs = paper._addDefAttribs() ? serializeArgs(args,\n                \"x\", 0,\n                \"y\", 0,\n                \"text\", E,\n                \"stroke\", NONE,\n                \"fill\", BLACK,\n                \"text-anchor\", \"middle\",\n                \"vertical-align\", \"middle\"): serializeArgs(args),\n\n            out = R._engine.text(paper, attrs, group, args[1]);\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper._addDefAttribs\n     [ method ]\n     **\n     * Whether we need to set default attributes or not\n    \\*/\n    paperproto._addDefAttribs = function () {\n        // For SVG browsers and if paper has flag set for not to use default attributes\n        return !(R.svg && this.config && this.config.noDefaultAttribs)\n    };\n\n    /*\\\n     * Paper.setConfig\n     [ method ]\n     **\n     * If you need to store any configuration in paper, call this method\n     **\n     > Parameters\n     **\n     - key (String) key name of the key-value pair\n     - value (String or number) value of the key-value pair\n    \\*/\n    paperproto.setConfig = function (key, value) {\n        var paper = this;\n\n        if ((key !== undefined) && (value !== undefined)) {\n            paper.config = paper.config || {};\n            paper.config[key] = value;\n        }\n        return paper.config;\n    };\n\n    /*\\\n     * Paper._createDOMNodes\n     [ method ]\n     **\n     * Create DOM nodes with nested children\n     **\n     > Parameters\n     **\n     - parentElem (object) parent element node\n     - elemObj (object) nested input object to create elements\n     - returnObj (object) object reference which will be returned\n     **\n     > Usage\n     | paper._createDOMNodes(parentElementNode, {\n     |       tagName: 'filter',\n     |       id: 'filter-0',\n     |       width: '200%',\n     |       height: '200%',\n     |       children: [{\n     |           tagName: 'feOffset',\n     |           result: 'offOut',\n     |           in: 'SourceGraphic',\n     |           dx: '1',\n     |           dy: '1'\n     |       }, {\n     |           tagName: 'feColorMatrix',\n     |           result: 'matrixOut',\n     |           in: 'offOut',\n     |           type: 'matrix',\n     |           values: '0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0'\n     |       }, {\n     |           tagName: 'feGaussianBlur',\n     |           result: 'blurOut',\n     |           in: 'matrixOut',\n     |           stdDeviation: '1'\n     |       }, {\n     |           tagName: 'feComposite',\n     |           in: 'SourceGraphic',\n     |           in2: 'blurOut',\n     |           operator: 'over'\n     |       }]\n     |   });\n    \\*/\n    paperproto._createDOMNodes = function(parentElem, elementObj, returnObj) {\n        var paper = this,\n            ele,\n            i,\n            len,\n            attr = {},\n            attrKey,\n            createNode = R._createNode,\n            tagName = elementObj.tagName,\n            children = elementObj.children || [];\n        !returnObj && (returnObj = {});\n        for (attrKey in elementObj) {\n            if (attrKey !== 'tagName' && attrKey !== 'children') {\n                attr[attrKey] = elementObj[attrKey];\n            }\n        }\n\n        !attr.id && (attr.id = R.getElementID(R.createUUID()));\n\n        if (!paper.canvas.getElementById(attr.id) && tagName) {\n            ele = parentElem.appendChild(createNode(tagName, attr));\n            returnObj.element = ele;\n            returnObj.id = attr.id;\n            len = children.length;\n            (len > 0) && (returnObj.children = []);\n            for (i = 0; i < len; i++) {\n                returnObj.children[i] = {};\n                paper._createDOMNodes(ele, children[i], returnObj.children[i]);\n            }\n        }\n        return returnObj;\n    };\n\n    /*\\\n     * Paper.addDefs\n     [ method ]\n     **\n     * Add definitions in paper\n     **\n     > Parameters\n     **\n     - elemObj (object) nested input object to create elements\n     **\n     > Usage\n     | var ob = paper.addDefs({\n     |   filter0: { // key\n     |       tagName: 'filter',\n     |       id: 'filter-0',\n     |       width: '200%',\n     |       height: '200%',\n     |       children: [{\n     |           tagName: 'feOffset',\n     |           result: 'offOut',\n     |           in: 'SourceGraphic',\n     |           dx: '1',\n     |           dy: '1'\n     |       }, {\n     |           tagName: 'feColorMatrix',\n     |           result: 'matrixOut',\n     |           in: 'offOut',\n     |           type: 'matrix',\n     |           values: '0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0'\n     |       }, {\n     |           tagName: 'feGaussianBlur',\n     |           result: 'blurOut',\n     |           in: 'matrixOut',\n     |           stdDeviation: '1'\n     |       }, {\n     |           tagName: 'feComposite',\n     |           in: 'SourceGraphic',\n     |           in2: 'blurOut',\n     |           operator: 'over'\n     |       }]\n     |   }\n     | });\n     | // Creates a 'filter' definition element of id, 'filter-0', with width, height as it's attributes\n     | // Creates feOffset, feColorMatrix, feGaussianBlur, feComposite as children elements\n     | // under the 'filter' definition element\n    \\*/\n    paperproto.addDefs = function (elemObj) {\n        if (!R.svg) {\n            return;\n        }\n        var paper = this,\n            key,\n            returnObj = {},\n            defs = paper.defs;\n\n        for (key in elemObj) {\n            returnObj[key] = {};\n            paper._createDOMNodes(defs, elemObj[key], returnObj[key]);\n        }\n        return returnObj;\n    };\n\n    /*\\\n     * Paper.setSize\n     [ method ]\n     **\n     * If you need to change dimensions of the canvas call this method\n     **\n     > Parameters\n     **\n     - width (number) new width of the canvas\n     - height (number) new height of the canvas\n    \\*/\n    paperproto.setSize = function(width, height) {\n        return R._engine.setSize.call(this, width, height);\n    };\n\n    /*\\\n     * paper.setDimension\n     [ method ]\n     **\n     * If you need to change dimensions of the canvas call this method\n     **\n     > Parameters\n     **\n     - paramsObj (Object or number)\n        - paramsObj (Object)\n        **\n        > Properties of paramsObj\n        - width (number) new width of the canvas\n        - height (number) new height of the canvas\n        **\n        - paramsObj (number) new width of the canvas\n        **\n     - height (number) new height of the canvas\n    \\*/\n    paperproto.setDimension = function(paramsObj, height) {\n        var paper = this,\n            width;\n        // Check if the first argument is an object or not\n        if (typeof(paramsObj) === OBJECT) {\n            width = paramsObj.width;\n            height = paramsObj.height;\n            paper.setSize(paramsObj.width, paramsObj.height);\n        }\n        else {\n            width = paramsObj;\n            paper.setSize(width, height);\n        }\n    };\n\n    paperproto.attr = function (name) {\n        var element = this;\n        if (name == null) {\n            return {\n                width : element.width,\n                height : element.height\n            };\n        }\n        if (R.is(name, STRING)) {\n            return element[name];\n        }\n\n        element.setDimension(name);\n        return element;\n    };\n\n    paperproto.status = function(anim, value) {\n        return elproto.status.call(this, anim, value);\n    };\n\n    // Works exactly as paper.animateWith()\n    paperproto.animateWith = function(el, anim, params, ms, easing, callback, configObject) {\n        return elproto.animateWith.call(this, el, anim, params, ms, easing, callback, configObject);\n    };\n\n    /*\\\n     * Paper.animate\n     [ method ]\n     **\n     * If you need to animate dimensions of the canvas call this method\n     **\n     > Parameters\n     **\n     - paramsObj (Object)\n        > Properties of paramsObj\n        **\n        - width (number) new width of the canvas\n        - height (number) new height of the canvas\n     - duration (number) time stretch in milliseconds to complete animation\n     - effect (String) animation style\n     - callback (function reference) method which will execute at end of animation\n    \\*/\n    paperproto.animate = function(params, ms, easing, callback) {\n        return elproto.animate.call(this, params, ms, easing, callback);\n    };\n\n    /*\\\n     * Paper.setViewBox\n     [ method ]\n     **\n     * Sets the view box of the paper. Practically it gives you ability to zoom and pan whole paper surface by\n     * specifying new boundaries.\n     **\n     > Parameters\n     **\n     - x (number) new x position, default is `0`\n     - y (number) new y position, default is `0`\n     - w (number) new width of the canvas\n     - h (number) new height of the canvas\n     - fit (boolean) `true` if you want graphics to fit into new boundary box\n    \\*/\n    paperproto.setViewBox = function(x, y, w, h, fit) {\n        return R._engine.setViewBox.call(this, x, y, w, h, fit);\n    };\n\n    paperproto.getById = function (id) {\n        return this._elementsById[id] || null;\n    };\n\n    /*\\\n     * Paper.top\n     [ property ]\n     **\n     * Points to the topmost element on the paper\n    \\*/\n    /*\\\n     * Paper.bottom\n     [ property ]\n     **\n     * Points to the bottom element on the paper\n    \\*/\n    paperproto.top = paperproto.bottom = null;\n\n    /*\\\n     * Paper.raphael\n     [ property ]\n     **\n     * Points to the @Raphael object/function\n    \\*/\n    paperproto.raphael = R;\n\n    function x_y() {\n        return this.x + S + this.y;\n    };\n    function x_y_w_h() {\n        return this.x + S + this.y + S + this.width + \" \\xd7 \" + this.height;\n    };\n\n    /*\\\n     * Element.getBBox\n     [ method ]\n     **\n     * Return bounding box for a given element\n     **\n     > Parameters\n     **\n     - isWithoutTransform (boolean) flag, `true` if you want to have bounding box before transformations. Default is `false`.\n     = (object) Bounding box object:\n     o {\n     o     x: (number) top left corner x\n     o     y: (number) top left corner y\n     o     x2: (number) bottom right corner x\n     o     y2: (number) bottom right corner y\n     o     width: (number) width\n     o     height: (number) height\n     o }\n    \\*/\n    elproto.getBBox = function(isWithoutTransform) {\n        if (this.removed) {\n            return {};\n        }\n        var _ = this._;\n        if (isWithoutTransform) {\n            if (_.dirty || !_.bboxwt) {\n                this.realPath = getPath[this.type](this);\n                _.bboxwt = pathDimensions(this.realPath);\n                _.bboxwt.toString = x_y_w_h;\n                _.dirty = 0;\n            }\n            return _.bboxwt;\n        }\n        if (_.dirty || _.dirtyT || !_.bbox) {\n            if (_.dirty || !this.realPath) {\n                _.bboxwt = 0;\n                this.realPath = getPath[this.type](this);\n            }\n            _.bbox = pathDimensions(mapPath(this.realPath, this.matrix));\n            _.bbox.toString = x_y_w_h;\n            _.dirty = _.dirtyT = 0;\n        }\n        return _.bbox;\n    };\n\n    /*\\\n     * Element.clone\n     [ method ]\n     **\n     = (object) clone of a given element\n     **\n    \\*/\n    // elproto.clone = function() {\n    //     if (this.removed) {\n    //         return null;\n    //     }\n    //     var o = this,\n    //         out = o.paper[o.type]().attr(o.attr());\n    //     o.__set__ && o.__set__.push(out);\n    //     return out;\n    // };\n\n    /*\\\n     * Element.clone\n     [ method ]\n     **\n      > Parameters\n     **\n     - attrObj (object) set of attributes\n     - group (object) parent node\n     = (object) clone of a given element\n     **\n    \\*/\n    elproto.clone = function(attrObj, group) {\n        if (this.removed) {\n            return null;\n        }\n        var o = this,\n            attr = o.attr(),\n            key,\n            out;\n\n        if (!attrObj) {\n            out = o.paper[o.type]().attr(attr);\n        } else {\n            for (key in attrObj) {\n                attr[key] = attrObj[key];\n            }\n            out = o.paper[o.type](attr, group);\n        }\n        o.__set__ && o.__set__.push(out);\n        return out;\n    };\n\n    var curveslengths = {},\n    getPointAtSegmentLength = function(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length) {\n        if (length == null) {\n            return bezlen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y);\n        } else {\n            return R.findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, getTatLen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length));\n        }\n    },\n    getLengthFactory = function(istotal, subpath) {\n        return function(path, length, onlystart) {\n            path = path2curve(path);\n            var x, y, p, l, sp = E, subpaths = {}, point,\n            len = 0;\n            for (var i = 0, ii = path.length; i < ii; i++) {\n                p = path[i];\n                if (p[0] === strM) {\n                    x = +p[1];\n                    y = +p[2];\n                } else {\n                    l = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n                    if (len + l > length) {\n                        if (subpath && !subpaths.start) {\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n                            sp += [\"C\" + point.start.x, point.start.y, point.m.x, point.m.y, point.x, point.y];\n                            if (onlystart) {\n                                return sp;\n                            }\n                            subpaths.start = sp;\n                            sp = [strM + point.x, point.y + \"C\" + point.n.x, point.n.y, point.end.x, point.end.y, p[5], p[6]].join();\n                            len += l;\n                            x = +p[5];\n                            y = +p[6];\n                            continue;\n                        }\n                        if (!istotal && !subpath) {\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n                            return {\n                                x: point.x,\n                                y: point.y,\n                                alpha: point.alpha\n                            };\n                        }\n                    }\n                    len += l;\n                    x = +p[5];\n                    y = +p[6];\n                }\n                sp += p.shift() + p;\n            }\n            subpaths.end = sp;\n            point = istotal ? len : subpath ? subpaths : R.findDotsAtSegment(x, y, p[0], p[1], p[2], p[3], p[4], p[5], 1);\n            point.alpha && (point = {\n                x: point.x,\n                y: point.y,\n                alpha: point.alpha\n            });\n            return point;\n        };\n    },\n    getTotalLength = getLengthFactory(1),\n    getPointAtLength = getLengthFactory(),\n    getSubpathsAtLength = getLengthFactory(0, 1);\n\n    R.getTotalLength = getTotalLength;\n\n    R.getPointAtLength = getPointAtLength;\n\n    /*\\\n     * Raphael.getTotalLength\n     [ method ]\n     **\n     * Returns length of the given path in pixels.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string.\n     **\n     = (number) length.\n    \\*/\n    elproto.getTotalLength = function() {\n        if (this.type != \"path\") {\n            return;\n        }\n        if (this.node.getTotalLength) {\n            return this.node.getTotalLength();\n        }\n        return getTotalLength(this.attrs.path);\n    };\n\n    /*\\\n     * Raphael.getPointAtLength\n     [ method ]\n     **\n     * Return coordinates of the point located at the given length on the given path.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string\n     - length (number)\n     **\n     = (object) representation of the point:\n     o {\n     o     x: (number) x coordinate\n     o     y: (number) y coordinate\n     o     alpha: (number) angle of derivative\n     o }\n    \\*/\n    elproto.getPointAtLength = function(length) {\n        if (this.type != \"path\") {\n            return;\n        }\n        return getPointAtLength(this.attrs.path, length);\n    };\n\n    /*\\\n     * Raphael.easing_formulas\n     [ property ]\n     **\n     * Object that contains easing formulas for animation. You could extend it with your own. By default it has following list of easing:\n     # <ul>\n     #     <li>linear</li>\n     #     <li>&lt; or easeIn or ease-in</li>\n     #     <li>> or easeOut or ease-out</li>\n     #     <li>&lt;> or easeInOut or ease-in-out</li>\n     #     <li>backIn or back-in</li>\n     #     <li>backOut or back-out</li>\n     #     <li>elastic</li>\n     #     <li>bounce</li>\n     # </ul>\n     # <p>See also <a href=\"http://raphaeljs.com/easing.html\">Easing demo</a>.</p>\n    \\*/\n    var ef = R.easing_formulas = {\n        linear: function(n) {\n            return n;\n        },\n        \"<\": function(n) {\n            return pow(n, 1.7);\n        },\n        \">\": function(n) {\n            return pow(n, .48);\n        },\n        \"<>\": function(n) {\n            var q = .48 - n / 1.04,\n            Q = mathSqrt(.1734 + q * q),\n            x = Q - q,\n            X = pow(abs(x), 1 / 3) * (x < 0 ? -1 : 1),\n            y = -Q - q,\n            Y = pow(abs(y), 1 / 3) * (y < 0 ? -1 : 1),\n            t = X + Y + .5;\n            return (1 - t) * 3 * t * t + t * t * t;\n        },\n        backIn: function(n) {\n            var s = 1.70158;\n            return n * n * ((s + 1) * n - s);\n        },\n        backOut: function(n) {\n            n = n - 1;\n            var s = 1.70158;\n            return n * n * ((s + 1) * n + s) + 1;\n        },\n        elastic: function(n) {\n            if (n === !!n) {\n                return n;\n            }\n            return pow(2, -10 * n) * mathSin((n - .075) * (2 * PI) / .3) + 1;\n        },\n        bounce: function(n) {\n            var s = 7.5625,\n            p = 2.75,\n            l;\n            if (n < (1 / p)) {\n                l = s * n * n;\n            } else {\n                if (n < (2 / p)) {\n                    n -= (1.5 / p);\n                    l = s * n * n + .75;\n                } else {\n                    if (n < (2.5 / p)) {\n                        n -= (2.25 / p);\n                        l = s * n * n + .9375;\n                    } else {\n                        n -= (2.625 / p);\n                        l = s * n * n + .984375;\n                    }\n                }\n            }\n            return l;\n        },\n        // used in line chart anchor animation\n        oneBounceOut: function (n) {\n            var top = 120;\n            if (n <= 0.9) {\n                return ef.easeIn(n) * 1.33;\n            }\n            return 1.2 - n / 5;\n        },\n        // Used in translating bubble plots\n        elasticOnce: function(n) {\n            var p = 0.9;\n            if (n === !!n) {\n                return n;\n            }\n            return Math.pow(2, -10 * n) * Math.sin((n - p / 4) * (2 * Math.PI) / p) + 1;\n        },\n        // accelerating from zero velocity\n        easeInQuad: function (t) { return t*t },\n        // decelerating to zero velocity\n        easeOutQuad: function (t) { return t*(2-t) },\n        // acceleration until halfway, then deceleration\n        easeInOutQuad: function (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },\n        // accelerating from zero velocity\n        easeInCubic: function (t) { return t*t*t },\n        // decelerating to zero velocity\n        easeOutCubic: function (t) { return (--t)*t*t+1 },\n        // acceleration until halfway, then deceleration\n        easeInOutCubic: function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },\n        // accelerating from zero velocity\n        easeInQuart: function (t) { return t*t*t*t },\n        // decelerating to zero velocity\n        easeOutQuart: function (t) { return 1-(--t)*t*t*t },\n        // acceleration until halfway, then deceleration\n        easeInOutQuart: function (t) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },\n        // accelerating from zero velocity\n        easeInQuint: function (t) { return t*t*t*t*t },\n        // decelerating to zero velocity\n        easeOutQuint: function (t) { return 1+(--t)*t*t*t*t },\n        // acceleration until halfway, then deceleration\n        easeInOutQuint: function (t) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t }\n    };\n    ef.easeIn = ef[\"ease-in\"] = ef[\"<\"];\n    ef.easeOut = ef[\"ease-out\"] = ef[\">\"];\n    ef.easeInOut = ef[\"ease-in-out\"] = ef[\"<>\"];\n    ef[\"back-in\"] = ef.backIn;\n    ef[\"back-out\"] = ef.backOut;\n\n    var animationElements = [],\n    requestAnimFrame,\n    // This a temporary fix so that animation can be handled from the scheduler module.\n    animation = function() {\n        var Now = +new Date,\n            l = 0,\n            deqArr = [],\n            i = 0,\n            ll = 0,\n            tmpOpacity,\n            radial,\n            animFrameFn;\n\n        for (; l < animationElements.length; l++) {\n            var e = animationElements[l];\n            if (e.el.removed || e.paused || e.parentEl && e.parentEl.e && e.parentEl.e.paused) {\n                continue;\n            }\n            var time = Now - e.start,\n            ms = e.ms,\n            easing = e.easing,\n            from = e.from,\n            diff = e.diff,\n            to = e.to,\n            t = e.t,\n            that = e.el,\n            set = {},\n            now,\n            origms,\n            init = {},\n            executeEvent = !R.stopPartialEventPropagation,\n            key,\n            i = 0,\n            peekVal = e.el && e.el.animElements &&\n                e.el.animElements.peek();\n            // Checking hooks\n            while (peekVal && peekVal.pos <= time / ms) {\n                deqArr.push(e.el.animElements.deq());\n                peekVal = e.el.animElements.peek();\n            }\n            if (e.initstatus) {\n                time = (e.initstatus * e.anim.top - e.prev) / (e.percent - e.prev) * ms;\n                e.status = e.initstatus;\n                delete e.initstatus;\n                if (e.stop) {\n                    delete e.el;\n                    animationElements.splice(l--, 1);\n                }\n            } else {\n                e.status = (e.prev + (e.percent - e.prev) * (time / ms)) / e.anim.top;\n            }\n            origms = ms;\n            // If has parentEl\n            if (e.parentEl && e.parentEl.animElements) {\n                ms = e.delayend - e.delaystart;\n                time = e.parentEl.cPos - e.delaystart;\n            } else if (e.el.animElements) {\n                e.el.cPos = time / ms;\n            }\n            if (time < 0) {\n                continue;\n            }\n            if (time < ms) {\n                var pos = easing(time / ms);\n                ms = origms;\n                for (var attr in from)\n                    if (from[HAS](attr)) {\n                        switch (availableAnimAttrs[attr]) {\n                            case 'number':\n                                now = +from[attr] + pos * ms * diff[attr];\n                                break;\n                            case \"colour\":\n                                    if (!diff[attr].length) {\n                                        tmpOpacity = (from[attr].opacity + pos * ms * diff[attr].opacity);\n                                        if(isNaN(tmpOpacity)){\n                                            tmpOpacity = 1;\n                                        }\n                                        now = \"rgba(\" + [\n                                            upto255(round(from[attr].r + pos * ms * diff[attr].r)),\n                                            upto255(round(from[attr].g + pos * ms * diff[attr].g)),\n                                            upto255(round(from[attr].b + pos * ms * diff[attr].b)),\n                                            tmpOpacity\n                                        ].join(COMMA) + \")\";\n                                    } else {\n                                        now = [];\n                                        for (i = 0, ii = from[attr].length; i < ii; ++i) {\n                                            if (i === 0) {\n                                                if(from[attr].isRadial || diff[attr].isRadial){\n                                                    radial = \"xr(\";\n                                                    radial += from[attr][0].f1 * (1 - pos) + diff[attr][0].f1 * pos || E;\n                                                    radial += ',';\n                                                    radial += from[attr][0].f2 * (1 - pos) + diff[attr][0].f2 * pos || E;\n                                                    radial += ',';\n                                                    radial += (from[attr][0].f3 * (1 - pos) + diff[attr][0].f3 * pos) * 100 || E;\n                                                    radial += '%,';\n                                                    radial += from[attr][0].f4 * (1 - pos) + diff[attr][0].f4 * pos || E;\n                                                    radial += ',';\n                                                    radial += from[attr][0].f5 * (1 - pos) + diff[attr][0].f5 * pos;\n                                                    radial += ',';\n                                                    radial += from[attr][0].f6;\n                                                    radial += ')';\n                                                    now.push(radial)\n                                                } else {\n                                                    now.push((from[attr][i] * (1 - pos)) + (pos * diff[attr][i]));\n                                                    if (now[0] <= 0) {\n                                                        now[0] += 360;\n                                                    }\n                                                }\n                                            } else {\n                                                now.push(\"rgba(\" + [\n                                                    upto255(round(from[attr][i].r + pos * ms * diff[attr][i].r)),\n                                                    upto255(round(from[attr][i].g + pos * ms * diff[attr][i].g)),\n                                                    upto255(round(from[attr][i].b + pos * ms * diff[attr][i].b)),\n                                                    (from[attr][i].opacity + pos * ms * diff[attr][i].opacity)\n                                                ].join(COMMA) + \"):\" + from[attr][i].position);\n                                            }\n                                        }\n                                        now = now.join(\"-\");\n                                        // If radial focus doesnt have a separator\n                                        if(from[attr].isRadial || diff[attr].isRadial){\n                                            now = now.replace('-', E);\n                                        }\n                                    }\n                                    break;\n                                case \"path\":\n                                    now = [];\n                                    for (var i = 0, ii = from[attr].length; i < ii; i++) {\n                                        now[i] = [from[attr][i][0]];\n                                        var jj;\n                                        jj = from[attr][i] ? from[attr][i].length : 0;\n                                        for (var j = 1  ; j < jj; j++) {\n                                            now[i][j] = (+from[attr][i][j] + pos * ms * diff[attr][i][j]).toFixed(4);\n                                        }\n                                        now[i] = now[i].join(S);\n                                    }\n                                    now = now.join(S);\n                                    break;\n                                case \"transform\":\n                                if (diff[attr].real) {\n                                    now = [];\n                                    for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                        now[i] = [from[attr][i][0]];\n                                        for (j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                            now[i][j] = from[attr][i][j] + pos * ms * diff[attr][i][j];\n                                        }\n                                    }\n                                } else {\n                                    var get = function(i) {\n                                        return +from[attr][i] + pos * ms * diff[attr][i];\n                                    };\n                                    // now = [[\"r\", get(2), 0, 0], [\"t\", get(3), get(4)], [\"s\", get(0), get(1), 0, 0]];\n                                    now = [[mStr, get(0), get(1), get(2), get(3), get(4), get(5)]];\n                                }\n                                break;\n                            case \"csv\":\n                                if (attr === \"clip-rect\") {\n                                    now = [];\n                                    i = 4;\n                                    while (i--) {\n                                        now[i] = +from[attr][i] + pos * ms * diff[attr][i];\n                                    }\n                                }\n                                break;\n                            case \"text-bound\":\n                                now = [][CONCAT](from[attr]);\n                                break;\n                            default:\n                                var from2 = [][CONCAT](from[attr]);\n                                now = [];\n                                i = that.ca[attr].length;\n                                while (i--) {\n                                    now[i] = +from2[i] + pos * ms * diff[attr][i];\n                                }\n                                break;\n                        }\n                        set[attr] = now;\n                    }\n                that.attr(set);\n                if (executeEvent) {\n                    (function(id, that, anim) {\n                        setTimeout(function() {\n                            eve(\"raphael.anim.frame.\" + id, that, anim);\n                        });\n                    })(that.id, that, e.anim);\n                }\n            } else {\n                (function(f, el, a) {\n                    setTimeout(function() {\n                        executeEvent && eve(\"raphael.anim.frame.\" + el.id, el, a);\n                        executeEvent && eve(\"raphael.anim.finish.\" + el.id, el, a);\n                        R.is(f, FUNCTION) && f.call(el);\n                    });\n                })(e.callback, that, e.anim);\n\n                that.attr(to);\n                delete e.el;\n                animationElements.splice(l--, 1);\n                if (e.repeat > 1 && !e.next) {\n                    for (key in to)\n                        if (to[HAS](key)) {\n                            init[key] = e.totalOrigin[key];\n                        }\n                    e.el.attr(init);\n                    runAnimation(e.anim, e.el, e.anim.percents[0], null, e.totalOrigin, e.repeat - 1);\n                }\n                if (e.next && !e.stop) {\n                    runAnimation(e.anim, e.el, e.next, null, e.totalOrigin, e.repeat);\n                }\n            }\n        }\n        R.svg && that && that.paper && that.paper.safari();\n\n         // Starting animation on timer 0\n        for (l = 0, ll = deqArr.length; l < ll; ++l) {\n            // lib.schedular.addJob((function (l) {\n            //     return function ()  {\n            //         runAnimation.apply(null, deqArr[l].params);\n            //     };\n            // })(l), lib.priorityList.instant);\n            animFrameFn = R.getInstantAnimFrameFn();\n            animFrameFn((function (l) {\n                return function ()  {\n                    runAnimation.apply(null, deqArr[l].params);\n                };\n            })(l));\n        }\n\n        animationElements.length && (requestAnimFrame || R.getAnimFrameFn())(animation);\n    },\n    upto255 = function(color) {\n        return color > 255 ? 255 : color < 0 ? 0 : color;\n    },\n    checkPercentage = function (num) {\n        num > 1 && (num = 1);\n        num < 0 && (num = 0);\n        return num;\n    };\n\n    R.getAnimFrameFn = function () {\n        return requestAnimFrame = R.requestAnimFrame ||\n        _win.webkitRequestAnimationFrame ||\n        _win.mozRequestAnimationFrame ||\n        _win.oRequestAnimationFrame ||\n        _win.msRequestAnimationFrame ||\n        function(callback) {\n            setTimeout(callback, 16);\n        };\n    };\n\n    R.getInstantAnimFrameFn = function () {\n        return R.instantRequestAnimFrame ||\n        _win.webkitRequestAnimationFrame ||\n        _win.mozRequestAnimationFrame ||\n        _win.oRequestAnimationFrame ||\n        _win.msRequestAnimationFrame ||\n        function(callback) {\n            setTimeout(callback, 16);\n        };\n    };\n\n    /*\\\n     * Element.animateWith\n     [ method ]\n     **\n     * Acts similar to @Element.animate, but ensure that given animation runs in sync with another given element.\n     **\n     > Parameters\n     **\n     - el (object) element to sync with\n     - anim (object) animation to sync with\n     - params (object) #optional final attributes for the element, see also @Element.attr\n     - ms (number) #optional number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept on of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     - configObject (object) #optional takes an object with optional properties like\n        start(what percentage to start aniation), end(what percentage to end animation), hookFn(function\n        to be called before applying animation), smartMorph(whether to use smartMorphing in path animation)\n     * or\n     - element (object) element to sync with\n     - anim (object) animation to sync with\n     - animation (object) #optional animation object, see @Raphael.animation\n     **\n     = (object) original element\n    \\*/\n    elproto.animateWith = function(el, anim, params, ms, easing, callback, configObject) {\n        var element = this,\n            refOb = {},\n            key;\n        // Copying the reference object\n        configObject = configObject || {};\n        for (key in configObject) {\n            if (configObject.hasOwnProperty(key)) {\n                refOb[key] = configObject[key];\n            }\n        }\n        configObject = refOb;\n        if (element.removed) {\n            callback && callback.call(element);\n            return element;\n        }\n        if (ms === 0) {\n            if (R.is(callback, FUNCTION)) {\n                setTimeout(function () {\n                    callback.call(element);\n                }, 0);\n            }\n            return element.attr (params);\n        }\n        var a = params instanceof Animation ? params : R.animation(params, ms, easing, callback),\n        x, y;\n        configObject.start = checkPercentage(configObject.start || 0);\n        configObject.end = checkPercentage(configObject.end || 1);\n        if (configObject.start >= configObject.end){\n            configObject.start = configObject.end;\n        }\n\n        if (!configObject.from && configObject.start > 0.01) {\n            // Initializing new Priority Queue if not present already\n            el.animElements = el.animElements || new PriorityQueue(function comparator (a, b) {\n                return b.pos - a.pos;\n            });\n            el.animElements.enq({\n                pos: configObject.start,\n                attr: configObject.start === configObject.end,\n                params: [a, element, a.percents[0], null, element.attr(),undefined, el, {\n                    start: configObject.start,\n                    end: configObject.end,\n                    smartMorph: configObject.smartMorph,\n                    hookFn: configObject.hookFn\n                }, params],\n                executeOb: {\n                    el: this,\n                    attrs: params,\n                    callback: callback,\n                    hookFn: configObject.hookFn\n                }\n            });\n        } else {\n            runAnimation(a, element, a.percents[0], null, element.attr(),undefined, el, configObject);\n        }\n        for (var i = 0, ii = animationElements.length; i < ii; i++) {\n            if (animationElements[i].anim === anim && animationElements[i].el === el) {\n                animationElements[ii - 1].start = animationElements[i].start;\n                break;\n            }\n        }\n        return element;\n    // var a = params ? R.animation(params, ms, easing, callback) : anim,\n    //     status = element.status(anim);\n    // return this.animate(a).status(a, status * anim.ms / a.ms);\n    };\n    function CubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {\n        var cx = 3 * p1x,\n        bx = 3 * (p2x - p1x) - cx,\n        ax = 1 - cx - bx,\n        cy = 3 * p1y,\n        by = 3 * (p2y - p1y) - cy,\n        ay = 1 - cy - by;\n        function sampleCurveX(t) {\n            return ((ax * t + bx) * t + cx) * t;\n        }\n        function solve(x, epsilon) {\n            var t = solveCurveX(x, epsilon);\n            return ((ay * t + by) * t + cy) * t;\n        }\n        function solveCurveX(x, epsilon) {\n            var t0, t1, t2, x2, d2, i;\n            for (t2 = x, i = 0; i < 8; i++) {\n                x2 = sampleCurveX(t2) - x;\n                if (abs(x2) < epsilon) {\n                    return t2;\n                }\n                d2 = (3 * ax * t2 + 2 * bx) * t2 + cx;\n                if (abs(d2) < 1e-6) {\n                    break;\n                }\n                t2 = t2 - x2 / d2;\n            }\n            t0 = 0;\n            t1 = 1;\n            t2 = x;\n            if (t2 < t0) {\n                return t0;\n            }\n            if (t2 > t1) {\n                return t1;\n            }\n            while (t0 < t1) {\n                x2 = sampleCurveX(t2);\n                if (abs(x2 - x) < epsilon) {\n                    return t2;\n                }\n                if (x > x2) {\n                    t0 = t2;\n                } else {\n                    t1 = t2;\n                }\n                t2 = (t1 - t0) / 2 + t0;\n            }\n            return t2;\n        }\n        return solve(t, 1 / (200 * duration));\n    }\n    elproto.onAnimation = function(f) {\n        f ? eve.on(\"raphael.anim.frame.\" + this.id, f) : eve.unbind(\"raphael.anim.frame.\" + this.id);\n        return this;\n    };\n    function Animation(anim, ms) {\n        var percents = [],\n        newAnim = {};\n        this.ms = ms;\n        this.times = 1;\n        if (anim) {\n            for (var attr in anim)\n                if (anim[HAS](attr)) {\n                    newAnim[toFloat(attr)] = anim[attr];\n                    percents.push(toFloat(attr));\n                }\n            percents.sort(sortByNumber);\n        }\n        this.anim = newAnim;\n        this.top = percents[percents.length - 1];\n        this.percents = percents;\n    }\n\n    /*\\\n     * Animation.delay\n     [ method ]\n     **\n     * Creates a copy of existing animation object with given delay.\n     **\n     > Parameters\n     **\n     - delay (number) number of ms to pass between animation start and actual animation\n     **\n     = (object) new altered Animation object\n     | var anim = Raphael.animation({cx: 10, cy: 20}, 2e3);\n     | circle1.animate(anim); // run the given animation immediately\n     | circle2.animate(anim.delay(500)); // run the given animation after 500 ms\n    \\*/\n    Animation.prototype.delay = function(delay) {\n        var a = new Animation(this.anim, this.ms);\n        a.times = this.times;\n        a.del = +delay || 0;\n        return a;\n    };\n\n    /*\\\n     * Animation.repeat\n     [ method ]\n     **\n     * Creates a copy of existing animation object with given repetition.\n     **\n     > Parameters\n     **\n     - repeat (number) number iterations of animation. For infinite animation pass `Infinity`\n     **\n     = (object) new altered Animation object\n    \\*/\n    Animation.prototype.repeat = function(times) {\n        var a = new Animation(this.anim, this.ms);\n        a.del = this.del;\n        a.times = math.floor(mmax(times, 0)) || 1;\n        return a;\n    };\n\n    // Taking converToRadialIfOneRadial function out of colorNormalizer inorder to fix RED-8338\n    var converToRadialIfOneRadial = function (a, b, end) {\n        var angle = 0;\n        if(a.isRadial && !b.isRadial){\n            angle += +b[0];\n            b[0] = {\n                f1: 0,\n                f2: 0,\n                f3: 0,\n                f4: 0,\n                f5: 0,\n                f6: E\n            }\n            b.isRadial = true;\n        }\n\n        if(!end) {\n            converToRadialIfOneRadial(b, a, true);\n        }\n    };\n    /*\n    ** Function to convert two color string in array format such that\n    ** it is animatabale\n    ** @param {string} c1 color 1\n    ** @param {string} c2 color 2\n    ** @param {function} function to getRGB\n    */\n    function colorNormalizer(c1, c2, getRGB) {\n        \"use strict\";\n        var colorAr1,\n            colorAr2,\n            i = 0,\n            ii = 0,\n            j = 0,\n            newColArr = [],\n            newColArr2 = [],\n            temp = {},\n            pos = 0,\n            uniqArr = [];\n\n        c1 = c1.constructor === Array ? c1[0]: c1;\n        c2 = c2.constructor === Array ? c2[0]: c2;\n\n        colorAr1 = c1.split('-');\n        colorAr2 = c2.split('-');\n\n        if (colorAr1.length === 1 && colorAr2.length === 1) {\n            return [c1, c2];\n        }\n        // Convert colors to linear format, and mark if any of them is radial\n        // linear to radial animation is not correct\n        colorAr1 = allToLinear(colorAr1);\n        colorAr2 = allToLinear(colorAr2);\n\n        // Handling if default color was added to one\n        // and not other\n        if (!colorAr1.defaultAngleSet && colorAr2.defaultAngleSet) {\n            colorAr2[0] = colorAr1[0];\n        }\n\n        if (!colorAr2.defaultAngleSet && colorAr1.defaultAngleSet) {\n            colorAr1[0] = colorAr2[0];\n        }\n\n        // If one is radial convert both to radial\n        converToRadialIfOneRadial(colorAr1, colorAr2);\n        /* Making a unique array to store all unique\n            color positions of both color so that new color\n            can be generated that have same amount of positions\n            added */\n        for(i = 1, ii = colorAr1.length; i < ii; ++i){\n            pos = colorAr1[i].position;\n            // if(uniqArr.indexOf(pos) === -1){\n                uniqArr.push(pos);\n            // }\n        }\n        for(i = 1, ii = colorAr2.length; i < ii; ++i){\n            pos = colorAr2[i].position;\n            if(uniqArr.indexOf(pos) === -1){\n                uniqArr.push(pos);\n            }\n        }\n        uniqArr.push(0);\n        // sort the positions\n        uniqArr.sort(function(a,b){return a - b});\n        // generating new colors from the existing colors\n        newColArr = [colorAr1[0]];\n        for (i = 1, ii = uniqArr.length; i < ii; ++i) {\n            pos = uniqArr[i];\n            temp = colorAr1.getColorAtPosition(pos);\n            newColArr.push(temp);\n        }\n        newColArr2 = [colorAr2[0]];\n        for (i = 1, ii = uniqArr.length; i < ii; ++i) {\n            pos = uniqArr[i];\n            temp = colorAr2.getColorAtPosition(pos);\n            newColArr2.push(temp);\n        }\n\n        // copying isRadial property\n        newColArr.isRadial = colorAr1.isRadial;\n        newColArr2.isRadial = colorAr2.isRadial;\n        return [newColArr, newColArr2];\n        // Getting all unique points\n\n        // Function to convert color to array in linear format\n        // and mark if any one of them is radial\n        function allToLinear(arr) {\n            var i = 0,\n                ii = 0,\n                j = 0,\n                item = {},\n                temp = [],\n                temp2 = {},\n                key,\n                prevVal = 0,\n                lastVal = 0,\n                counter = 0,\n                rPos = 0,\n                openBrPos = 0,\n                closedBrPos = 0,\n                radial = {\n                    f1 : 0.5,\n                    f2 : 0.5\n                };\n\n            // Solid color operation\n            if (arr.length === 1) {\n                if(arr[0] === NONE){\n                    arr[0] = \"rgba(0,0,0,0)\";\n                }\n                // Push angle zero to start\n                arr.unshift(0);\n                // Mentioning that a default angle was added\n                arr.defaultAngleSet = true;\n            }\n\n            // Convert angle to number\n            if (isNaN(arr[0])) {\n                // Check if is radial\n                if(~\"rx\".indexOf(arr[0].charAt(0))){\n                    arr.isRadial = true;\n\n                    rPos = 1;\n                    // check if focus if provided\n                    // otherwise use default focus\n                    if(arr[0].indexOf(')') !== -1){\n                        rPos = arr[0].indexOf(')');\n                        openBrPos = arr[0].indexOf('(') + 1;\n                        closedBrPos = rPos;\n                        temp = arr[0].substr(openBrPos, closedBrPos - openBrPos).split(',');\n                        radial.f1 = parseFloat(temp[0]) || 0;\n                        radial.f2 = parseFloat(temp[1]) || 0;\n                        if (~temp[2].indexOf('%')) {\n                            temp[2] = parseFloat(temp[2]) / 100;\n                        }\n                        radial.f3 = parseFloat(temp[2]) || 0;\n                        radial.f4 = parseFloat(temp[3]) || 0;\n                        radial.f5 = parseFloat(temp[4]) || 0;\n                        radial.f6 = temp[5];\n                    }\n                    arr[0] = arr[0].substr(closedBrPos + 1);\n                    arr.unshift(radial);\n\n                } else {\n                    arr[0] = 0;\n                }\n            } else {\n                arr[0] = +arr[0];\n            }\n\n            for (i = 1, ii = arr.length; i < ii; ++i) {\n                temp = arr[i].split(\":\");\n                // conver first element to rgb object and store\n                temp2 = getRGB(temp[0]);\n                arr[i] = {};\n                arr[i].r = temp2.r;\n                arr[i].g = temp2.g;\n                arr[i].b = temp2.b;\n                arr[i].opacity = temp2.opacity;\n                // if opacity not present set  to 1\n                arr[i].opacity = +arr[i].opacity;\n                if (isNaN(arr[i].opacity)) {\n                    arr[i].opacity = 1;\n                }\n                // set the position\n                arr[i].position = +temp[1];\n            }\n\n            // Sorting array according to position\n            // angle and radial focus should be elemnt 0\n            arr.sort(function(a, b) {\n                if (typeof a === \"number\" || a.f1) {\n                    return -1;\n                }\n                if (typeof b === \"number\" || a.f2) {\n                    return 1;\n                }\n                if (isNaN(a.position) && isNaN(b.position)) {\n                    return 0;\n                }\n                if (isNaN(a.position)) {\n                    return -1;\n                }\n                if (isNaN(b.position)) {\n                    return 1;\n                }\n                return a.position - b.position;\n            });\n\n            // If first position is not zero\n            // add new color with position zero\n            if (+arr[1].position !== 0) {\n                if (isNaN(arr[1].position)) {\n                    arr[1].position = 0;\n                } else {\n                    temp2 = {};\n                    for (key in arr[1]) {\n                        temp2[key] = arr[1][key];\n                    }\n                    temp2.position = 0;\n                    // Shifting array to add current object\n                    // in position 1\n                    arr.push({});\n                    for (i = arr.length - 1; i !== 1; --i) {\n                        arr[i] = arr[i - 1];\n                    }\n                    arr[1] = temp2;\n                }\n            }\n            // index to last position\n            ii = arr.length - 1;\n            // If last position is not 100\n            // add new color with position 100\n            if (arr[ii].position !== 100) {\n                if (isNaN(arr[ii].position)) {\n                    arr[ii].position = 100;\n                } else {\n                    temp2 = {};\n                    for (key in arr[ii]) {\n                        temp2[key] = arr[ii][key];\n                    }\n                    temp2.position = 100;\n                    // Shifting array to add current object\n                    // in position 1\n                    arr.push(temp2);\n                }\n            }\n\n            // Filling correct position value whereever NaN found\n            for (i = 2, ii = arr.length; i < ii; ++i) {\n                if (!(arr[i].position)) {\n                    prevVal = arr[i - 1].position;\n                    counter = 1;\n                    for (j = i + 1; j < ii; ++j) {\n                        ++counter;\n                        if (!isNaN(arr[j].position)) {\n                            lastVal = +arr[j].position;\n                            break;\n                        }\n                    }\n                    arr[i].position = prevVal + ((lastVal - prevVal) / counter);\n                }\n            }\n\n            arr.getColorAtPosition = function(pos) {\n                var prevPos = -1,\n                    nextPos = this.length,\n                    i = 1,\n                    ii = this.length,\n                    item = {},\n                    colPrev,\n                    colNext,\n                    ratio = 0,\n                    key = E,\n                    col = { r: 0, g: 0, b: 0 };\n\n                // Critical section; check again\n                for (; i < ii - 1; ++i) {\n                    if (this[i].position <= pos) {\n                        prevPos = i;\n                        nextPos = i + 1;\n                    }\n                    if (!(this[i].position < pos) && this[i].position >= pos) {\n                        nextPos = i;\n                        break;\n                    }\n                }\n                ratio = (pos - this[prevPos].position) / (this[nextPos].position - this[prevPos].position);\n                if (isNaN(ratio)) {\n                    ratio = 0;\n                }\n                for (key in col) {\n                    col[key] = upto255((1 - ratio) * this[prevPos][key] + ratio * this[nextPos][key]);\n                }\n                col.position = pos;\n                col.opacity = (1 - ratio) * this[prevPos][\"opacity\"] + ratio * this[nextPos][\"opacity\"];\n                return col;\n            }\n            return arr;\n        }\n    }\n    /**\n     * Function to make to uncommon path array to a equal length\n     * of path array and same type (L - lineto) to make it animatable\n     * @param {array} path array 1\n     * @param {array} path array 2\n     * @return {object} object containing final 'from' and 'to' path\n     */\n    function pathNormalizer(p1, p2) {\n        'use strict';\n        // Function to convert array to svg path (?) only for curves\n        var finalp1 = [],\n            finalp2 = [],\n            pathArr1 = toSvgPath(p1),\n            pathArr2 = toSvgPath(p2),\n            i = 0,\n            ii = 0,\n            temp,\n            createElementNS = document.createElementNS && document.createElementNS.bind(document),\n            dPath = createElementNS && createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n\n        // If path invalid or svg not supported return\n        if (!pathArr1 || !pathArr2 || !dPath) {\n            return [p1, p2];\n        }\n        if (canFallback(p1, p2)) {\n            return [p1, p2];\n        }\n        // If any of the parameters is\n        // absent return to normal flow\n        if (!p1 || !p2) {\n            return [p1, p2];\n        }\n        // If svg not available return to normal flow\n        if (!document.createElementNS) {\n            return [p1, p2];\n        }\n        // Setting path again\n        pathArr1 = toSvgPath(p1);\n        pathArr2 = toSvgPath(p2);\n        // If invalid path return the original path\n        if(pathArr1.join().indexOf('undefined') !== -1) {\n            return [p1, p2];\n        }\n        if(pathArr2.join().indexOf('undefined') !== -1) {\n            return [p1, p2];\n        }\n        // If svg functions not available return to normal flow\n        if (!dPath.getTotalLength || !dPath.getPointAtLength) {\n            return [p1, p2];\n        }\n        /* Function to check if the current environment\n        ** can animate the path, as pathNormalizer pauses\n        ** getTotalLength and getPointAtLength function of svg\n        ** which are not supported by all browsers\n        */\n        function canFallback (path1, path2) {\n            var str1 = E,\n                str2 = E,\n                testLen,\n                testPoint;\n            // Checking path totoalLength is accurate or not\n            // testing with a known path\n            // this check is for Firefox\n            dPath.setAttribute('d', 'M300 10 L300 300 C50 310,50 640,350 650' +\n                'C600 640,600 310,400 300 L400 10 L295 10');\n            testLen = dPath.getTotalLength();\n            testPoint = dPath.getPointAtLength(10);\n            if (testLen < 1829.1 || testLen > 1829.2) {\n                return true;\n            }\n            if (Math.round(testPoint.x) !== 300 || Math.round(testPoint.y) !== 20) {\n                return true;\n            }\n            // path1 and path2 are in array\n            function trimPathArray (arr) {\n                var i = arr.length;\n                while (i-- - 1) {\n                    if (arr[i].join(E) === arr[i - 1].join(E)) {\n                        arr.pop();\n                    } else {\n                        break;\n                    }\n                }\n            }\n            function getPathFromArray(arr) {\n                var str = E,\n                    i = 0,\n                    ii = arr.length;\n                for (; i < ii; ++i) {\n                    str += arr[i].join(S);\n                }\n                return str;\n            }\n            trimPathArray(path1);\n            trimPathArray(path2);\n            str1 = getPathFromArray(path1);\n            str2 = getPathFromArray(path2);\n            if (str1.split(/[Mm]/).length > 2 || str2.split(/[Mm]/).length > 2) {\n                return false;\n            }\n            if (path1.length === path2.length) {\n                return true;\n            }\n            return false;\n        }\n        /* Convert svg path array to string,\n            Also removes repeated commands */\n        function toSvgPath(arr) {\n            var str = [],\n                i = 0,\n                ii = arr.length,\n                item = [];\n            if (typeof arr === STRING) {\n                return arr;\n            }\n            // Converting the array to string; path type\n            for (i = 0; i < ii; ++i) {\n                if (!arr[i].join){\n                    return;\n                } else {\n                    // Removing continuous Move commands\n                    // Picking up the last one\n                    if ( !i || !arr[i + 1] || arr[i + 1][0] !== 'M' || arr[i][0] !== 'M'){\n                        str.push(arr[i].join(S));\n                    }\n                }\n            }\n            str = str.join(E);\n            str = str.split(/[Mm]/).slice(1);\n            for (i = 0, ii = str.length; i < ii; ++i) {\n                str[i] = 'M' + str[i];\n            }\n            return str;\n        }\n\n        ii = Math.max(pathArr1.length, pathArr2.length);\n        for (i = 0; i < ii; ++i) {\n            temp = _pathNormalizer(pathArr1[i], pathArr2[i]);\n            pathArr1[i] = temp[0];\n            pathArr2[i] = temp[1];\n        }\n        // Convert line path 2 dimensional array to string\n        function linetopath (arr) {\n            var i = 0,\n                ii = 0,\n                str = [];\n            arr = arr || [];\n            ii = arr.length;\n            for (i = 0; i < ii; ++i) {\n                if (arr[i].length - 1) {\n                    str.push(arr[i].join(S));\n                }\n            }\n            return str.join(E);\n        }\n        /* path2curve appends repeated last path command,\n            this function removes it or any other repeated path command */\n        function removeBlanks (arr, pos) {\n            var i = arr.length,\n                j = 0,\n                path;\n            while (i-- - 1) {\n                // Pop if length is zero\n                if (arr[i].slice(1).toString() === arr[i - 1].slice(1).toString()) {\n                    arr.pop();\n                } else {\n                    break;\n                }\n            }\n            if (arr.length === 1 && pos){\n                arr.length = 0;\n            }\n        }\n        /* Divide a path array to number to a given number of times\n            as provided in parameters, All path array should start with M command */\n        function _divide(arr, times) {\n            var resArr = [],\n                locArr = [],\n                arrLen = arr.length,\n                i = 0,\n                ii = 0,\n                x = 0,\n                prevPos = 0,\n                y = 0,\n                // If array size is smaller than\n                // divisions needed\n                diffTimes = times - arrLen;\n            while (diffTimes >= 0) {\n                i = arr.length - 1;\n                arr.push(arr.slice(i)[0]);\n                --diffTimes;\n            }\n            arrLen = arr.length;\n            for (i = 0; i <= times; ++i) {\n                locArr.push(Math.round((i / times) * arrLen));\n            }\n            for (i = 0, ii = locArr.length - 1; i < ii; ++i) {\n                resArr.push(arr.slice(locArr[i], locArr[i + 1]));\n                if (resArr[i][0][0] !== 'M' && resArr[i][0][0] !== mStr) {\n                    prevPos = resArr[i - 1].length - 1;\n                    x = resArr[i - 1][prevPos][1];\n                    y = resArr[i - 1][prevPos][2];\n                    resArr[i].unshift(['M', x, y]);\n                }\n            }\n            return resArr;\n        }\n        /* If two path array have different number of MoveTo commands,\n            divide the smaller number of MoveTo command holder to match the other one */\n        function divideArray (diff) {\n            var arrToDivide = [],\n                countArr = [],\n                transArr = [],\n                i = 0,\n                ii = 0,\n                isArr1 = true;\n            if (diff === 0) {\n                return;\n            } else if (diff > 0) {\n                arrToDivide = pathArr2;\n                isArr1 = false;\n            } else {\n                diff = -diff;\n                arrToDivide = pathArr1;\n            }\n            // Maintaining a count array to judge number of times a1\n            // path needs to be divided, 1 means dont divide\n            for (i = 0, ii = arrToDivide.length; i < ii; ++i) {\n                countArr.push(1);\n            }\n            while (diff--) {\n                --i;\n                if (i < 0) {\n                    i = ii - 1;\n                }\n                countArr[i]++;\n            }\n\n            for (i = 0; i < ii; ++i){\n                if (countArr[i] === 1) {\n                    transArr.push(arrToDivide[i]);\n                } else {\n                    transArr.push.apply(transArr, _divide(arrToDivide[i], countArr[i]));\n                }\n            }\n            if (isArr1) {\n                pathArr1 = transArr;\n            } else {\n                pathArr2 = transArr;\n            }\n        }\n        for (i = pathArr1.length; i--;) {\n            removeBlanks(pathArr1[i], i);\n            // If last element is blank pop it\n            pathArr1[i].length || pathArr1.pop();\n        }\n        for (i = pathArr2.length; i--;) {\n            removeBlanks(pathArr2[i], i);\n            pathArr2[i].length || pathArr2.pop();\n        }\n        // Making number off moveto commands equal in both path\n        divideArray(pathArr1.length - pathArr2.length);\n\n        ii = Math.max(pathArr1.length, pathArr2.length);\n        for (i = 0; i < ii; ++i) {\n            temp = _pathNormalizer(linetopath(pathArr1[i]), linetopath(pathArr2[i]));\n            pathArr1[i] = temp[0];\n            pathArr2[i] = temp[1];\n        }\n\n        for (i = 0, ii = pathArr1.length; i < ii; ++i) {\n            finalp1 = finalp1.concat(pathArr1[i]);\n        }\n        for (i = 0, ii = pathArr2.length; i < ii; ++i) {\n            finalp2 = finalp2.concat(pathArr2[i]);\n        }\n        return [finalp1, finalp2];\n    }\n\n    // A function to calculate common path\n    // in two given paths\n    function commonPathCalculator (p1, p2) {\n        'use strict';\n        var i = 0,\n            j = 0,\n            ii = 0,\n            jj = 0,\n            k = 0,\n            kk = 0,\n            uncommon1 = 0,\n            uncommon2 = 0,\n            lim1 = 0,\n            lim2 = 0,\n            nearestPoint1,\n            nearestPoint2,\n            map1 = {},\n            map2 = {},\n            groupedPath1 = [],\n            groupedPath2 = [],\n            gpIndex1 = -1,\n            gpIndex2 = -1,\n            isSame = true;\n        // Splitting the string commands to get\n        // particular points later\n        // Will be required while breaking paths\n        // into common and uncommon parts\n        function splitter (path) {\n            var i = 0,\n                ii = 0;\n            path = path.split(/[MCLmcl]/).slice(1);\n            for (i = 0, ii = path.length; i < ii; ++i) {\n                path[i] = path[i].split(S).slice(1);\n                i || path[i].unshift('M');\n                if (i) {\n                    path[i].length === 2 && path[i].unshift(strL) || path[i].unshift('C');\n                }\n            }\n            return path;\n        }\n        // populate the arr to object in reverse manner\n        // i.e value to key mapping\n        function mapper (arr, ob) {\n            var i = 0,\n                ii = arr.length,\n                val,\n                item;\n            for (i = 0, ii = arr.length; i < ii; ++i) {\n                val = arr[i].join(S);\n                item = arr[i];\n                if (item[0] === 'C' && item[3] === item[5] && item[4] === item[6]) {\n                    arr[i].stringValue = [strL, item[3], item[4]].join(S);\n                } else\n                item.stringValue = val;\n                // Creating an array if undefined\n                // pushing otherwise\n                ob[item.stringValue] && ob[item.stringValue].push(i);\n                ob[item.stringValue] || (ob[item.stringValue] = [i]);\n            }\n        }\n        // Function to get nearest point that exist\n        // in the other array\n        function getNearestExistingPoint (arr, map, start, ii, lim) {\n            var i = start,\n                k = 0,\n                kk = 0,\n                item;\n            for (; i < ii; ++i) {\n                item = map[arr[i].stringValue];\n                if (item) {\n                    for (k = 0, kk = item.length; k < kk; ++k) {\n                        if (item[k] >= lim) {\n                            return {\n                                index : i,\n                                mapValue : item[k],\n                                diff : i - start\n                            };\n                        }\n                    }\n                }\n            }\n            return -1;\n        }\n        // function to get last coordinate for CurveTo command\n        function getCoordinateAsMove (arr) {\n            var last = arr.length - 1;\n            return ['M', arr[last - 1], arr[last]].join(S);\n        }\n        // function to conver path array to string\n        function pathToString (arr) {\n            return arr.join(E);\n        }\n        // commonPathCalculator flow here\n        p1 = splitter(p1);\n        p2 = splitter(p2);\n        mapper(p1, map1);\n        mapper(p2, map2);\n        // Setting length\n        ii = p1.length;\n        jj = p2.length;\n        i = 0;\n        j = 0;\n        // Making partitions for common\n        // and uncommon parts\n        // Checking if first is common or uncommon\n        while (i < ii && j < jj) {\n            ++gpIndex1;\n            ++gpIndex2;\n            // initializing blank arrays\n            groupedPath1[gpIndex1] = [];\n            groupedPath2[gpIndex2] = [];\n            isSame = (p1[i].stringValue === p2[j].stringValue);\n            if (i) {\n                // Logic to push prev coordinate as move command\n                groupedPath1[gpIndex1].push(getCoordinateAsMove(p1[i - 1]));\n                groupedPath2[gpIndex2].push(getCoordinateAsMove(p2[j - 1]));\n            }\n            if (isSame) {\n                while (i < ii && j < jj && p1[i].stringValue === p2[j].stringValue) {\n                    groupedPath1[gpIndex1].push(p1[i].stringValue);\n                    groupedPath2[gpIndex2].push(p2[j].stringValue);\n                    ++i;\n                    ++j;\n                }\n            } else {\n                nearestPoint1 = getNearestExistingPoint(p1, map2, i, ii, j);\n                nearestPoint2 = getNearestExistingPoint(p2, map1, j, jj, i);\n                // Assuming nearestPoint1 is nearer than nearestPoint2\n                lim1 = nearestPoint1.index;\n                lim2 = nearestPoint1.mapValue;\n                // If nearestPoint2 is nearer\n                if (!~nearestPoint1 || nearestPoint1.diff > nearestPoint2.diff) {\n                    lim1 = nearestPoint2.mapValue;\n                    lim2 = nearestPoint2.index;\n                }\n                if (!~nearestPoint1 && !~nearestPoint2) {\n                   // If both not found include all as uncommon\n                    lim1 = ii - 1;\n                    lim2 = jj - 1;\n                }\n                // Pushing uncommon paths\n                while (i <= lim1) {\n                    groupedPath1[gpIndex1].push(p1[i].stringValue);\n                    ++i;\n                }\n                while (j <= lim2) {\n                    groupedPath2[gpIndex2].push(p2[j].stringValue);\n                    ++j;\n                }\n            }\n            groupedPath1[gpIndex1] = pathToString(groupedPath1[gpIndex1]);\n            groupedPath2[gpIndex2] = pathToString(groupedPath2[gpIndex2]);\n        }\n        // If Any one is left add them all\n        if (i < ii) {\n            ++gpIndex1;\n            groupedPath1[gpIndex1] = [];\n            groupedPath1[gpIndex1].push(getCoordinateAsMove(p1[i - 1]));\n            ++gpIndex2;\n            groupedPath2[gpIndex2] = [];\n            groupedPath2[gpIndex2].push(getCoordinateAsMove(p2[j - 1]));\n            while(i < ii) {\n                groupedPath1[gpIndex1].push(p1[i].stringValue);\n                ++i;\n            }\n            groupedPath1[gpIndex1] = pathToString(groupedPath1[gpIndex1]);\n        }\n        if (j < jj) {\n            ++gpIndex1;\n            groupedPath1[gpIndex1] = [];\n            groupedPath1[gpIndex1].push(getCoordinateAsMove(p1[i - 1]));\n            ++gpIndex2;\n            groupedPath2[gpIndex2] = [];\n            groupedPath2[gpIndex2].push(getCoordinateAsMove(p2[j - 1]));\n            while(j < jj) {\n                groupedPath2[gpIndex2].push(p2[j].stringValue);\n                ++j;\n            }\n            groupedPath2[gpIndex2] = pathToString(groupedPath2[gpIndex2]);\n        }\n        return [groupedPath1, groupedPath2];\n    }\n\n    // function to get equal points for two different path\n    // We set path to an dynamically created svg path node\n    // and get equal number of path commands from two different\n    // paths. Uses getPointAtLength and getTotalLength of svg that\n    // arent supported on every browser\n    function _pathNormalizer(p1, p2) {\n        'use strict';\n        var i = 0,\n            j = 0,\n            ii = 0,\n            jj = 0,\n            item = {},\n            fPath1 = [],\n            fPath2 = [],\n            divisions = 0,\n            commonPath,\n            tmp;\n        // Uncommon path normalizer\n        function normalizeUncommonPaths (p1, p2) {\n            var dPath1,\n                dPath2,\n                i = 0,\n                j = 0,\n                item = {},\n                pathLen1 = 0,\n                pathLen2 = 0,\n                fPath1 = [],\n                fPath2 = [],\n                divisions = 0,\n                round = Math.round;\n            // Creating path elements to use functions 'getTotalLength'\n            // and 'getPointAtLength'\n            dPath1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            dPath1.setAttribute(\"d\", p1);\n\n            dPath2 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            dPath2.setAttribute(\"d\", p2);\n\n            // Getting length of the paths\n            pathLen1 = dPath1.getTotalLength();\n            pathLen2 = dPath2.getTotalLength();\n\n            // Number of divisions will depend on larger path\n            divisions = 0.15 * Math.max(pathLen1, pathLen2);\n            divisions = Math.ceil(divisions);\n\n            if (!divisions || !isFinite(divisions) || divisions < 10) {\n                divisions = 10;\n            }\n\n            for (i = 0; i <= divisions; ++i) {\n                item = dPath1.getPointAtLength((i / divisions) * pathLen1);\n                fPath1.push([i ? strL : strM,\n                    round(item.x),\n                    round(item.y)\n                ]);\n                item = dPath2.getPointAtLength((i / divisions) * pathLen2);\n                fPath2.push([i ? strL : strM,\n                    round(item.x),\n                    round(item.y)\n                ]);\n            }\n            return [fPath1, fPath2];\n        }\n        if (!p1 || p1 === 'M  ') {\n            p1 = p2.split(S).slice(0, 3).join(S).replace(/[LC]/, E);\n        }\n        if (!p2 || p2 === 'M  ') {\n            p2 = p1.split(S).slice(0, 3).join(S).replace(/[LC]/, E);\n        }\n        commonPath = commonPathCalculator(p1, p2);\n\n        for (i = 0, ii = commonPath[0].length; i < ii; ++i) {\n            tmp = normalizeUncommonPaths(commonPath[0][i], commonPath[1][i]);\n            if (i) {\n                fPath1 = fPath1.concat(tmp[0].slice(1));\n                fPath2 = fPath2.concat(tmp[1].slice(1));\n            } else {\n                fPath1 = fPath1.concat(tmp[0]);\n                fPath2 = fPath2.concat(tmp[1]);\n            }\n        }\n        return [fPath1, fPath2];\n    }\n\n\n\n    function runAnimation(anim, element, percent, status, totalOrigin, times, parentEl, configObject) {\n        percent = toFloat(percent);\n        var params,\n        isInAnim,\n        isInAnimSet,\n        percents = [],\n        next,\n        prev,\n        temp,\n        timestamp,\n        tempDiff,\n        change,\n        ms = anim.ms,\n        from = {},\n        to = {},\n        diff = {};\n\n        if (element.type === null) {\n            return;\n        }\n\n        configObject = configObject || {};\n        configObject.hookFn && configObject.hookFn.call(element);\n        configObject.from = configObject.from || {};\n        if (status) {\n            for (i = 0, ii = animationElements.length; i < ii; i++) {\n                var e = animationElements[i];\n                if (e.el.id === element.id && e.anim === anim) {\n                    if (e.percent != percent) {\n                        delete e.el.e;\n                        delete e.el;\n                        animationElements.splice(i, 1);\n                        isInAnimSet = 1;\n                    } else {\n                        isInAnim = e;\n                    }\n                    element.attr(e.totalOrigin);\n                    break;\n                }\n            }\n        } else {\n            status = +to; // NaN\n        }\n        for (var i = 0, ii = anim.percents.length; i < ii; i++) {\n            if (anim.percents[i] === percent || anim.percents[i] > status * anim.top) {\n                percent = anim.percents[i];\n                prev = anim.percents[i - 1] || 0;\n                ms = ms / anim.top * (percent - prev);\n                next = anim.percents[i + 1];\n                params = anim.anim[percent];\n                break;\n            } else if (status) {\n                element.attr(anim.anim[anim.percents[i]]);\n            }\n        }\n        if (!params) {\n            return;\n        }\n        if (!isInAnim) {\n            for (var attr in params)\n                if (params[HAS](attr)) {\n                    if (availableAnimAttrs[HAS](attr) || element.ca[attr]) {\n                        from[attr] = configObject.from[attr] || element.attr(attr);\n                        (from[attr] == null) && (from[attr] = availableAttrs[attr]);\n                        to[attr] = params[attr];\n                        change = false;\n                        switch (availableAnimAttrs[attr]) {\n                            case 'number':\n                                tempDiff = to[attr] - from[attr];\n                                (tempDiff || isNaN(tempDiff)) && (change = true);\n                                diff[attr] = tempDiff / ms;\n                                break;\n                            case \"colour\":\n                                if(from[attr] === to[attr]){\n                                    break;\n                                } else {\n                                    change = true;\n                                }\n                                var colorsNormalized = colorNormalizer(from[attr], to[attr], R.getRGB);\n                                from[attr] = colorsNormalized[0];\n                                var toColour = colorsNormalized[1];\n                                if (typeof toColour === STRING) {\n                                    if(from[attr].toLowerCase() !== NONE){\n                                        from[attr] = R.getRGB(from[attr]);\n                                        if(!from[attr].opacity){\n                                            from[attr].opacity = 1;\n                                        }\n                                    } else {\n                                        from[attr] = {\n                                            r : 0,\n                                            g : 0,\n                                            b : 0,\n                                            opacity : 0\n                                        }\n                                    }\n                                    if(to[attr].toLowerCase() !== NONE){\n                                        toColour = R.getRGB(to[attr]);\n                                        if(!toColour.opacity){\n                                            toColour.opacity = 1;\n                                        }\n                                    } else {\n                                        toColour = {\n                                            r : 0,\n                                            g : 0,\n                                            b : 0,\n                                            opacity : 0\n                                        }\n                                    }\n                                    diff[attr] = {\n                                        r: (toColour.r - from[attr].r) / ms,\n                                        g: (toColour.g - from[attr].g) / ms,\n                                        b: (toColour.b - from[attr].b) / ms,\n                                        opacity: ((toColour.opacity - from[attr].opacity) / ms)\n                                    };\n                                } else {\n                                    diff[attr] = [];\n                                    for (i = 0, ii = from[attr].length; i < ii; ++i) {\n                                        if (i === 0) {\n                                            diff[attr].push(toColour[0]);\n                                        } else {\n                                            diff[attr].push({\n                                                r: (toColour[i].r - from[attr][i].r) / ms,\n                                                g: (toColour[i].g - from[attr][i].g) / ms,\n                                                b: (toColour[i].b - from[attr][i].b) / ms,\n                                                opacity: (toColour[i].opacity - from[attr][i].opacity) / ms\n                                            });\n                                        }\n                                    }\n                                }\n                                break;\n                            case \"path\":\n                                var toPath,\n                                    pathes = path2curve(from[attr], to[attr]);\n                                if (configObject.smartMorph) {\n                                    pathes = pathNormalizer(pathes[0], pathes[1], configObject);\n                                }\n                                toPath = pathes[1];\n                                from[attr] = pathes[0];\n                                diff[attr] = [];\n                                for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                    diff[attr][i] = [0];\n                                    var jj;\n                                    jj = from[attr][i] ? from[attr][i].length : 0;\n                                    for (var j = 1; j < jj; j++) {\n                                        diff[attr][i][j] = (toPath[i][j] - from[attr][i][j]) / ms;\n                                        (!change) && diff[attr][i][j] && (change = true);\n                                    }\n                                }\n                                break;\n                            case \"transform\":\n                                var _ = element._,\n                                eq = equaliseTransform(_[attr], to[attr]);\n                                change = true;\n                                if (eq) {\n                                    from[attr] = eq.from;\n                                    to[attr] = eq.to;\n                                    diff[attr] = [];\n                                    diff[attr].real = true;\n                                    for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                        diff[attr][i] = [from[attr][i][0]];\n                                        for (j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                            diff[attr][i][j] = (to[attr][i][j] - from[attr][i][j]) / ms;\n                                        }\n                                    }\n                                } else {\n                                    var m = (element.matrix || new Matrix),\n                                    to2 = {\n                                        _: {\n                                            transform: _.transform\n                                        },\n                                        getBBox: function() {\n                                            return element.getBBox(1);\n                                        }\n                                    };\n                                    from[attr] = [\n                                    m.a,\n                                    m.b,\n                                    m.c,\n                                    m.d,\n                                    m.e,\n                                    m.f\n                                    ];\n                                    extractTransform(to2, to[attr]);\n                                    to[attr] = to2._.transform;\n                                    diff[attr] = [\n                                    (to2.matrix.a - m.a) / ms,\n                                    (to2.matrix.b - m.b) / ms,\n                                    (to2.matrix.c - m.c) / ms,\n                                    (to2.matrix.d - m.d) / ms,\n                                    (to2.matrix.e - m.e) / ms,\n                                    (to2.matrix.f - m.f) / ms\n                                    ];\n                                // from[attr] = [_.sx, _.sy, _.deg, _.dx, _.dy];\n                                // var to2 = {_:{}, getBBox: function () { return element.getBBox(); }};\n                                // extractTransform(to2, to[attr]);\n                                // diff[attr] = [\n                                //     (to2._.sx - _.sx) / ms,\n                                //     (to2._.sy - _.sy) / ms,\n                                //     (to2._.deg - _.deg) / ms,\n                                //     (to2._.dx - _.dx) / ms,\n                                //     (to2._.dy - _.dy) / ms\n                                // ];\n                                }\n                                break;\n                            case \"csv\":\n                                var values = Str(params[attr])[SPLIT](separator),\n                                from2 = Str(from[attr])[SPLIT](separator);\n                                if (attr === \"clip-rect\") {\n                                    from[attr] = from2;\n                                    diff[attr] = [];\n                                    i = from2.length;\n                                    while (i--) {\n                                        tempDiff = values[i] - from[attr][i];\n                                        (tempDiff || isNaN(tempDiff)) && (change = true);\n                                        diff[attr][i] = tempDiff / ms;\n                                    }\n                                }\n                                to[attr] = values;\n                                break;\n                            default:\n                                values = [][CONCAT](params[attr]);\n                                from2 = [][CONCAT](from[attr]);\n                                diff[attr] = [];\n                                i = element.ca[attr].length;\n                                while (i--) {\n                                    tempDiff = (values[i] || 0) - (from2[i] || 0);\n                                    (tempDiff || isNaN(tempDiff)) && (change = true);\n                                    diff[attr][i] = tempDiff / ms;\n                                }\n                                break;\n                        }\n                        if (!change) {\n                            delete from[attr];\n                            delete to[attr];\n                            delete params[attr];\n                            delete diff[attr];\n                        }\n                    }\n                    else if (R._availableAttrs[HAS](attr) || attr === 'text' || element.ca[attr]) {\n                        element.attr(attr, params[attr]);\n                        delete params[attr];\n                    }\n                }\n            var easing = params.easing,\n            easyeasy = R.easing_formulas[easing];\n            if (!easyeasy) {\n                easyeasy = Str(easing).match(bezierrg);\n                if (easyeasy && easyeasy.length === 5) {\n                    var curve = easyeasy;\n                    easyeasy = function(t) {\n                        return CubicBezierAtTime(t, +curve[1], +curve[2], +curve[3], +curve[4], ms);\n                    };\n                } else {\n                    easyeasy = pipe;\n                }\n            }\n            timestamp = params.start || anim.start || +new Date;\n            element.e =  e = {\n                anim: anim,\n                percent: percent,\n                timestamp: timestamp,\n                start: timestamp + (anim.del || 0),\n                status: 0,\n                initstatus: status || 0,\n                stop: false,\n                ms: ms,\n                easing: easyeasy,\n                from: from,\n                diff: diff,\n                to: to,\n                el: element,\n                callback: params.callback,\n                prev: prev,\n                next: next,\n                repeat: times || anim.times,\n                origin: element.attr(),\n                totalOrigin: totalOrigin,\n                parentEl : parentEl,\n                delayend: configObject && configObject.end,\n                delaystart: configObject && configObject.start\n            };\n            animationElements.push(e);\n\n            if (status && !isInAnim && !isInAnimSet) {\n                e.stop = true;\n                e.start = new Date - ms * status;\n                if (animationElements.length === 1) {\n                    return animation();\n                }\n            }\n            if (isInAnimSet) {\n                e.start = new Date - e.ms * status;\n            }\n            animationElements.length === 1 && (requestAnimFrame || R.getAnimFrameFn())(animation);\n        } else {\n            isInAnim.initstatus = status;\n            isInAnim.start = new Date - isInAnim.ms * status;\n        }\n        eve(\"raphael.anim.start.\" + element.id, element, anim);\n    }\n\n    /*\\\n     * Raphael.animation\n     [ method ]\n     **\n     * Creates an animation object that can be passed to the @Element.animate or @Element.animateWith methods.\n     * See also @Animation.delay and @Animation.repeat methods.\n     **\n     > Parameters\n     **\n     - params (object) final attributes for the element, see also @Element.attr\n     - ms (number) number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     **\n     = (object) @Animation\n    \\*/\n    R.animation = function(params, ms, easing, callback, stopPartialEventPropagation) {\n        if (params instanceof Animation) {\n            return params;\n        }\n        if (R.is(easing, FUNCTION) || !easing) {\n            callback = callback || easing || null;\n            easing = null;\n        }\n        !R.stopPartialEventPropagation && (R.stopPartialEventPropagation = stopPartialEventPropagation);\n        params = Object(params);\n        ms = +ms || 0;\n        var p = {},\n        json,\n        attr;\n        for (attr in params)\n            if (params[HAS](attr) && toFloat(attr) != attr && toFloat(attr) + \"%\" != attr) {\n                json = true;\n                p[attr] = params[attr];\n            }\n        // Enabling the callback to be called even if attr is not provided\n        callback && (json = true);\n        if (!json) {\n            return new Animation(params, ms);\n        } else {\n            easing && (p.easing = easing);\n            callback && (p.callback = callback);\n            return new Animation({\n                100: p\n            }, ms);\n        }\n    };\n\n    /*\\\n     * Element.animate\n     [ method ]\n     **\n     * Creates and starts animation for given element.\n     **\n     > Parameters\n     **\n     - params (object) final attributes for the element, see also @Element.attr\n     - ms (number) number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     * or\n     - animation (object) animation object, see @Raphael.animation\n     **\n     = (object) original element\n    \\*/\n    elproto.animate = function(params, ms, easing, callback) {\n        var element = this;\n        if (element.removed) {\n            callback && callback.call(element);\n            return element;\n        }\n        var anim = params instanceof Animation ? params : R.animation(params, ms, easing, callback);\n        runAnimation(anim, element, anim.percents[0], null, element.attr());\n        return element;\n    };\n\n    /*\\\n     * Element.status\n     [ method ]\n     **\n     * Gets or sets the status of animation of the element.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     - value (number) #optional 0  1. If specified, method works like a setter and sets the status of a given animation to the value. This will cause animation to jump to the given position.\n     **\n     = (number) status\n     * or\n     = (array) status if `anim` is not specified. Array of objects in format:\n     o {\n     o     anim: (object) animation object\n     o     status: (number) status\n     o }\n     * or\n     = (object) original element if `value` is specified\n    \\*/\n    elproto.status = function(anim, value) {\n        var out = [],\n        i = 0,\n        len,\n        e;\n        if (value != null) {\n            runAnimation(anim, this, -1, mmin(value, 1));\n            return this;\n        } else {\n            len = animationElements.length;\n            for (; i < len; i++) {\n                e = animationElements[i];\n                if (e.el.id === this.id && (!anim || e.anim === anim)) {\n                    if (anim) {\n                        return e.status;\n                    }\n                    out.push({\n                        anim: e.anim,\n                        status: e.status\n                    });\n                }\n            }\n            if (anim) {\n                return 0;\n            }\n            return out;\n        }\n    };\n\n    /*\\\n     * Element.pause\n     [ method ]\n     **\n     * Stops animation of the element with ability to resume it later on.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     - resumeChildAnimation (boolean) #pauses the animation of the elements which are in sync with the current element\n     **\n     = (object) original element\n    \\*/\n    elproto.pause = function(anim, pauseChildAnimation) {\n        var now = +new Date,\n            e,\n            i;\n        for (i = 0; i < animationElements.length; i++) {\n            e = animationElements[i];\n            // @todo - need a scope to implement the logic for nested animations.\n            if ((e.el.id === this.id || (pauseChildAnimation && e.parentEl && e.parentEl.e.el &&\n                e.parentEl.e.el.id === this.id)) && (!anim || e.anim === anim)) {\n                if (eve(\"raphael.anim.pause.\" + this.id, this, e.anim) !== false) {\n                    e.paused = true;\n                    e.pauseStart = now;\n                }\n            }\n        }\n        return this;\n    };\n\n    /*\\\n     * Element.resume\n     [ method ]\n     **\n     * Resumes animation if it was paused with @Element.pause method.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     - resumeChildAnimation (boolean) #resumes the animation of the elements which are in sync with the current element\n     **\n     = (object) original element\n    \\*/\n    elproto.resume = function(anim, resumeChildAnimation) {\n        var now = +new Date,\n            e,\n            i;\n        for (i = 0; i < animationElements.length; i++) {\n            e = animationElements[i];\n            // @todo - need a scope to implement the logic for nested animations.\n            if ((e.el.id === this.id || (resumeChildAnimation && e.parentEl && e.parentEl.e.el &&\n                e.parentEl.e.el.id === this.id)) && (!anim || e.anim === anim)) {\n                if (eve(\"raphael.anim.resume.\" + this.id, this, e.anim) !== false) {\n                    delete e.paused;\n                    e.el.status(e.anim, e.status);\n                    e.pauseEnd = now;\n                    e.start += (((e.parentEl && e.parentEl.e.pauseEnd || e.pauseEnd) -\n                        (e.parentEl && e.parentEl.e.pauseStart || e.pauseStart)) || 0);\n                }\n            }\n        }\n        return this;\n    };\n\n\n    /*\\\n     * Element.stop\n     [ method ]\n     **\n     * Stops animation of the element.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     - stopChildAnimation (boolean) #optional stops the animation of all the element which are in sync with the current element\n     - jumpToEnd (boolean) #optional takes the current animation to its end value\n     **\n     = (object) original element\n    \\*/\n    elproto.stop = function(anim, stopChildAnimation, jumpToEnd) {\n        var e, i, ele;\n        if (stopChildAnimation) {\n            for (i = animationElements.length - 1; i >= 0; i--) {\n                e = animationElements[i];\n                // @todo - need a scope to implement the logic for nested animations.\n                if ((e.el.id === this.id || (e.parentEl && e.parentEl.id === this.id)) &&\n                    (!anim || animationElements[i].anim === anim)) {\n                    ele = e.el;\n                    jumpToEnd && ele.attr(e.to);\n                    e.callback && e.callback.call(ele);\n                    delete ele.e;\n                    delete e.el;\n                    animationElements.splice(i, 1);\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < animationElements.length; i++){\n                e = animationElements[i];\n                if (e.el.id === this.id && (!anim || e.anim === anim)) {\n                    if (eve(\"raphael.anim.stop.\" + this.id, this, e.anim) !== false) {\n                        animationElements.splice(i--, 1);\n                    }\n                }\n            }\n        }\n        // In case root object has hooked animation elements\n        // in priority queue execute them all\n        if (this.animElements) {\n            executeAnimQueue(this.animElements);\n        }\n        return this;\n    };\n\n    function executeAnimQueue (queue) {\n        var ob;\n        // Looping until all executed\n        while (ob = queue.deq()) {\n            ob = ob.executeOb;\n            ob.hookFn && ob.hookFn.call(ob.el);\n            ob.el.attr(ob.attrs);\n            ob.callback && ob.callback.call(ob.el);\n        }\n    }\n\n    /**\n     * Function for stopping animation when paper is cleared or removed\n     * @param {Object} currPaper the current paper that is being removed/cleared\n     */\n    function stopAnimation(currPaper = this) {\n        let linkedPaper;\n        for (var i = 0; i < animationElements.length; i++) {\n            linkedPaper = animationElements[i].el.paper;\n            // All the elements associated with the current paper is removed if linkedPaper is already\n            // disposed of currentPaper matches the linked Paper\n            if (!linkedPaper || linkedPaper === currPaper) {\n                animationElements.splice(i--, 1);\n            }\n        }\n    }\n    eve.on(\"raphael.remove\", stopAnimation);\n    eve.on(\"raphael.clear\", stopAnimation);\n    elproto.toString = function() {\n        return \"Rapha\\xebl\\u2019s object\";\n    };\n\n    elproto.toFront = function() {\n        if (this.removed) {\n            return this;\n        }\n\n        var o = this,\n            thisNode = R._engine.getNode(o),\n            parent = o.parent,\n            followers = o.followers,\n            follower,\n            i,\n            ii;\n\n        if (R._tofront(o, parent)) {\n            parent.canvas.appendChild(thisNode);\n        }\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk && follower.el[follower.stalk](o);\n        }\n        return o;\n    };\n\n    elproto.toBack = function() {\n        if (this.removed) {\n            return this;\n        }\n\n        var o = this,\n            thisNode = R._engine.getNode(o),\n            parent = o.parent,\n            followers = o.followers,\n            follower,\n            i,\n            ii;\n\n        if (R._toback(o, parent)) {\n            parent.canvas.insertBefore(thisNode, parent.canvas.firstChild);\n        }\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk && follower.el[follower.stalk](o);\n        }\n        return o;\n    };\n\n    elproto.insertAfter = function(element) {\n        if (this.removed) {\n            return this;\n        }\n\n        var o = this,\n            thisNode = R._engine.getNode(o),\n            thatNode = R._engine.getLastNode(element),\n            parentNode = element.parent.canvas,\n            followers = o.followers,\n            follower,\n            i,\n            ii;\n\n        if (thatNode.nextSibling) {\n            parentNode.insertBefore(thisNode, thatNode.nextSibling);\n        }\n        else {\n            parentNode.appendChild(thisNode);\n        }\n        R._insertafter(o, element, o.parent, element.parent);\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk &&\n                follower.el[follower.stalk](element);\n        }\n        return o;\n    };\n\n    elproto.insertBefore = function(element) {\n        if (this.removed) {\n            return this;\n        }\n\n        var o = this,\n            thisNode = R._engine.getNode(o),\n            thatNode = R._engine.getNode(element),\n            followers = o.followers,\n            follower,\n            i,\n            ii;\n\n        element.parent.canvas.insertBefore(thisNode, thatNode);\n        R._insertbefore(o, element, o.parent, element.parent);\n        o.parent = element.parent;\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk &&\n                follower.el[follower.stalk](element);\n        }\n        return this;\n    };\n\n    elproto.appendChild = function (element) {\n        if (this.removed || this.type !== 'group') {\n            return this;\n        }\n\n        var group = this,\n            followers = group.followers,\n            follower,\n            thatNode,\n            i,\n            ii;\n\n        // If appending in same group, simply perform toFront().\n        if (element.parent === group) {\n            element.toFront();\n            return group;\n        }\n\n        thatNode = R._engine.getNode(element);\n\n        // first remove from own group\n        R._tear(element, element.parent);\n\n        group.canvas.appendChild(thatNode);\n        element.parent = group;\n\n        !group.bottom && (group.bottom = element);\n        element.prev = group.top;\n        element.next = null;\n        group.top && (group.top.next = element);\n        group.top = element;\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk &&\n                follower.el[follower.stalk](element);\n        }\n\n        return group;\n    };\n\n    // Reverse application of appendChild\n    elproto.appendTo = function (group) {\n        return group.appendChild(this);\n    }\n\n    elproto.removeChild = function (element) {\n        if (this.removed || this.type !== 'group' || element.parent !== this) {\n            return this;\n        }\n\n        var o = this,\n            thatNode = R._engine.getNode(element),\n            paper = o.paper;\n\n        R._tear(element, o);\n        paper.canvas.appendChild(thatNode);\n\n        o.parent = paper;\n        !paper.bottom && (paper.bottom = o);\n\n        o.prev = paper.top;\n        paper.top && (paper.top.next = o);\n        paper.top = o;\n        o.next = null;\n\n        return o;\n    };\n\n    /*\\\n     * Raphael.format\n     [ method ]\n     **\n     * Simple format function. Replaces construction of type `{<number>}` to the corresponding argument.\n     **\n     > Parameters\n     **\n     - token (string) string to format\n     -  (string) rest of arguments will be treated as parameters for replacement\n     = (string) formated string\n     > Usage\n     | var x = 10,\n     |     y = 20,\n     |     width = 40,\n     |     height = 50;\n     | // this will draw a rectangular shape equivalent to \"M10,20h40v50h-40z\"\n     | paper.path(Raphael.format(\"M{0},{1}h{2}v{3}h{4}z\", x, y, width, height, -width));\n    \\*/\n    R.format = function(token, params) {\n        var arg = getArrayCopy(arguments),\n            args = R.is(params, ARRAY) ? [0][CONCAT](params) : arg;\n        token && R.is(token, STRING) && args.length - 1 && (token = token.replace(formatrg, function(str, i) {\n            return args[++i] == null ? E : args[i];\n        }));\n        return token || E;\n    };\n\n    var crispFixer = (R.vml && 0.5 || 0);\n\n    R.crispBound = cacher(function (x, y, w, h, s) {\n        var at = {},\n            normalizer;\n\n        x = x || 0;\n        y = y || 0;\n        w = w || 0;\n        h = h || 0;\n        s = s || 0;\n        normalizer = s % 2 / 2 + crispFixer;\n\n        // normalize for crisp edges\n        at.x = round(x + normalizer) - normalizer;\n        at.y = round(y + normalizer) - normalizer;\n        at.width = round(x + w + normalizer) - normalizer - at.x;\n        at.height = round(y + h + normalizer) - normalizer - at.y;\n        at['stroke-width'] = s;\n\n        // adjust to single pixel if resultant dimension is zero.\n        (at.width === 0 && w !== 0) && (at.width = 1);\n        (at.height === 0 && h !== 0) && (at.height = 1);\n\n        return at;\n    }, R);\n\n    elproto.crisp = function () {\n        var o = this,\n            attrs = o.attrs,\n            key,\n            attr = {},\n            values = o.attr();\n\n        values = R.crispBound(values.x, values.y, values.width, values.height,\n            values['stroke-width']);\n\n        for (key in values) {\n            if (attrs[key] === values[key]) { // only set attribute if changed\n                delete values[key];\n            }\n        }\n\n        return o.attr(values);\n    };\n\n    /*\\\n     * Raphael.define\n     [ method ]\n     **\n     * Allows a unified definition of composite shapes and other behaviours using\n     * simple directives.\n     **\n     > Parameters\n     **\n     - definition (object) the shape definition\n    \\*/\n    R.define = function (name, init, ca, fn, e, data) {\n        var i,\n            ii;\n\n        // multi definition\n        if (R.is(name, ARRAY)) {\n            for (i = 0, ii = name.length; i < ii; i++) {\n                R.define(name[i]);\n            }\n            return;\n        }\n        // object definition\n        else if (R.is(name, OBJECT)) {\n            R.define(name.name, name[name.name], name.ca, name.fn, name.e, name.data);\n            return;\n        }\n        // invalid or duplicate definition\n        else if (!name || R.fn[name]) {\n            return;\n        }\n\n        R.fn[name] = function () {\n            var args = getArrayCopy(arguments),\n                element = init.apply(this, args),\n                key;\n\n            if (fn && R.is(fn, OBJECT)) {\n                for (key in fn) {\n                    element[key] = fn[key];\n                }\n            }\n\n            if (e && R.is(e, OBJECT)) {\n                for (key in e) {\n                    element[key] && element[key](e[key]);\n                }\n            }\n\n            if (ca) {\n                if (R.is(ca, FUNCTION)) {\n                    element.ca[name] = ca;\n                }\n                else {\n                    for (key in ca) {\n                        element.ca[key] = ca[key];\n                    }\n                }\n\n                // Check if namesake ca exists and apply it\n                if (element.ca[name]) {\n                    R._lastArgIfGroup(args, true); // purge group\n                    if (args.length) {\n                        // If name attribute is present then the received argument is an object with the customAttribute and other\n                        // common attributes. Else it is just the customAttributes that is to be applied.\n                        args[0][name] ? element.attr.apply(element, args): element.attr(name, args[0]);\n                    }\n                }\n            }\n\n            return element;\n        };\n\n        if (ca) { R.fn[name].ca = ca; }\n        if (fn) { R.fn[name].fn = fn; }\n        if (e) { R.fn[name].e = e; }\n        if (data) { R.fn[name].data = data; }\n\n        return R.fn[name];\n    };\n    // Firefox <3.6 fix: http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html\n    (function(doc, loaded, f) {\n        if (doc.readyState == null && doc.addEventListener) {\n            doc.addEventListener(loaded, f = function() {\n                doc.removeEventListener(loaded, f, false);\n                doc.readyState = \"complete\";\n            }, false);\n            doc.readyState = \"loading\";\n        }\n        function isLoaded() {\n            (/in/).test(doc.readyState) ? setTimeout(isLoaded, 9) : R.eve(\"raphael.DOMload\");\n        }\n        isLoaded();\n    })(doc, \"DOMContentLoaded\");\n\n    eve.on(\"raphael.DOMload\", function() {\n        loaded = true;\n    });\n     R._preload = function(src, f) {\n        var doc = g.doc,\n            img = doc.createElement(\"img\");\n        img.style.cssText = \"position:absolute;left:-9999em;top:-9999em\";\n        img.onload = function() {\n            f.call(this);\n            this.onload = null;\n            doc.body.removeChild(this);\n        };\n        img.onerror = function() {\n            doc.body.removeChild(this);\n        };\n        doc.body.appendChild(img);\n        img.src = src;\n    };\n\n\n\n    // EXPOSE\n    // SVG and VML are appended just before the EXPOSE line\n    // Even with AMD, Raphael should be defined globally\n    // oldRaphael.was ? (g.win.Raphael = R) : (Raphael = R);\n\nexport default R;\n\n\n\n// WEBPACK FOOTER //\n// ./source/raphael.core.js","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/iterator.js\n// module id = 44\n// module chunks = 0","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.string.iterator.js\n// module id = 45\n// module chunks = 0","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_string-at.js\n// module id = 46\n// module chunks = 0","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ctx.js\n// module id = 47\n// module chunks = 0","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_a-function.js\n// module id = 48\n// module chunks = 0","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-create.js\n// module id = 49\n// module chunks = 0","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dps.js\n// module id = 50\n// module chunks = 0","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iobject.js\n// module id = 51\n// module chunks = 0","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-includes.js\n// module id = 52\n// module chunks = 0","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-length.js\n// module id = 53\n// module chunks = 0","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-absolute-index.js\n// module id = 54\n// module chunks = 0","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_html.js\n// module id = 55\n// module chunks = 0","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gpo.js\n// module id = 56\n// module chunks = 0","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/web.dom.iterable.js\n// module id = 57\n// module chunks = 0","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.iterator.js\n// module id = 58\n// module chunks = 0","module.exports = function () { /* empty */ };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_add-to-unscopables.js\n// module id = 59\n// module chunks = 0","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-step.js\n// module id = 60\n// module chunks = 0","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/index.js\n// module id = 61\n// module chunks = 0","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toObject = require('./_to-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $GOPS = require('./_object-gops');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function' && !!$GOPS.f;\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  $GOPS.f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\nvar FAILS_ON_PRIMITIVES = $fails(function () { $GOPS.f(1); });\n\n$export($export.S + $export.F * FAILS_ON_PRIMITIVES, 'Object', {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return $GOPS.f(toObject(it));\n  }\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.symbol.js\n// module id = 62\n// module chunks = 0","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_meta.js\n// module id = 63\n// module chunks = 0","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-keys.js\n// module id = 64\n// module chunks = 0","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array.js\n// module id = 65\n// module chunks = 0","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn-ext.js\n// module id = 66\n// module chunks = 0","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopd.js\n// module id = 67\n// module chunks = 0","require('./_wks-define')('asyncIterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.async-iterator.js\n// module id = 69\n// module chunks = 0","require('./_wks-define')('observable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.observable.js\n// module id = 70\n// module chunks = 0","import { getArrayCopy } from \"../raphael.lib\";\n\n// Copyright (c) 2017 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//  \\\\\n//  Eve 0.5.3 - JavaScript Events Library                       \\\\\n//  \\\\\n//  Author Dmitry Baranovskiy (http://dmitry.baranovskiy.com/)  \\\\\n//  \\\\\n\nexport default (function (glob) {\n    var version = \"0.5.3\",\n        has = \"hasOwnProperty\",\n        separator = /[\\.\\/]/,\n        comaseparator = /\\s*,\\s*/,\n        wildcard = \"*\",\n        fun = function () {},\n        numsort = function (a, b) {\n            return a - b;\n        },\n        current_event,\n        stop,\n        events = {n: {}},\n        firstDefined = function () {\n            for (var i = 0, ii = this.length; i < ii; i++) {\n                if (typeof this[i] != \"undefined\") {\n                    return this[i];\n                }\n            }\n        },\n        lastDefined = function () {\n            var i = this.length;\n            while (--i) {\n                if (typeof this[i] != \"undefined\") {\n                    return this[i];\n                }\n            }\n        },\n        objtos = Object.prototype.toString,\n        Str = String,\n        isArray = Array.isArray || function (ar) {\n            return ar instanceof Array || objtos.call(ar) == \"[object Array]\";\n        };\n    /*\\\n     * eve\n     [ method ]\n\n     * Fires event with given `name`, given scope and other parameters.\n\n     - name (string) name of the *event*, dot (`.`) or slash (`/`) separated\n     - scope (object) context for the event handlers\n     - varargs (...) the rest of arguments will be sent to event handlers\n\n     = (object) array of returned values from the listeners. Array has two methods `.firstDefined()` and `.lastDefined()` to get first or last not `undefined` value.\n    \\*/\n    function eve(name, scope) {\n        var e = events,\n            oldstop = stop,\n            arg = getArrayCopy(arguments),\n            args = Array.prototype.slice.call(arg, 2),\n            listeners = eve.listeners(name),\n            z = 0,\n            f = false,\n            l,\n            indexed = [],\n            queue = {},\n            out = [],\n            ce = current_event,\n            errors = [];\n            out.firstDefined = firstDefined;\n            out.lastDefined = lastDefined;\n            current_event = name;\n            stop = 0;\n            for (var i = 0, ii = listeners.length; i < ii; i++) if (\"zIndex\" in listeners[i]) {\n                indexed.push(listeners[i].zIndex);\n                if (listeners[i].zIndex < 0) {\n                    queue[listeners[i].zIndex] = listeners[i];\n                }\n            }\n            indexed.sort(numsort);\n            while (indexed[z] < 0) {\n                l = queue[indexed[z++]];\n                out.push(l.apply(scope, args));\n                if (stop) {\n                    stop = oldstop;\n                    return out;\n                }\n            }\n            for (i = 0; i < ii; i++) {\n                l = listeners[i];\n                if (\"zIndex\" in l) {\n                    if (l.zIndex == indexed[z]) {\n                        out.push(l.apply(scope, args));\n                        if (stop) {\n                            break;\n                        }\n                        do {\n                            z++;\n                            l = queue[indexed[z]];\n                            l && out.push(l.apply(scope, args));\n                            if (stop) {\n                                break;\n                            }\n                        } while (l)\n                    } else {\n                        queue[l.zIndex] = l;\n                    }\n                } else {\n                    out.push(l.apply(scope, args));\n                    if (stop) {\n                        break;\n                    }\n                }\n            }\n            stop = oldstop;\n            current_event = ce;\n            return out;\n        };\n        // Undocumented. Debug only.\n        eve._events = events;\n    /*\\\n     * eve.listeners\n     [ method ]\n\n     * Internal method which gives you array of all event handlers that will be triggered by the given `name`.\n\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated\n\n     = (array) array of event handlers\n    \\*/\n    eve.listeners = function (name) {\n        var names = isArray(name) ? name : name.split(separator),\n            e = events,\n            item,\n            items,\n            k,\n            i,\n            ii,\n            j,\n            jj,\n            nes,\n            es = [e],\n            out = [];\n        for (i = 0, ii = names.length; i < ii; i++) {\n            nes = [];\n            for (j = 0, jj = es.length; j < jj; j++) {\n                e = es[j].n;\n                items = [e[names[i]], e[wildcard]];\n                k = 2;\n                while (k--) {\n                    item = items[k];\n                    if (item) {\n                        nes.push(item);\n                        out = out.concat(item.f || []);\n                    }\n                }\n            }\n            es = nes;\n        }\n        return out;\n    };\n    /*\\\n     * eve.separator\n     [ method ]\n\n     * If for some reasons you dont like default separators (`.` or `/`) you can specify yours\n     * here. Be aware that if you pass a string longer than one character it will be treated as\n     * a list of characters.\n\n     - separator (string) new separator. Empty string resets to default: `.` or `/`.\n    \\*/\n    eve.separator = function (sep) {\n        if (sep) {\n            sep = Str(sep).replace(/(?=[\\.\\^\\]\\[\\-])/g, \"\\\\\");\n            sep = \"[\" + sep + \"]\";\n            separator = new RegExp(sep);\n        } else {\n            separator = /[\\.\\/]/;\n        }\n    };\n    /*\\\n     * eve.on\n     [ method ]\n     **\n     * Binds given event handler with a given name. You can use wildcards `*` for the names:\n     | eve.on(\"*.under.*\", f);\n     | eve(\"mouse.under.floor\"); // triggers f\n     * Use @eve to trigger the listener.\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n     **\n     - name (array) if you dont want to use separators, you can use array of strings\n     - f (function) event handler function\n     **\n     = (function) returned function accepts a single numeric parameter that represents z-index of the handler. It is an optional feature and only used when you need to ensure that some subset of handlers will be invoked in a given order, despite of the order of assignment.\n     > Example:\n     | eve.on(\"mouse\", eatIt)(2);\n     | eve.on(\"mouse\", scream);\n     | eve.on(\"mouse\", catchIt)(1);\n     * This will ensure that `catchIt` function will be called before `eatIt`.\n     *\n     * If you want to put your handler before non-indexed handlers, specify a negative value.\n     * Note: I assume most of the time you dont need to worry about z-index, but its nice to have this feature just in case.\n    \\*/\n    eve.on = function (name, f) {\n        if (typeof f != \"function\") {\n            return function () {};\n        }\n        var names = isArray(name) ? isArray(name[0]) ? name : [name] : Str(name).split(comaseparator);\n        for (var i = 0, ii = names.length; i < ii; i++) {\n            (function (name) {\n                var names = isArray(name) ? name : Str(name).split(separator),\n                    e = events,\n                    exist;\n                for (var i = 0, ii = names.length; i < ii; i++) {\n                    e = e.n;\n                    e = e.hasOwnProperty(names[i]) && e[names[i]] || (e[names[i]] = {n: {}});\n                }\n                e.f = e.f || [];\n                for (i = 0, ii = e.f.length; i < ii; i++) if (e.f[i] == f) {\n                    exist = true;\n                    break;\n                }\n                !exist && e.f.push(f);\n            }(names[i]));\n        }\n        return function (zIndex) {\n            if (+zIndex == +zIndex) {\n                f.zIndex = +zIndex;\n            }\n        };\n    };\n    /*\\\n     * eve.f\n     [ method ]\n     **\n     * Returns function that will fire given event with optional arguments.\n     * Arguments that will be passed to the result function will be also\n     * concated to the list of final arguments.\n     | el.onclick = eve.f(\"click\", 1, 2);\n     | eve.on(\"click\", function (a, b, c) {\n     |     console.log(a, b, c); // 1, 2, [event object]\n     | });\n     - event (string) event name\n     - varargs () and any other arguments\n     = (function) possible event handler function\n    \\*/\n    eve.f = function (event) {\n        var args = getArrayCopy(arguments),\n            attrs = [].slice.call(args, 1);\n        return function () {\n            eve.apply(null, [event, null].concat(attrs).concat([].slice.call(args, 0)));\n        };\n    };\n    /*\\\n     * eve.stop\n     [ method ]\n     **\n     * Is used inside an event handler to stop the event, preventing any subsequent listeners from firing.\n    \\*/\n    eve.stop = function () {\n        stop = 1;\n    };\n    /*\\\n     * eve.nt\n     [ method ]\n     **\n     * Could be used inside event handler to figure out actual name of the event.\n     **\n     - subname (string) #optional subname of the event\n     **\n     = (string) name of the event, if `subname` is not specified\n     * or\n     = (boolean) `true`, if current events name contains `subname`\n    \\*/\n    eve.nt = function (subname) {\n        var cur = isArray(current_event) ? current_event.join(\".\") : current_event;\n        if (subname) {\n            return new RegExp(\"(?:\\\\.|\\\\/|^)\" + subname + \"(?:\\\\.|\\\\/|$)\").test(cur);\n        }\n        return cur;\n    };\n    /*\\\n     * eve.nts\n     [ method ]\n     **\n     * Could be used inside event handler to figure out actual name of the event.\n     **\n     **\n     = (array) names of the event\n    \\*/\n    eve.nts = function () {\n        return isArray(current_event) ? current_event : current_event.split(separator);\n    };\n    /*\\\n     * eve.off\n     [ method ]\n     **\n     * Removes given function from the list of event listeners assigned to given name.\n     * If no arguments specified all the events will be cleared.\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n    \\*/\n    /*\\\n     * eve.unbind\n     [ method ]\n     **\n     * See @eve.off\n    \\*/\n    eve.off = eve.unbind = function (name, f) {\n        if (!name) {\n            eve._events = events = {n: {}};\n            return;\n        }\n        var names = isArray(name) ? isArray(name[0]) ? name : [name] : Str(name).split(comaseparator);\n        if (names.length > 1) {\n            for (var i = 0, ii = names.length; i < ii; i++) {\n                eve.off(names[i], f);\n            }\n            return;\n        }\n        names = isArray(name) ? name : Str(name).split(separator);\n        var e,\n            key,\n            splice,\n            i, ii, j, jj,\n            cur = [events],\n            inodes = [];\n        for (i = 0, ii = names.length; i < ii; i++) {\n            for (j = 0; j < cur.length; j += splice.length - 2) {\n                splice = [j, 1];\n                e = cur[j].n;\n                if (names[i] != wildcard) {\n                    if (e[names[i]]) {\n                        splice.push(e[names[i]]);\n                        inodes.unshift({\n                            n: e,\n                            name: names[i]\n                        });\n                    }\n                } else {\n                    for (key in e) if (e[has](key)) {\n                        splice.push(e[key]);\n                        inodes.unshift({\n                            n: e,\n                            name: key\n                        });\n                    }\n                }\n                cur.splice.apply(cur, splice);\n            }\n        }\n        for (i = 0, ii = cur.length; i < ii; i++) {\n            e = cur[i];\n            while (e.n) {\n                if (f) {\n                    if (e.f) {\n                        for (j = 0, jj = e.f.length; j < jj; j++) if (e.f[j] == f) {\n                            e.f.splice(j, 1);\n                            break;\n                        }\n                        !e.f.length && delete e.f;\n                    }\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\n                        var funcs = e.n[key].f;\n                        for (j = 0, jj = funcs.length; j < jj; j++) if (funcs[j] == f) {\n                            funcs.splice(j, 1);\n                            break;\n                        }\n                        !funcs.length && delete e.n[key].f;\n                    }\n                } else {\n                    delete e.f;\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\n                        delete e.n[key].f;\n                    }\n                }\n                e = e.n;\n            }\n        }\n        // prune inner nodes in path\n        prune: for (i = 0, ii = inodes.length; i < ii; i++) {\n            e = inodes[i];\n            for (key in e.n[e.name].f) {\n                // not empty (has listeners)\n                continue prune;\n            }\n            for (key in e.n[e.name].n) {\n                // not empty (has children)\n                continue prune;\n            }\n            // is empty\n            delete e.n[e.name];\n        }\n    };\n    /*\\\n     * eve.once\n     [ method ]\n     **\n     * Binds given event handler with a given name to only run once then unbind itself.\n     | eve.once(\"login\", f);\n     | eve(\"login\"); // triggers f\n     | eve(\"login\"); // no listeners\n     * Use @eve to trigger the listener.\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n     **\n     = (function) same return function as @eve.on\n    \\*/\n    eve.once = function (name, f) {\n        var f2 = function () {\n            eve.off(name, f2);\n            return f.apply(this, arguments);\n        };\n        return eve.on(name, f2);\n    };\n    /*\\\n     * eve.version\n     [ property (string) ]\n     **\n     * Current version of the library.\n    \\*/\n    eve.version = version;\n    eve.toString = function () {\n        return \"You are running Eve \" + version;\n    };\n    glob.eve = eve;\n    // typeof module != \"undefined\" && module.exports ? module.exports = eve : typeof define === \"function\" && define.amd ? define(\"eve\", [], function() { return eve; }) : glob.eve = eve;\n    return eve;\n})(typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : null);\n\n\n\n// WEBPACK FOOTER //\n// ./source/eve/eve.js","import { getArrayCopy, cacher } from \"./raphael.lib\";\n\n/**\n * All non fusincharts related functionalities of redRaphael is listed here\n */\nexport default function (R) {\n    var _win = (typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : null),\n        g = {\n            doc: _win.document,\n            win: _win\n        },\n        elproto = R.el,\n        has = 'hasOwnProperty',\n        apply = 'apply',\n        object = 'object',\n        array = 'array',\n        string = 'string',\n        split = 'split',\n        finite = 'finite',\n        separator = /[, ]+/,\n        oldRaphael = {\n            was: Object.prototype[has].call(g.win, 'Raphael'),\n            is: g.win.Raphael\n        },\n        E = '',\n        mmax = Math.max,\n        mmin = Math.min,\n        paperproto = R.fn,\n        getPath = R._getPath,\n        Str = String,\n        // Set\n        Set = function (items) {\n            this.items = [];\n            this.length = 0;\n            this.type = 'set';\n            if (items) {\n                for (var i = 0, ii = items.length; i < ii; i++) {\n                    if (items[i] && (items[i].constructor == elproto.constructor || items[i].constructor == Set)) {\n                        this[this.items.length] = this.items[this.items.length] = items[i];\n                        this.length++;\n                    }\n                }\n            }\n        },\n        setproto = Set.prototype,\n        getOffset = function (elem) {\n            var box = elem.getBoundingClientRect(),\n                doc = elem.ownerDocument,\n                body = doc.body,\n                docElem = doc.documentElement,\n                clientTop = docElem.clientTop || body.clientTop || 0, clientLeft = docElem.clientLeft || body.clientLeft || 0,\n                top = box.top + (g.win.pageYOffset || docElem.scrollTop || body.scrollTop) - clientTop,\n                left = box.left + (g.win.pageXOffset || docElem.scrollLeft || body.scrollLeft) - clientLeft;\n            return {\n                y: top,\n                x: left\n            };\n        },\n\n        /*\\\n            * Raphael.transformPath\n            [ method ]\n            **\n            * Utility method\n            **\n            * Returns path transformed by a given transformation\n            > Parameters\n            - path (string) path string\n            - transform (string|array) transformation string\n            = (string) path\n        \\*/\n        transformPath = R.transformPath = function(path, transform) {\n            return mapPath(path, toMatrix(path, transform));\n        },\n\n        /*\\\n            * Raphael.toMatrix\n            [ method ]\n            **\n            * Utility method\n            **\n            * Returns matrix of transformations applied to a given path\n            > Parameters\n            - path (string) path string\n            - transform (string|array) transformation string\n            = (object) @Matrix\n        \\*/\n        toMatrix = R.toMatrix = function(path, transform) {\n            var bb = pathDimensions(path),\n            el = {\n                _: {\n                    transform: E\n                },\n                getBBox: function() {\n                    return bb;\n                }\n            };\n            extractTransform(el, transform);\n            return el.matrix;\n        },\n        pathToRelative = R._pathToRelative = function(pathArray) {\n            var pth = paths(pathArray);\n            if (pth.rel) {\n                return pathClone(pth.rel);\n            }\n            if (!R.is(pathArray, ARRAY) || !R.is(pathArray && pathArray[0], ARRAY)) { // rough assumption\n                pathArray = R.parsePathString(pathArray);\n            }\n            var res = [],\n            x = 0,\n            y = 0,\n            mx = 0,\n            my = 0,\n            start = 0;\n            if (pathArray[0][0] === strM) {\n                x = pathArray[0][1];\n                y = pathArray[0][2];\n                mx = x;\n                my = y;\n                start++;\n                res.push([strM, x, y]);\n            }\n            for (var i = start, ii = pathArray.length; i < ii; i++) {\n                var r = res[i] = [],\n                pa = pathArray[i];\n                if (pa[0] != lowerCase.call(pa[0])) {\n                    r[0] = lowerCase.call(pa[0]);\n                    switch (r[0]) {\n                        case \"a\":\n                            r[1] = pa[1];\n                            r[2] = pa[2];\n                            r[3] = pa[3];\n                            r[4] = pa[4];\n                            r[5] = pa[5];\n                            r[6] = +(pa[6] - x).toFixed(3);\n                            r[7] = +(pa[7] - y).toFixed(3);\n                            break;\n                        case \"v\":\n                            r[1] = +(pa[1] - y).toFixed(3);\n                            break;\n                        case 'm':\n                            mx = pa[1];\n                            my = pa[2];\n                        default:\n                            for (var j = 1, jj = pa.length; j < jj; j++) {\n                                r[j] = +(pa[j] - ((j % 2) ? x : y)).toFixed(3);\n                            }\n                    }\n                } else {\n                    r = res[i] = [];\n                    if (pa[0] === mStr) {\n                        mx = pa[1] + x;\n                        my = pa[2] + y;\n                    }\n                    for (var k = 0, kk = pa.length; k < kk; k++) {\n                        res[i][k] = pa[k];\n                    }\n                }\n                var len = res[i].length;\n                switch (res[i][0]) {\n                    case \"z\":\n                        x = mx;\n                        y = my;\n                        break;\n                    case \"h\":\n                        x += +res[i][len - 1];\n                        break;\n                    case \"v\":\n                        y += +res[i][len - 1];\n                        break;\n                    default:\n                        x += +res[i][len - 2];\n                        y += +res[i][len - 1];\n                }\n            }\n            res.toString = R._path2string;\n            pth.rel = pathClone(res);\n            return res;\n        };\n\n    /*\n     * Raphael.st\n     [ property (object) ]\n     **\n     * You can add your own method to elements and sets. It is wise to add a set method for each element method\n     * you added, so you will be able to call the same method on sets too.\n     **\n     * See also @Raphael.el.\n     > Usage\n     | Raphael.el.red = function () {\n     |     this.attr({fill: '#f00'});\n     | };\n     | Raphael.st.red = function () {\n     |     this.forEach(function (el) {\n     |         el.red();\n     |     });\n     | };\n     | // then use it\n     | paper.set(paper.circle(100, 100, 20), paper.circle(110, 100, 20)).red();\n    */\n    R.st = setproto;\n\n    /*\n     * Raphael.snapTo\n     [ method ]\n     **\n     * Snaps given value to given grid.\n     > Parameters\n     - values (array|number) given array of values or step of the grid\n     - value (number) value to adjust\n     - tolerance (number) #optional tolerance for snapping. Default is `10`.\n     = (number) adjusted value.\n    */\n    R.snapTo = function (values, value, tolerance) {\n        var rem,\n            i;\n\n        if (!R.is(tolerance, finite)) {\n            tolerance = 10;\n        }\n\n        if (R.is(values, array)) {\n            i = values.length;\n            while (i--) {\n                if (Math.abs(values[i] - value) <= tolerance) {\n                    return values[i];\n                }\n            }\n        } else {\n            values = +values;\n            rem = value % values;\n\n            if (rem < tolerance) {\n                return value - rem;\n            }\n            if (rem > values - tolerance) {\n                return value - rem + values;\n            }\n        }\n        return value;\n    };\n\n    /*\n     * Raphael.registerFont\n     [ method ]\n     **\n     * Adds given font to the registered set of fonts for Raphal. Should be used as an internal call from within Cufns font file.\n     * Returns original parameter, so it could be used with chaining.\n     # <a href='http://wiki.github.com/sorccu/cufon/about'>More about Cufn and how to convert your font form TTF, OTF, etc to JavaScript file.</a>\n     **\n     > Parameters\n     **\n     - font (object) the font to register\n     = (object) the font you passed in\n     > Usage\n     | Cufon.registerFont(Raphael.registerFont({}));\n    */\n    R.registerFont = function (font) {\n        if (!font.face) {\n            return font;\n        }\n        this.fonts = this.fonts || {};\n        var fontcopy = {\n                w: font.w,\n                face: {},\n                glyphs: {}\n            },\n            family = font.face['font-family'];\n        for (var prop in font.face)\n            if (font.face[has](prop)) {\n                fontcopy.face[prop] = font.face[prop];\n            }\n        if (this.fonts[family]) {\n            this.fonts[family].push(fontcopy);\n        } else {\n            this.fonts[family] = [fontcopy];\n        }\n        if (!font.svg) {\n            fontcopy.face['units-per-em'] = g.win.parseInt(font.face['units-per-em'], 10);\n            for (var glyph in font.glyphs)\n                if (font.glyphs[has](glyph)) {\n                    var path = font.glyphs[glyph];\n                    fontcopy.glyphs[glyph] = {\n                        w: path.w,\n                        k: {},\n                        d: path.d && 'M' + path.d.replace(/[mlcxtrv]/g, function(command) {\n                            return {\n                                l: 'L',\n                                c: 'C',\n                                x: 'z',\n                                t: 'm',\n                                r: 'l',\n                                v: 'c'\n                            }\n                            [command] || 'M';\n                        }) + 'z'\n                    };\n                    if (path.k) {\n                        for (var k in path.k)\n                            if (path[has](k)) {\n                                fontcopy.glyphs[glyph].k[k] = path.k[k];\n                            }\n                    }\n                }\n        }\n        return font;\n    };\n\n    /*\n     * Raphael.fullfill\n     [ method ]\n     **\n     * A little bit more advanced format function than @Raphael.format. Replaces construction of type `{<name>}` to the corresponding argument.\n     **\n     > Parameters\n     **\n     - token (string) string to format\n     - json (object) object which properties will be used as a replacement\n     = (string) formated string\n     > Usage\n     | // this will draw a rectangular shape equivalent to 'M10,20h40v50h-40z'\n     | paper.path(Raphael.fullfill('M{x},{y}h{dim.width}v{dim.height}h{dim['negative width']}z', {\n     |     x: 10,\n     |     y: 20,\n     |     dim: {\n     |         width: 40,\n     |         height: 50,\n     |         'negative width': -40\n     |     }\n     | }));\n    */\n    R.fullfill = (function () {\n        var tokenRegex = /\\{([^\\}]+)\\}/g,\n            objNotationRegex = /(?:(?:^|\\.)(.+?)(?=\\[|\\.|$|\\()|\\[('|')(.+?)\\2\\])(\\(\\))?/g, // matches .xxxxx or ['xxxxx'] to run over object properties\n            replacer = function(all, key, obj) {\n                var res = obj;\n                key.replace(objNotationRegex, function (all, name, quote, quotedName, isFunc) {\n                    name = name || quotedName;\n                    if (res) {\n                        if (name in res) {\n                            res = res[name];\n                        }\n                        typeof res == 'function' && isFunc && (res = res());\n                    }\n                });\n                res = (res == null || res == obj ? all : res) + '';\n                return res;\n            };\n        return function(str, obj) {\n            return String(str).replace(tokenRegex, function(all, key) {\n                return replacer(all, key, obj);\n            });\n        };\n    })();\n\n    /*\n     * Raphael.ninja\n     [ method ]\n     **\n     * If you want to leave no trace of Raphal (Well, Raphal creates only one global variable `Raphael`, but anyway.) You can use `ninja` method.\n     * Beware, that in this case plugins could stop working, because they are depending on global variable existance.\n     **\n     = (object) Raphael object\n     > Usage\n     | (function (local_raphael) {\n     |     var paper = local_raphael(10, 10, 320, 200);\n     |     \n     | })(Raphael.ninja());\n    */\n    R.ninja = function () {\n        oldRaphael.was ? (g.win.Raphael = oldRaphael.is) : delete g.win.Raphael;\n        return R;\n    };\n\n    /*\\\n     * Raphael.isPointInsidePath\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if given point is inside a given closed path.\n     > Parameters\n     - path (string) path string\n     - x (number) x of the point\n     - y (number) y of the point\n     = (boolean) true, if point is inside the path\n    \\*/\n    R.isPointInsidePath = function(path, x, y) {\n        var bbox = R.pathBBox(path);\n        return R.isPointInsideBBox(bbox, x, y) &&\n        ((interPathHelper(path, [[strM, x, y], [\"H\", bbox.x2 + 10]], 1) % 2 === 1) ||\n        (interPathHelper(path, [[strM, x, y], [\"V\", bbox.y2 + 10]], 1) % 2 === 1))\n    };\n\n    /*\\\n     * Raphael.isBBoxIntersect\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if two bounding boxes intersect\n     > Parameters\n     - bbox1 (string) first bounding box\n     - bbox2 (string) second bounding box\n     = (boolean) `true` if they intersect\n    \\*/\n    R.isBBoxIntersect = function(bbox1, bbox2) {\n        var i = R.isPointInsideBBox;\n        return i(bbox2, bbox1.x, bbox1.y) ||\n            i(bbox2, bbox1.x2, bbox1.y) ||\n            i(bbox2, bbox1.x, bbox1.y2) ||\n            i(bbox2, bbox1.x2, bbox1.y2) ||\n            i(bbox1, bbox2.x, bbox2.y) ||\n            i(bbox1, bbox2.x2, bbox2.y) ||\n            i(bbox1, bbox2.x, bbox2.y2) ||\n            i(bbox1, bbox2.x2, bbox2.y2) ||\n            (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x ||\n                bbox2.x < bbox1.x2 && bbox2.x > bbox1.x) &&\n            (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);\n    };\n\n    /*\\\n     * Raphael.isPointInsideBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if given point is inside bounding boxes.\n     > Parameters\n     - bbox (string) bounding box\n     - x (string) x coordinate of the point\n     - y (string) y coordinate of the point\n     = (boolean) `true` if point inside\n    \\*/\n    R.isPointInsideBBox = function(bbox, x, y) {\n        return x >= bbox.x && x <= bbox.x2 && y >= bbox.y && y <= bbox.y2;\n    };\n\n    /*\\\n     * Raphael.bezierBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Return bounding box of a given cubic bezier curve\n     > Parameters\n     - p1x (number) x of the first point of the curve\n     - p1y (number) y of the first point of the curve\n     - c1x (number) x of the first anchor of the curve\n     - c1y (number) y of the first anchor of the curve\n     - c2x (number) x of the second anchor of the curve\n     - c2y (number) y of the second anchor of the curve\n     - p2x (number) x of the second point of the curve\n     - p2y (number) y of the second point of the curve\n     * or\n     - bez (array) array of six points for bezier curve\n     = (object) point information in format:\n     o {\n     o     min: {\n     o         x: (number) x coordinate of the left point\n     o         y: (number) y coordinate of the top point\n     o     }\n     o     max: {\n     o         x: (number) x coordinate of the right point\n     o         y: (number) y coordinate of the bottom point\n     o     }\n     o }\n    \\*/\n    R.bezierBBox = function(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n        if (!R.is(p1x, ARRAY)) {\n            p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];\n        }\n        var bbox = curveDim.apply(null, p1x);\n        return {\n            x: bbox.min.x,\n            y: bbox.min.y,\n            x2: bbox.max.x,\n            y2: bbox.max.y,\n            width: bbox.max.x - bbox.min.x,\n            height: bbox.max.y - bbox.min.y\n        };\n    };\n\n    R.addArrow = function (o, value, isEnd) {\n        if (R.vml) {\n            var values = Str(value).toLowerCase().split(\"-\"),\n            se = isEnd ? \"end\" : \"start\",\n            i = values.length,\n            type = \"classic\",\n            w = \"medium\",\n            h = \"medium\";\n            while (i--) {\n                switch (values[i]) {\n                    case \"block\":\n                    case \"classic\":\n                    case \"oval\":\n                    case \"diamond\":\n                    case \"open\":\n                    case \"none\":\n                        type = values[i];\n                        break;\n                    case \"wide\":\n                    case \"narrow\":\n                        h = values[i];\n                        break;\n                    case \"long\":\n                    case \"short\":\n                        w = values[i];\n                        break;\n                }\n            }\n            var stroke = o.node.getElementsByTagName(\"stroke\")[0];\n            stroke[se + \"arrow\"] = type;\n            stroke[se + \"arrowlength\"] = w;\n            stroke[se + \"arrowwidth\"] = h;\n        }\n        else if (R.svg) {\n            if (o.type === 'path') {\n                var values = Str(value).toLowerCase().split('-'),\n                    p = o.paper,\n                    se = isEnd ? 'end' : 'start',\n                    node = o.node,\n                    attrs = o.attrs,\n                    stroke = attrs['stroke-width'],\n                    i = values.length,\n                    type = 'classic',\n                    from,\n                    to,\n                    dx,\n                    refX,\n                    attr,\n                    w = 3,\n                    h = 3,\n                    t = 5;\n                while (i--) {\n                    switch (values[i]) {\n                    case 'block':\n                    case 'classic':\n                    case 'oval':\n                    case 'diamond':\n                    case 'open':\n                    case 'none':\n                        type = values[i];\n                        break;\n                    case 'wide':\n                        h = 5;\n                        break;\n                    case 'narrow':\n                        h = 2;\n                        break;\n                    case 'long':\n                        w = 5;\n                        break;\n                    case 'short':\n                        w = 2;\n                        break;\n                    }\n                }\n                if (type === 'open') {\n                    w += 2;\n                    h += 2;\n                    t += 2;\n                    dx = 1;\n                    refX = isEnd ? 4 : 1;\n                    attr = {\n                        fill: noneStr,\n                        stroke: attrs.stroke\n                    };\n                } else {\n                    refX = dx = w / 2;\n                    attr = {\n                        fill: attrs.stroke,\n                        stroke: noneStr\n                    };\n                }\n                if (o._.arrows) {\n                    if (isEnd) {\n                        o._.arrows.endPath && markerCounter[o._.arrows.endPath]--;\n                        o._.arrows.endMarker && markerCounter[o._.arrows.endMarker]--;\n                    } else {\n                        o._.arrows.startPath && markerCounter[o._.arrows.startPath]--;\n                        o._.arrows.startMarker && markerCounter[o._.arrows.startMarker]--;\n                    }\n                } else {\n                    o._.arrows = {};\n                }\n                if (type !== noneStr) {\n                    var pathId = 'raphael-marker-' + type,\n                        markerId = 'raphael-marker-' + se + type + w + h + '-obj' + o.id;\n                    if (!R._g.doc.getElementById(pathId)) {\n                        p.defs.appendChild($($('path'), {\n                            'stroke-linecap': 'round',\n                            d: markers[type],\n                            id: pathId\n                        }));\n                        markerCounter[pathId] = 1;\n                    } else {\n                        markerCounter[pathId]++;\n                    }\n                    var marker = R._g.doc.getElementById(markerId),\n                        use;\n                    if (!marker) {\n                        marker = $($('marker'), {\n                            id: markerId,\n                            markerHeight: h,\n                            markerWidth: w,\n                            orient: 'auto',\n                            refX: refX,\n                            refY: h / 2\n                        });\n                        use = $($('use'), {\n                            'xlink:href': '#' + pathId,\n                            transform: (isEnd ? 'rotate(180 ' + w / 2 + S + h / 2 + ') ' : E) + 'scale(' + w / t + ',' + h / t + ')',\n                            'stroke-width': (1 / ((w / t + h / t) / 2)).toFixed(4)\n                        });\n                        marker.appendChild(use);\n                        p.defs.appendChild(marker);\n                        markerCounter[markerId] = 1;\n                    } else {\n                        markerCounter[markerId]++;\n                        use = marker.getElementsByTagName('use')[0];\n                    }\n                    $(use, attr);\n                    var delta = dx * (type !== 'diamond' && type !== 'oval');\n                    if (isEnd) {\n                        from = o._.arrows.startdx * stroke || 0;\n                        to = R.getTotalLength(attrs.path) - delta * stroke;\n                    } else {\n                        from = delta * stroke;\n                        to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\n                    }\n                    attr = {};\n                    attr['marker-' + se] = \"url('\" + R._url + '#' + markerId + \"')\";\n                    if (to || from) {\n                        attr.d = R.getSubpath(attrs.path, from, to);\n                    }\n                    $(node, attr);\n                    o._.arrows[se + 'Path'] = pathId;\n                    o._.arrows[se + 'Marker'] = markerId;\n                    o._.arrows[se + 'dx'] = delta;\n                    o._.arrows[se + 'Type'] = type;\n                    o._.arrows[se + typeStringSTR] = value;\n                } else {\n                    if (isEnd) {\n                        from = o._.arrows.startdx * stroke || 0;\n                        to = R.getTotalLength(attrs.path) - from;\n                    } else {\n                        from = 0;\n                        to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\n                    }\n                    o._.arrows[se + 'Path'] && $(node, {\n                        d: R.getSubpath(attrs.path, from, to)\n                    });\n                    delete o._.arrows[se + 'Path'];\n                    delete o._.arrows[se + 'Marker'];\n                    delete o._.arrows[se + 'dx'];\n                    delete o._.arrows[se + 'Type'];\n                    delete o._.arrows[se + typeStringSTR];\n                }\n                for (attr in markerCounter) {\n                    if (markerCounter[has](attr) && !markerCounter[attr]) {\n                        var item = R._g.doc.getElementById(attr);\n                        item && item.parentNode.removeChild(item);\n                    }\n                }\n            }\n        }\n    };\n\n    /*\\\n     * Raphael.setWindow\n     [ method ]\n     **\n     * Used when you need to draw in `&lt;iframe>`. Switched window to the iframe one.\n     > Parameters\n     - newwin (window) new window object\n    \\*/\n    R.setWindow = function (newwin) {\n        eve(\"raphael.setWindow\", R, g.win, newwin);\n        win = g.win = newwin;\n        doc = g.doc = g.win.document;\n        if (R._engine.initWin) {\n            R._engine.initWin(g.win);\n        }\n    };\n\n    /*\\\n     * Raphael.getColor\n     [ method ]\n     **\n     * On each call returns next colour in the spectrum. To reset it back to red call @Raphael.getColor.reset\n     > Parameters\n     - value (number) #optional brightness, default is `0.75`\n     = (string) hex representation of the colour.\n    \\*/\n    R.getColor = function(value) {\n        var start = this.getColor.start = this.getColor.start || {\n            h: 0,\n            s: 1,\n            b: value || .75\n        },\n        rgb = this.hsb2rgb(start.h, start.s, start.b);\n        start.h += .075;\n        if (start.h > 1) {\n            start.h = 0;\n            start.s -= .2;\n            start.s <= 0 && (this.getColor.start = {\n                h: 0,\n                s: 1,\n                b: start.b\n            });\n        }\n        return rgb.hex;\n    };\n\n    /*\\\n     * Raphael.getColor.reset\n     [ method ]\n     **\n     * Resets spectrum position for @Raphael.getColor back to red.\n    \\*/\n    R.getColor.reset = function() {\n        delete this.start;\n    };\n\n    /*\\\n     * Raphael.hsb\n     [ method ]\n     **\n     * Converts HSB values to hex representation of the colour.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - b (number) value or brightness\n     = (string) hex representation of the colour.\n    \\*/\n    R.hsb = cacher(function(h, s, b) {\n        return R.hsb2rgb(h, s, b).hex;\n    });\n\n    /*\\\n     * Raphael.hsl\n     [ method ]\n     **\n     * Converts HSL values to hex representation of the colour.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - l (number) luminosity\n     = (string) hex representation of the colour.\n    \\*/\n    R.hsl = cacher(function(h, s, l) {\n        return R.hsl2rgb(h, s, l).hex;\n    });\n\n    /*\\\n     * Raphael.angle\n     [ method ]\n     **\n     * Returns angle between two or three points\n     > Parameters\n     - x1 (number) x coord of first point\n     - y1 (number) y coord of first point\n     - x2 (number) x coord of second point\n     - y2 (number) y coord of second point\n     - x3 (number) #optional x coord of third point\n     - y3 (number) #optional y coord of third point\n     = (number) angle in degrees.\n    \\*/\n    R.angle = function (x1, y1, x2, y2, x3, y3) {\n        if (x3 == null) {\n            var x = x1 - x2,\n            y = y1 - y2;\n            if (!x && !y) {\n                return 0;\n            }\n            return (180 + math.atan2(-y, -x) * rad2deg + 360) % 360;\n        }\n        else {\n            return R.angle(x1, y1, x3, y3) - R.angle(x2, y2, x3, y3);\n        }\n    };\n\n    R.getSubpath = function(path, from, to) {\n        if (this.getTotalLength(path) - to < 1e-6) {\n            return getSubpathsAtLength(path, from).end;\n        }\n        var a = getSubpathsAtLength(path, to, 1);\n        return from ? getSubpathsAtLength(a, from).end : a;\n    };\n\n    R.pathToRelative = pathToRelative;\n\n    /*\n     * Paper.getFont\n     [ method ]\n     **\n     * Finds font object in the registered fonts by given parameters. You could specify only one word from the font name, like Myriad for Myriad Pro.\n     **\n     > Parameters\n     **\n     - family (string) font family name or any word from it\n     - weight (string) #optional font weight\n     - style (string) #optional font style\n     - stretch (string) #optional font stretch\n     = (object) the font object\n     > Usage\n     | paper.print(100, 100, 'Test string', paper.getFont('Times', 800), 30);\n    */\n    paperproto.getFont = function (family, weight, style, stretch) {\n        stretch = stretch || 'normal';\n        style = style || 'normal';\n        weight = +weight || {\n            normal: 400,\n            bold: 700,\n            lighter: 300,\n            bolder: 800\n        }\n        [weight] || 400;\n        if (!R.fonts) {\n            return;\n        }\n        var font = R.fonts[family];\n        if (!font) {\n            var name = new RegExp('(^|\\\\s)' + family.replace(/[^\\w\\d\\s+!~.:_-]/g, E) + '(\\\\s|$)', 'i');\n            for (var fontName in R.fonts) {\n                if (R.fonts[has](fontName)) {\n                    if (name.test(fontName)) {\n                        font = R.fonts[fontName];\n                        break;\n                    }\n                }\n            }\n        }\n        var thefont;\n        if (font) {\n            for (var i = 0, ii = font.length; i < ii; i++) {\n                thefont = font[i];\n                if (thefont.face['font-weight'] == weight && (thefont.face['font-style'] == style || !thefont.face['font-style']) && thefont.face['font-stretch'] == stretch) {\n                    break;\n                }\n            }\n        }\n        return thefont;\n    };\n\n    /*\n     * Paper.print\n     [ method ]\n     **\n     * Creates path that represent given text written using given font at given position with given size.\n     * Result of the method is path element that contains whole text as a separate path.\n     **\n     > Parameters\n     **\n     - x (number) x position of the text\n     - y (number) y position of the text\n     - string (string) text to print\n     - font (object) font object, see @Paper.getFont\n     - size (number) #optional size of the font, default is `16`\n     - origin (string) #optional could be `'baseline'` or `'middle'`, default is `'middle'`\n     - letter_spacing (number) #optional number in range `-1..1`, default is `0`\n     = (object) resulting path element, which consist of all letters\n     > Usage\n     | var txt = r.print(10, 50, 'print', r.getFont('Museo'), 30).attr({fill: '#fff'});\n    */\n    paperproto.print = function (x, y, string, font, size, origin, letterSpacing) {\n        origin = origin || 'middle'; // baseline|middle\n        letterSpacing = mmax(mmin(letterSpacing || 0, 1), -1);\n        var letters = Str(string)[split](E),\n            shift = 0,\n            notfirst = 0,\n            path = E,\n            scale;\n        R.is(font, string) && (font = this.getFont(font));\n        if (font) {\n            scale = (size || 16) / font.face['units-per-em'];\n            var bb = font.face.bbox[split](separator),\n                top = +bb[0],\n                lineHeight = bb[3] - bb[1],\n                shifty = 0,\n                height = + bb[1] + (origin == 'baseline' ? lineHeight + ( + font.face.descent) : lineHeight / 2);\n            for (var i = 0, ii = letters.length; i < ii; i++) {\n                if (letters[i] == '\\n') {\n                    shift = 0;\n                    curr = 0;\n                    notfirst = 0;\n                    shifty += lineHeight;\n                } else {\n                    var prev = notfirst && font.glyphs[letters[i - 1]] || {},\n                    curr = font.glyphs[letters[i]];\n                    shift += notfirst ? (prev.w || font.w) + (prev.k && prev.k[letters[i]] || 0) + (font.w * letterSpacing) : 0;\n                    notfirst = 1;\n                }\n                if (curr && curr.d) {\n                    path += R.transformPath(curr.d, ['t', shift * scale, shifty * scale, 's', scale, scale, top, height, 't', (x - top) / scale, (y - height) / scale]);\n                }\n            }\n        }\n        return this.path(path).attr({\n            fill: '#000',\n            stroke: 'none'\n        });\n    };\n\n    /*\n     * Paper.add\n     [ method ]\n     **\n     * Imports elements in JSON array in format `{type: type, <attributes>}`\n     **\n     > Parameters\n     **\n     - json (array)\n     = (object) resulting set of imported elements\n     > Usage\n     | paper.add([\n     |     {\n     |         type: 'circle',\n     |         cx: 10,\n     |         cy: 10,\n     |         r: 5\n     |     },\n     |     {\n     |         type: 'rect',\n     |         x: 10,\n     |         y: 10,\n     |         width: 10,\n     |         height: 10,\n     |         fill: '#fc0'\n     |     }\n     | ]);\n    */\n    paperproto.add = function (json) {\n        if (R.is(json, 'array')) {\n            var res = this.set(),\n                i = 0,\n                ii = json.length,\n                j;\n            for (; i < ii; i++) {\n                j = json[i] || {};\n                elements[has](j.type) && res.push(this[j.type]().attr(j));\n            }\n        }\n        return res;\n    };\n    /*\n     * Paper.getElementByPoint\n     [ method ]\n     **\n     * Returns you topmost element under given point.\n     **\n     = (object) Raphal element object\n     > Parameters\n     **\n     - x (number) x coordinate from the top left corner of the window\n     - y (number) y coordinate from the top left corner of the window\n     > Usage\n     | paper.getElementByPoint(mouseX, mouseY).attr({stroke: '#f00'});\n    */\n    paperproto.getElementByPoint = function (x, y) {\n        var paper = this,\n            svg = paper.canvas,\n            target = g.doc.elementFromPoint(x, y);\n        if (g.win.opera && target.tagName == 'svg') {\n            var so = getOffset(svg),\n                sr = svg.createSVGRect();\n            sr.x = x - so.x;\n            sr.y = y - so.y;\n            sr.width = sr.height = 1;\n            var hits = svg.getIntersectionList(sr, null);\n            if (hits.length) {\n                target = hits[hits.length - 1];\n            }\n        }\n        if (!target) {\n            return null;\n        }\n        while (target.parentNode && target != svg.parentNode && !target.raphael) {\n            target = target.parentNode;\n        }\n        target == paper.canvas.parentNode && (target = svg);\n        target = target && target.raphael ? paper.getById(target.raphaelid) : null;\n        return target;\n    };\n\n    /*\n     * Paper.getElementsByBBox\n     [ method ]\n     **\n     * Returns set of elements that have an intersecting bounding box\n     **\n     > Parameters\n     **\n     - bbox (object) bbox to check with\n     = (object) @Set\n     */\n    paperproto.getElementsByBBox = function (bbox) {\n        var set = this.set();\n        this.forEach(function (el) {\n            if (R.isBBoxIntersect(el.getBBox(), bbox)) {\n                set.push(el);\n            }\n        });\n        return set;\n    };\n\n    /*\n     * Paper.forEach\n     [ method ]\n     **\n     * Executes given function for each element on the paper\n     *\n     * If callback function returns `false` it will stop loop running.\n     **\n     > Parameters\n     **\n     - callback (function) function to run\n     - thisArg (object) context object for the callback\n     = (object) Paper object\n     > Usage\n     | paper.forEach(function (el) {\n     |     el.attr({ stroke: 'blue' });\n     | });\n    */\n    paperproto.forEach = function (callback, thisArg) {\n        var bot = this.bottom;\n        while (bot) {\n            if (callback.call(thisArg, bot) === false) {\n                return this;\n            }\n            bot = bot.next;\n        }\n        return this;\n    };\n\n    /*\n     * Paper.getElementsByPoint\n     [ method ]\n     **\n     * Returns set of elements that have common point inside\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the point\n     - y (number) y coordinate of the point\n     = (object) @Set\n    */\n    paperproto.getElementsByPoint = function (x, y) {\n        var set = this.set();\n        this.forEach(function (el) {\n            if (el.isPointInside(x, y)) {\n                set.push(el);\n            }\n        });\n        return set;\n    };\n\n    /*\n     * Paper.set\n     [ method ]\n     **\n     * Creates array-like object to keep and operate several elements at once.\n     * Warning: it doesnt create any elements for itself in the page, it just groups existing elements.\n     * Sets act as pseudo elements  all methods available to an element can be used on a set.\n     = (object) array-like object that represents set of elements\n     **\n     > Usage\n     | var st = paper.set();\n     | st.push(\n     |     paper.circle(10, 10, 5),\n     |     paper.circle(30, 10, 5)\n     | );\n     | st.attr({fill: 'red'}); // changes the fill of both circles\n    */\n    paperproto.set = function (itemsArray) {\n        var args = getArrayCopy(arguments);\n        !R.is(itemsArray, 'array') && (itemsArray = Array.prototype.splice.call(args, 0, args.length));\n        var out = new Set(itemsArray);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n\n    /*\n     * Paper.setStart\n     [ method ]\n     **\n     * Creates @Paper.set. All elements that will be created after calling this method and before calling\n     * @Paper.setFinish will be added to the set.\n     **\n     > Usage\n     | paper.setStart();\n     | paper.circle(10, 10, 5),\n     | paper.circle(30, 10, 5)\n     | var st = paper.setFinish();\n     | st.attr({fill: 'red'}); // changes the fill of both circles\n    */\n    paperproto.setStart = function (set) {\n        this.__set__ = set || this.set();\n    };\n\n    /*\n     * Paper.setFinish\n     [ method ]\n     **\n     * See @Paper.setStart. This method finishes catching and returns resulting set.\n     **\n     = (object) set\n    */\n    paperproto.setFinish = function (set) {\n        var out = this.__set__;\n        delete this.__set__;\n        return out;\n    };\n\n    /*\\\n     * Paper.removeDefs\n     [ method ]\n     **\n     * Remove a particular definition of given id from paper\n     **\n     > Parameters\n     **\n     - id (string) id of the element to remove\n     **\n     > Usage\n     | paper.removeDefs(id);\n    \\*/\n    paperproto.removeDefs = function (id) {\n        if (!R.svg) {\n            return;\n        }\n        var element = R._g.doc.getElementById(id);\n        element && element.remove();\n    };\n\n    /*\\\n     * Paper.updateDefs\n     [ method ]\n     **\n     * Update definitions in paper\n     **\n     > Parameters\n     **\n     - id (string or object) id of the element or the element node itself\n     - attrObj (object) attribute of the element object with it's children attributes nested\n     - hardUpdateChildren (boolean) determines whether to create new children if child elements are less than\n       the children in attrObj or remove children in same manner\n     **\n     > Usage\n     | paper.updateDefs(id, {\n     |      width: '100%',\n     |      height: '100%',\n     |      children: [{\n     |          dx: '2'\n     |      }]\n     |   }, true);\n     | // Updates element of given id\n     | // Updates the child element if present and create new child if found less than the children in attrObj\n     | // and delete a child in same manner according to value of 'hardUpdateChildren'\n    \\*/\n    paperproto.updateDefs = function (id, attrObj, hardUpdateChildren) {\n        if (!R.svg) {\n            return;\n        }\n        var paper = this,\n            element = !(id instanceof Node) ? R._g.doc.getElementById(id) : id,\n            attrKey,\n            i,\n            diff,\n            len,\n            children = attrObj.children || [],\n            elemChildren,\n            childId,\n            attr = {};\n\n        (hardUpdateChildren === undefined) && (hardUpdateChildren = true);\n\n        if (element) {\n            for (attrKey in attrObj) {\n                if (attrKey !== 'tagName' && attrKey !== 'children') {\n                    element.setAttribute(attrKey, attrObj[attrKey]);\n                }\n            }\n            elemChildren = element.children;\n            for (i = 0, len = children.length; i < len; i++) {\n                childId = children[i].id;\n                elemChildren[i] ? paper.updateDefs(childId || elemChildren[i], children[i]) :\n                    hardUpdateChildren && paper._createDOMNodes(element, children[i]);\n            }\n            if (hardUpdateChildren) {\n                diff = elemChildren.length - i;\n                while (diff > 0) {\n                    elemChildren[elemChildren.length - 1].remove();\n                    diff--;\n                }\n            }\n        }\n    };\n\n    /*\n     * Element.isPointInside\n     [ method ]\n     **\n     * Determine if given point is inside this elements shape\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the point\n     - y (number) y coordinate of the point\n     = (boolean) `true` if point inside the shape\n    */\n    elproto.isPointInside = function (x, y) {\n        var rp = this.realPath = this.realPath || getPath[this.type](this),\n            tr;\n        return R.isPointInsidePath(((tr = this.attr('transform')) &&\n            tr.length && R.transformPath(rp, tr)) || rp, x, y);\n    };\n\n    /*\n     * Element.glow\n     [ method ]\n     **\n     * Return set of elements that create glow-like effect around given element. See @Paper.set.\n     *\n     * Note: Glow is not connected to the element. If you change element attributes it wont adjust itself.\n     **\n     > Parameters\n     **\n     - glow (object) #optional parameters object with all properties optional:\n     o {\n     o     width (number) size of the glow, default is `10`\n     o     fill (boolean) will it be filled, default is `false`\n     o     opacity (number) opacity, default is `0.5`\n     o     offsetx (number) horizontal offset, default is `0`\n     o     offsety (number) vertical offset, default is `0`\n     o     color (string) glow colour, default is `black`\n     o }\n     = (object) @Paper.set of elements that represents glow\n    */\n    elproto.glow = function (glow) {\n        if (this.type == 'text') {\n            return null;\n        }\n        glow = glow || {};\n        var s = {\n                width: (glow.width || 10) + (+this.attr('stroke-width') || 1),\n                fill: glow.fill || false,\n                opacity: glow.opacity || 0.5,\n                offsetx: glow.offsetx || 0,\n                offsety: glow.offsety || 0,\n                color: glow.color || '#000'\n            },\n            c = s.width / 2,\n            r = this.paper,\n            out = r.set(),\n            path = this.realPath || getPath[this.type](this);\n        path = this.matrix ? R.mapPath(path, this.matrix) : path;\n        for (var i = 1; i < c + 1; i++) {\n            out.push(r.path(path).attr({\n                stroke: s.color,\n                fill: s.fill ? s.color : 'none',\n                'stroke-linejoin': 'round',\n                'stroke-linecap': 'round',\n                'stroke-width': +(s.width / c * i).toFixed(3),\n                opacity: +(s.opacity / c).toFixed(3)\n            }));\n        }\n        return out.insertBefore(this).translate(s.offsetx, s.offsety);\n    };\n\n    /*\n     * Element.setTime\n     [ method ]\n     **\n     * Sets the status of animation of the element in milliseconds. Similar to @Element.status method.\n     **\n     > Parameters\n     **\n     - anim (object) animation object\n     - value (number) number of milliseconds from the beginning of the animation\n     **\n     = (object) original element if `value` is specified\n     * Note, that during animation following events are triggered:\n     *\n     * On each animation frame event `anim.frame.<id>`, on start `anim.start.<id>` and on end `anim.finish.<id>`.\n    */\n    elproto.setTime = function (anim, value) {\n        if (anim && value != null) {\n            this.status(anim, mmin(value, anim.ms) / anim.ms);\n        }\n        return this;\n    };\n\n    elproto.blur = function (size) {\n        if (R.svg) {\n            // Experimental. No Safari support. Use it on your own risk.\n            var t = this;\n            if (+size !== 0) {\n                var fltr = $('filter'),\n                    blur = $('feGaussianBlur');\n                t.attrs.blur = size;\n                fltr.id = R.getElementID(R.createUUID());\n                $(blur, {\n                    stdDeviation: +size || 1.5\n                });\n                fltr.appendChild(blur);\n                t.paper.defs.appendChild(fltr);\n                t._blur = fltr;\n                $(t.node, {\n                    filter: \"url('\" + R._url + '#' + fltr.id + \"')\"\n                });\n            } else {\n                if (t._blur) {\n                    t._blur.parentNode.removeChild(t._blur);\n                    delete t._blur;\n                    delete t.attrs.blur;\n                }\n                t.node.removeAttribute('filter');\n            }\n        } else if (R.vml) {\n            var s = this.node.runtimeStyle,\n            f = s.filter;\n            f = f.replace(blurregexp, E);\n            if (+size !== 0) {\n                this.attrs.blur = size;\n                s.filter = f + S + ms + \".Blur(pixelradius=\" + (+size || 1.5) + \")\";\n                s.margin = R.format(\"-{0}px 0 0 -{0}px\", round(+size || 1.5));\n            } else {\n                s.filter = f;\n                s.margin = 0;\n                delete this.attrs.blur;\n            }\n            return this;\n        } else if (R.canvas) {\n            return this;\n        }\n    };\n\n    /*\\\n     * Raphael.getSubpath\n     [ method ]\n     **\n     * Return subpath of a given path from given length to given length.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string\n     - from (number) position of the start of the segment\n     - to (number) position of the end of the segment\n     **\n     = (string) pathstring for the segment\n    \\*/\n    elproto.getSubpath = function(from, to) {\n        if (this.type != \"path\") {\n            return;\n        }\n        return R.getSubpath(this.attrs.path, from, to);\n    };\n\n    /*\n     * Set.push\n     [ method ]\n     **\n     * Adds each argument to the current set.\n     = (object) original element\n    */\n    setproto.push = function () {\n        var item,\n            len;\n        for (var i = 0, ii = arguments.length; i < ii; i++) {\n            item = arguments[i];\n            if (item && (item.constructor == elproto.constructor || item.constructor == Set)) {\n                len = this.items.length;\n                this[len] = this.items[len] = item;\n                this.length++;\n            }\n        }\n        return this;\n    };\n\n    /*\n     * Set.pop\n     [ method ]\n     **\n     * Removes last element and returns it.\n     = (object) element\n    */\n    setproto.pop = function () {\n        this.length && delete this[this.length--];\n        return this.items.pop();\n    };\n\n    /*\n     * Set.forEach\n     [ method ]\n     **\n     * Executes given function for each element in the set.\n     *\n     * If function returns `false` it will stop loop running.\n     **\n     > Parameters\n     **\n     - callback (function) function to run\n     - thisArg (object) context object for the callback\n     = (object) Set object\n    */\n    setproto.forEach = function (callback, thisArg) {\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\n            if (callback.call(thisArg, this.items[i], i) === false) {\n                return this;\n            }\n        }\n        return this;\n    };\n    for (var method in elproto) {\n        if (elproto[has](method)) {\n            setproto[method] = (function (methodname) {\n                return function () {\n                    var arg = arguments;\n                    return this.forEach(function (el) {\n                        el[methodname][apply](el, arg);\n                    });\n                };\n            })(method);\n        }\n    }\n    setproto.attr = function (name, value) {\n        if (name && R.is(name, array) && R.is(name[0], object)) {\n            for (var j = 0, jj = name.length; j < jj; j++) {\n                this.items[j].attr(name[j]);\n            }\n        } else {\n            for (var i = 0, ii = this.items.length; i < ii; i++) {\n                this.items[i].attr(name, value);\n            }\n        }\n        return this;\n    };\n\n    /*\n     * Set.clear\n     [ method ]\n     **\n     * Removeds all elements from the set\n    */\n    setproto.clear = function () {\n        while (this.length) {\n            this.pop();\n        }\n    };\n\n    /*\n     * Set.splice\n     [ method ]\n     **\n     * Removes given element from the set\n     **\n     > Parameters\n     **\n     - index (number) position of the deletion\n     - count (number) number of element to remove\n     - insertion (object) #optional elements to insert\n     = (object) set elements that were deleted\n    */\n    setproto.splice = function (index, count, insertion) {\n        index = index < 0 ? mmax(this.length + index, 0) : index;\n        count = mmax(0, mmin(this.length - index, isNaN(count) && this.length || count));\n        var tail = [],\n            todel = [],\n            args = [],\n            arglen,\n            i;\n        for (i = 2; i < arguments.length; i++) {\n            args.push(arguments[i]);\n        }\n        for (i = 0; i < count; i++) {\n            todel.push(this[index + i]);\n        }\n        for (; i < this.length - index; i++) {\n            tail.push(this[index + i]);\n        }\n        arglen = args.length;\n        for (i = 0; i < arglen + tail.length; i++) {\n            this.items[index + i] = this[index + i] = i < arglen ? args[i] : tail[i - arglen];\n        }\n        i = this.items.length = this.length -= count - arglen;\n        while (this[i]) {\n            delete this[i++];\n        }\n        return new Set(todel);\n    };\n\n    /*\n     * Set.exclude\n     [ method ]\n     **\n     * Removes given element from the set\n     **\n     > Parameters\n     **\n     - element (object) element to remove\n     = (boolean) `true` if object was found & removed from the set\n    */\n    setproto.exclude = function (el) {\n        for (var i = 0, ii = this.length; i < ii; i++) {\n            if (this[i] == el) {\n                this.splice(i, 1);\n                return true;\n            }\n        }\n    };\n    setproto.animate = function (params, ms, easing, callback) {\n        (R.is(easing, 'function') || !easing) && (callback = easing || null);\n        var len = this.items.length,\n            i = len,\n            item,\n            anim,\n            set = this,\n            collector;\n        if (!len) {\n            return this;\n        }\n        callback && (collector = function() {\n            !--len && callback.call(set);\n        });\n        easing = R.is(easing, string) ? easing : collector;\n        anim = R.animation(params, ms, easing, collector);\n        item = this.items[--i].animate(anim);\n        while (i--) {\n            this.items[i] && !this.items[i].removed && this.items[i].animateWith(item, anim, anim);\n        }\n        return this;\n    };\n    setproto.insertAfter = function (el) {\n        var i = this.items.length;\n        while (i--) {\n            this.items[i].insertAfter(el);\n        }\n        return this;\n    };\n    setproto.getBBox = function () {\n        var x = [],\n            y = [],\n            x2 = [],\n            y2 = [];\n        for (var i = this.items.length; i--;) {\n            if (!this.items[i].removed) {\n                var box = this.items[i].getBBox();\n                x.push(box.x);\n                y.push(box.y);\n                x2.push(box.x + box.width);\n                y2.push(box.y + box.height);\n            }\n        }\n        x = mmin[apply](0, x);\n        y = mmin[apply](0, y);\n        x2 = mmax[apply](0, x2);\n        y2 = mmax[apply](0, y2);\n        return {\n            x: x,\n            y: y,\n            x2: x2,\n            y2: y2,\n            width: x2 - x,\n            height: y2 - y\n        };\n    };\n    setproto.clone = function (s) {\n        s = new Set();\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\n            s.push(this.items[i].clone());\n        }\n        return s;\n    };\n    setproto.toString = function () {\n        return 'Rapha\\xebl\\u2018s set';\n    };\n\n    setproto.glow = function (glowConfig) {\n        var ret = this.paper.set();\n        this.forEach(function(shape, index) {\n            var g = shape.glow(glowConfig);\n            if (g != null) {\n                g.forEach(function (shape2, index2) {\n                    ret.push(shape2);\n                });\n            }\n        });\n        return ret;\n    };\n\n    function inter(bez1, bez2) {\n        return interHelper(bez1, bez2);\n    }\n\n    function interCount(bez1, bez2) {\n        return interHelper(bez1, bez2, 1);\n    }\n\n    function interHelper(bez1, bez2, justCount) {\n        var bbox1 = R.bezierBBox(bez1),\n            bbox2 = R.bezierBBox(bez2);\n\n        if (!R.isBBoxIntersect(bbox1, bbox2)) {\n            return justCount ? 0 : [];\n        }\n        var l1 = bezlen.apply(0, bez1),\n            l2 = bezlen.apply(0, bez2),\n            n1 = mmax(~~(l1 / 5), 1),\n            n2 = mmax(~~(l2 / 5), 1),\n            dots1 = [],\n            dots2 = [],\n            xy = {},\n            res = justCount ? 0 : [];\n\n        for (var i = 0; i < n1 + 1; i++) {\n            var p = R.findDotsAtSegment.apply(R, bez1.concat(i / n1));\n            dots1.push({\n                x: p.x,\n                y: p.y,\n                t: i / n1\n            });\n        }\n        for (i = 0; i < n2 + 1; i++) {\n            p = R.findDotsAtSegment.apply(R, bez2.concat(i / n2));\n            dots2.push({\n                x: p.x,\n                y: p.y,\n                t: i / n2\n            });\n        }\n        for (i = 0; i < n1; i++) {\n            for (var j = 0; j < n2; j++) {\n                var di = dots1[i],\n                di1 = dots1[i + 1],\n                dj = dots2[j],\n                dj1 = dots2[j + 1],\n                ci = abs(di1.x - di.x) < .001 ? \"y\" : \"x\",\n                cj = abs(dj1.x - dj.x) < .001 ? \"y\" : \"x\",\n                is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);\n                if (is) {\n                    if (xy[is.x.toFixed(4)] === is.y.toFixed(4)) {\n                        continue;\n                    }\n                    xy[is.x.toFixed(4)] = is.y.toFixed(4);\n                    var t1 = di.t + abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t),\n                    t2 = dj.t + abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);\n                    if (t1 >= 0 && t1 <= 1.001 && t2 >= 0 && t2 <= 1.001) {\n                        if (justCount) {\n                            res++;\n                        } else {\n                            res.push({\n                                x: is.x,\n                                y: is.y,\n                                t1: mmin(t1, 1),\n                                t2: mmin(t2, 1)\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        return res;\n    }\n\n    /*\\\n     * Raphael.pathIntersection\n     [ method ]\n     **\n     * Utility method\n     **\n     * Finds intersections of two paths\n     > Parameters\n     - path1 (string) path string\n     - path2 (string) path string\n     = (array) dots of intersection\n     o [\n     o     {\n     o         x: (number) x coordinate of the point\n     o         y: (number) y coordinate of the point\n     o         t1: (number) t value for segment of path1\n     o         t2: (number) t value for segment of path2\n     o         segment1: (number) order number for segment of path1\n     o         segment2: (number) order number for segment of path2\n     o         bez1: (array) eight coordinates representing bezir curve for the segment of path1\n     o         bez2: (array) eight coordinates representing bezir curve for the segment of path2\n     o     }\n     o ]\n    \\*/\n    R.pathIntersection = function(path1, path2) {\n        return interPathHelper(path1, path2);\n    };\n    R.pathIntersectionNumber = function(path1, path2) {\n        return interPathHelper(path1, path2, 1);\n    };\n    function interPathHelper(path1, path2, justCount) {\n        path1 = R._path2curve(path1);\n        path2 = R._path2curve(path2);\n        var x1, y1, x2, y2, x1m, y1m, x2m, y2m, bez1, bez2,\n        res = justCount ? 0 : [];\n        for (var i = 0, ii = path1.length; i < ii; i++) {\n            var pi = path1[i];\n            if (pi[0] === strM) {\n                x1 = x1m = pi[1];\n                y1 = y1m = pi[2];\n            } else {\n                if (pi[0] === \"C\") {\n                    bez1 = [x1, y1].concat(pi.slice(1));\n                    x1 = bez1[6];\n                    y1 = bez1[7];\n                } else {\n                    bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];\n                    x1 = x1m;\n                    y1 = y1m;\n                }\n                for (var j = 0, jj = path2.length; j < jj; j++) {\n                    var pj = path2[j];\n                    if (pj[0] === strM) {\n                        x2 = x2m = pj[1];\n                        y2 = y2m = pj[2];\n                    } else {\n                        if (pj[0] === \"C\") {\n                            bez2 = [x2, y2].concat(pj.slice(1));\n                            x2 = bez2[6];\n                            y2 = bez2[7];\n                        } else {\n                            bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];\n                            x2 = x2m;\n                            y2 = y2m;\n                        }\n                        var intr = interHelper(bez1, bez2, justCount);\n                        if (justCount) {\n                            res += intr;\n                        } else {\n                            for (var k = 0, kk = intr.length; k < kk; k++) {\n                                intr[k].segment1 = i;\n                                intr[k].segment2 = j;\n                                intr[k].bez1 = bez1;\n                                intr[k].bez2 = bez2;\n                            }\n                            res = res.concat(intr);\n                        }\n                    }\n                }\n            }\n        }\n        return res;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./source/raphael.core-extend.js","import {\n    getArrayCopy,\n    loadRefImage,\n    showRecursively,\n    dashedAttr2CSSMap\n} from './raphael.lib';\n\n/** !\n* RedRaphael 1.0.0 - JavaScript Vector Library SVG Module\n* Copyright (c) 2012-2013 FusionCharts, Inc. <http://www.fusioncharts.com>\n*\n* Raphael 2.1.0 - JavaScript Vector Library SVG Module\n* Copyright (c) 2008-2012 Dmitry Baranovskiy <http://raphaeljs.com>\n* Copyright  2008-2012 Sencha Labs <http://sencha.com>\n*\n* Licensed under the MIT license.\n*/\n// Define _window as window object in case of indivual file inclusion.\nexport default function (R) {\n    if (R.svg) {\n        var has = 'hasOwnProperty',\n            tSpanStr = 'tspan',\n            vAlignStr = 'vertical-align',\n            lineHeightStr = 'line-height',\n            fontSizeStr = 'font-size',\n            // fontFamilyStr = 'font-family',\n            imageStr = 'image',\n            noneStr = 'none',\n            notToTuneStr = '_do-not-tune',\n            textStr = 'text',\n            textPathStr = 'textpath',\n            rtlStr = 'rtl',\n            arrayStr = 'array',\n            middleStr = 'middle',\n            bottomStr = 'bottom',\n            topStr = 'top',\n            pxStr = 'px',\n            initialStr = 'initial',\n            fnStr = 'function',\n            brStr = '<br>',\n            hiddenStr = 'hidden',\n            visibleStr = 'visible',\n            objectStr = 'object',\n            fillStr = 'fill',\n            transformStr = 'transform',\n            visibilityStr = 'visibility',\n            IESplTspanAttr = {\n                visibility: hiddenStr,\n                'font-size': '0px'\n            },\n            Str = String,\n            VERTICAL = 'vertical',\n            HORIZONTAL = 'horizontal',\n            PRESERVESTRING = 'pre',\n            BLANKSTRING = '',\n            toFloat = parseFloat,\n            toInt = parseInt,\n            vAlignMultiplier = {\n                top: 0,\n                bottom: -1,\n                middle: -0.5\n            },\n            win = R._g.win,\n            navigator = win.navigator,\n            isIE = /* @cc_on!@ */false || !!document.documentMode,\n            math = Math,\n            UNDEF,\n            mmax = math.max,\n            abs = math.abs,\n            pow = math.pow,\n            sqrt = math.sqrt,\n            xlinkRegx = /^xlink:/,\n            separator = /[, ]+/,\n            textBreakRegx = /\\n|<br\\s*?\\/?>/i,\n            ltgtbrRegex = /&lt|&gt|&quot|&#039|&#034|<br/i,\n            nbspRegex = /&nbsp;|&#160;|&#xA0;/g,\n            arrayShift = Array.prototype.shift,\n            zeroStrokeFix = !!(/AppleWebKit/.test(navigator.userAgent) &&\n                    (!/Chrome/.test(navigator.userAgent) ||\n                    navigator.appVersion.match(/Chrome\\/(\\d+)\\./)[1] < 29)),\n            eve = R.eve,\n            E = '',\n            S = ' ',\n            xlink = 'http://www.w3.org/1999/xlink',\n            svgNSStr = 'http://www.w3.org/2000/svg',\n            isIpad = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform),\n            typeStringSTR = 'string',\n            markers = {\n                block: 'M5,0 0,2.5 5,5z',\n                classic: 'M5,0 0,2.5 5,5 3.5,3 3.5,2z',\n                diamond: 'M2.5,0 5,2.5 2.5,5 0,2.5z',\n                open: 'M6,1 1,3.5 6,6',\n                oval: 'M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z'\n            },\n            shapeRenderingAttrs = {\n                speed: 'optimizeSpeed',\n                crisp: 'crispEdges',\n                precision: 'geometricPrecision'\n            },\n            nav = navigator.userAgent.toLowerCase(),\n            isIE9 = (function () {\n              var verIE = (nav.indexOf('msie') != -1) ? parseInt(nav.split('msie')[1]) : false;\n              if (verIE && (verIE === 9)) {\n                return true;\n              } else {\n                return false;\n              }\n            })(),\n            supportsPointer = R.supportsPointer,\n            supportsTouch = R.supportsTouch,\n            markerCounter = {},\n            preLoad = function (elem, ig, isURL, paper) {\n                R._preload(isURL[1], function () {\n                    var w = this.offsetWidth,\n                        h = this.offsetHeight;\n                    $(elem, {\n                        width: w,\n                        height: h\n                    });\n                    $(ig, {\n                        width: w,\n                        height: h\n                    });\n                    paper.safari();\n                });\n            },\n            quickExtend = function (obj1, obj2) {\n                if (obj2) {\n                    for (var key in obj2) {\n                        obj1[key] = obj2[key];\n                    }\n                }\n            },\n            lastHoveredInfo = {\n                elementInfo: []\n            },\n            doc = R._g.doc,\n            win = R._g.win,\n            safeMouseEventMapping = {\n                mouseover: \"touchstart\",\n                mousedown: \"touchstart\",\n                mouseup: \"touchend\",\n                mousemove: \"touchmove\",\n                mouseout: \"touchend\" // to handle mouseout event\n            },\n            allPossibleAttrs = {\n                \"accent-height\": true,\n                \"accumulate\": true,\n                \"additive\": true,\n                \"alignment-baseline\": true,\n                \"alphabetic\": true,\n                \"amplitude\": true,\n                \"arabic-form\": true,\n                \"ascent\": true,\n                \"azimuth\": true,\n                \"baseline-shift\": true,\n                \"bbox\": true,\n                \"begin\": true,\n                \"bias\": true,\n                \"by\": true,\n                \"cap-height\": true,\n                \"class\": true,\n                \"clip\": true,\n                \"clip-path\": true,\n                \"clip-rule\": true,\n                \"color\": true,\n                \"color-interpolation\": true,\n                \"color-interpolation-filters\": true,\n                \"color-profile\": true,\n                \"color-rendering\": true,\n                \"cursor\": true,\n                \"cx\": true,\n                \"cy\": true,\n                \"d\": true,\n                \"decelerate\": true,\n                \"descent\": true,\n                \"direction\": true,\n                \"display\": true,\n                \"divisor\": true,\n                \"dominant-baseline\": true,\n                \"dur\": true,\n                \"dx\": true,\n                \"dy\": true,\n                \"elevation\": true,\n                \"enable-background\": true,\n                \"end\": true,\n                \"exponent\": true,\n                \"fill\": true,\n                \"fill-opacity\": true,\n                \"fill-rule\": true,\n                \"filter\": true,\n                \"flood-color\": true,\n                \"flood-opacity\": true,\n                \"font-family\": true,\n                \"font-size\": true,\n                \"font-size-adjust\": true,\n                \"font-stretch\": true,\n                \"font-style\": true,\n                \"font-variant\": true,\n                \"font-weight\": true,\n                \"format\": true,\n                \"fr\": true,\n                \"from\": true,\n                \"fx\": true,\n                \"fy\": true,\n                \"g1\": true,\n                \"g2\": true,\n                \"glyph-name\": true,\n                \"glyph-orientation-horizontal\": true,\n                \"glyph-orientation-vertical\": true,\n                \"hanging\": true,\n                \"height\": true,\n                \"horiz-adv-x\": true,\n                \"horiz-origin-x\": true,\n                \"href\": true,\n                \"hreflang\": true,\n                \"id\": true,\n                \"ideographic\": true,\n                \"image-rendering\": true,\n                \"in2\": true,\n                \"in\": true,\n                \"intercept\": true,\n                \"k1\": true,\n                \"k2\": true,\n                \"k3\": true,\n                \"k4\": true,\n                \"k\": true,\n                \"kerning\": true,\n                \"lang\": true,\n                \"letter-spacing\": true,\n                \"lighting-color\": true,\n                \"local\": true,\n                \"marker-end\": true,\n                \"marker-mid\": true,\n                \"marker-start\": true,\n                \"mask\": true,\n                \"mathematical\": true,\n                \"max\": true,\n                \"media\": true,\n                \"method\": true,\n                \"min\": true,\n                \"mode\": true,\n                \"name\": true,\n                \"offset\": true,\n                \"opacity\": true,\n                \"operator\": true,\n                \"order\": true,\n                \"orient\": true,\n                \"orientation\": true,\n                \"origin\": true,\n                \"overflow\": true,\n                \"overline-position\": true,\n                \"overline-thickness\": true,\n                \"paint-order\": true,\n                \"panose-1\": true,\n                \"path\": true,\n                \"ping\": true,\n                \"pointer-events\": true,\n                \"points\": true,\n                \"r\": true,\n                \"radius\": true,\n                \"rel\": true,\n                \"rendering-intent\": true,\n                \"restart\": true,\n                \"result\": true,\n                \"rotate\": true,\n                \"rx\": true,\n                \"ry\": true,\n                \"scale\": true,\n                \"seed\": true,\n                \"shape-rendering\": true,\n                \"slope\": true,\n                \"spacing\": true,\n                \"speed\": true,\n                \"stemh\": true,\n                \"stemv\": true,\n                \"stop-color\": true,\n                \"stop-opacity\": true,\n                \"strikethrough-position\": true,\n                \"strikethrough-thickness\": true,\n                \"string\": true,\n                \"stroke\": true,\n                \"stroke-dasharray\": true,\n                \"stroke-dashoffset\": true,\n                \"stroke-linecap\": true,\n                \"stroke-linejoin\": true,\n                \"stroke-miterlimit\": true,\n                \"stroke-opacity\": true,\n                \"stroke-width\": true,\n                \"style\": true,\n                \"tabindex\": true,\n                \"target\": true,\n                \"text-anchor\": true,\n                \"text-decoration\": true,\n                \"text-rendering\": true,\n                \"to\": true,\n                \"transform\": true,\n                \"type\": true,\n                \"u1\": true,\n                \"u2\": true,\n                \"underline-position\": true,\n                \"underline-thickness\": true,\n                \"unicode\": true,\n                \"unicode-bidi\": true,\n                \"unicode-range\": true,\n                \"units-per-em\": true,\n                \"v-alphabetic\": true,\n                \"v-hanging\": true,\n                \"v-ideographic\": true,\n                \"v-mathematical\": true,\n                \"values\": true,\n                \"vector-effect\": true,\n                \"version\": true,\n                \"vert-adv-y\": true,\n                \"vert-origin-x\": true,\n                \"vert-origin-y\": true,\n                \"visibility\": true,\n                \"width\": true,\n                \"widths\": true,\n                \"word-spacing\": true,\n                \"writing-mode\": true,\n                \"x1\": true,\n                \"x2\": true,\n                \"x\": true,\n                \"x-height\": true,\n                \"xlink:actuate\": true,\n                \"xlink:arcrole\": true,\n                \"xlink:href\": true,\n                \"xlink:role\": true,\n                \"xlink:show\": true,\n                \"xlink:title\": true,\n                \"xlink:type\": true,\n                \"xml:base\": true,\n                \"xml:lang\": true,\n                \"xml:space\": true,\n                \"y1\": true,\n                \"y2\": true,\n                \"y\": true,\n                \"z\": true\n            };\n\n        /** External function to fire mouseOut for various elements for touch supported devices\n         * TouchStart/Pointer Over event is attached in the capturing phase on the document so that\n         * when ever any dom is tapped, this callback gets executed 1st and mouseout of the last event is\n         * fired.\n        */\n        if (supportsTouch) {\n            doc.addEventListener(supportsPointer ? 'pointerover' : 'touchstart', function (e) {\n                if (lastHoveredInfo.srcElement && lastHoveredInfo.srcElement !== (e.srcElement\n                    || e.target)) {\n                    var elementInfo = lastHoveredInfo.elementInfo,\n                        ii = elementInfo.length,\n                        elementInfo,\n                        elems,\n                        i;\n                    for (i = 0; i < ii; i++) {\n                        elems = elementInfo[i];\n                        elems.callback.call(elems.el, e);\n                    }\n                }\n                lastHoveredInfo = {\n                    elementInfo: []\n                };\n            }, true);\n        }\n\n        R.toString = function () {\n            return 'Your browser supports SVG.\\nYou are running Rapha\\xebl ' + this.version;\n        };\n\n        // Code commented as resources will now be referenced using relative urls.\n        // @todo Remove once we have acertained that there are no issues in any environment.\n        // Automatic gradient and other reference update on state change\n        // R._url = (/msie/i.test(navigator.userAgent) && !window.opera) ?\n        //     E : updateReferenceUrl();\n        // if (R._url && R._g.win.history.pushState) {\n        //     R._g.win.history.pushState = (function () {\n        //         var fn = R._g.win.history.pushState;\n        //         return function () {\n        //             var ret = fn.apply(R._g.win.history, arguments);\n        //             return updateReferenceUrl(), ret;\n        //         };\n        //     }());\n        //     R._g.win.addEventListener(\"popstate\", updateReferenceUrl, false);\n        // }\n        R._url = E;\n\n        var updateGradientReference = function (element, newGradient, attr = 'fill') {\n            var gradient = attr === 'fill' ? element.gradient : element['stroke-gradient'];\n\n            if (gradient) {\n                if (gradient === newGradient) {\n                    return; // no change\n                }\n                // else gradient is specified and it is not same as newGradient, implying a dereference\n                gradient.refCount--;\n                if (!gradient.refCount) {\n                    gradient.parentNode.removeChild(gradient);\n                }\n                attr === 'fill' ? delete element.gradient : delete element['stroke-gradient'];\n            }\n\n            if (newGradient) { // add new gradient\n                attr === 'fill' ? element.gradient = newGradient : element['stroke-gradient'] = newGradient;\n                newGradient.refCount++;\n            }\n        };\n\n        var $ = R._createNode = function (el, attr) {\n                // Create the element\n                if (typeof el === typeStringSTR) { // eslint-disable-line valid-typeof\n                    el = R._g.doc.createElementNS(svgNSStr, el);\n                }\n                if (attr) {\n                    var key,\n                        value;\n                    for (key in attr) {\n                        // IE9 cannot convert the value to string while applying 'transform' attribute\n                        value = isIE9 ? Str(attr[key]) : attr[key];\n                        if (xlinkRegx.test(key)) {\n                            el.setAttributeNS(xlink, key.replace(xlinkRegx, E), value);\n                        } else {\n                            el.setAttribute(key, value);\n                        }\n                    }\n                }\n                return el;\n            },\n            gradientUnitNames = {\n                userSpaceOnUse: 'userSpaceOnUse',\n                objectBoundingBox: 'objectBoundingBox'\n            },\n            gradientSpreadNames = {\n                pad: 'pad',\n                redlect: 'reflect',\n                repeat: 'repeat'\n            },\n            addGradient = function (element, gradient, attr = 'fill') {\n                if (!element.paper || !element.paper.defs) {\n                    return 0;\n                }\n\n                var type = 'linear',\n                    SVG = element.paper,\n                    id = R.getElementID((SVG.id + '-' + gradient).replace(/[()\\s%:,\\xb0#]/g, '_')),\n                    fx = 0.5, fy = 0.5, r, cx, cy, units, spread,\n                    o = element.node,\n                    s = o.style,\n                    el = R._g.doc.getElementById(id),\n                    vector;\n\n                if (!el) {\n                    gradient = Str(gradient).replace(R._radial_gradient, function (all, opts) {\n                        type = 'radial';\n                        opts = opts ? opts.split(',') : [];\n                        units = opts[5];\n                        spread = opts[6];\n\n                        var _fx = opts[0],\n                            _fy = opts[1],\n                            _r = opts[2],\n                            _cx = opts[3],\n                            _cy = opts[4],\n                            shifted = (_fx && _fy),\n                            dir,\n                            sqx;\n\n                        if (_r) {\n                            r = /%/.test(_r) ? _r : toFloat(_r);\n                        }\n\n                        if (units === gradientUnitNames.userSpaceOnUse) {\n                            if (shifted) {\n                                fx = _fx;\n                                fy = _fy;\n                            }\n                            if (_cx && _cy) {\n                                cx = _cx;\n                                cy = _cy;\n                                if (!shifted) {\n                                    fx = cx;\n                                    fy = cy;\n                                }\n                            }\n                            return E;\n                        }\n\n                        if (shifted) {\n                            fx = toFloat(_fx);\n                            fy = toFloat(_fy);\n                            dir = ((fy > 0.5) * 2 - 1);\n                            (sqx = pow(fx - 0.5, 2)) + pow(fy - 0.5, 2) > 0.25 &&\n                        (sqx < 0.25) && (fy = sqrt(0.25 - sqx) * dir + 0.5) &&\n                        fy !== 0.5 &&\n                        (fy = fy.toFixed(5) - 1e-5 * dir);\n                        }\n                        if (_cx && _cy) {\n                            cx = toFloat(_cx);\n                            cy = toFloat(_cy);\n                            dir = ((cy > 0.5) * 2 - 1);\n\n                            (sqx = pow(cx - 0.5, 2)) + pow(cy - 0.5, 2) > 0.25 &&\n                        (sqx < 0.25) && (cy = sqrt(0.25 - sqx) * dir + 0.5) &&\n                        cy !== 0.5 &&\n                        (cy = cy.toFixed(5) - 1e-5 * dir);\n\n                            if (!shifted) {\n                                fx = cx;\n                                fy = cy;\n                            }\n                        }\n\n                        return E;\n                    });\n                    gradient = gradient.split(/\\s*-\\s*/);\n                    if (type === 'linear') {\n                        var angle = gradient.shift(),\n                            specs = angle.match(/\\((.*)\\)/),\n                            max;\n\n                        specs = specs && specs[1] && specs[1].split(/\\s*,\\s*/);\n                        angle = -toFloat(angle);\n                        if (isNaN(angle)) {\n                            return null;\n                        }\n                        if (specs && specs.length) {\n                            if (specs[0] in gradientUnitNames) {\n                                units = specs.shift();\n                                (specs[0] in gradientSpreadNames) &&\n                                (spread = specs.shift());\n                            } else {\n                                specs[4] && (units = specs[4]);\n                                specs[5] && (spread = specs[5]);\n                            }\n\n                            /** @todo apply angle rotation and validation */\n                            vector = [\n                                specs[0] || '0%', specs[1] || '0%',\n                                specs[2] || '100%', specs[3] || '0%'\n                            ];\n                        } else {\n                            vector = [0, 0, math.cos(R.rad(angle)), math.sin(R.rad(angle))];\n                            max = 1 / (mmax(abs(vector[2]), abs(vector[3])) || 1);\n                            vector[2] *= max;\n                            vector[3] *= max;\n                            if (vector[2] < 0) {\n                                vector[0] = -vector[2];\n                                vector[2] = 0;\n                            }\n                            if (vector[3] < 0) {\n                                vector[1] = -vector[3];\n                                vector[3] = 0;\n                            }\n                        }\n                    }\n                    var dots = R._parseDots(gradient);\n                    if (!dots) {\n                        return null;\n                    }\n\n                    el = $(type + 'Gradient', {\n                        id: id\n                    });\n                    el.refCount = 0;\n                    (units in gradientUnitNames) &&\n                        el.setAttribute('gradientUnits', Str(units));\n                    (spread in gradientSpreadNames) &&\n                        el.setAttribute('spreadMethod', Str(spread));\n                    if (type === 'radial') {\n                        (r !== undefined) && el.setAttribute('r', Str(r));\n\n                        if (cx !== undefined && cy !== undefined) {\n                            el.setAttribute('cx', Str(cx));\n                            el.setAttribute('cy', Str(cy));\n                        }\n                        el.setAttribute('fx', Str(fx));\n                        el.setAttribute('fy', Str(fy));\n                    } else {\n                        $(el, {\n                            x1: vector[0],\n                            y1: vector[1],\n                            x2: vector[2],\n                            y2: vector[3]\n                        });\n                    }\n\n                    for (var i = 0, ii = dots.length; i < ii; i++) {\n                        el.appendChild($('stop', {\n                            offset: dots[i].offset ? dots[i].offset : i ? '100%' : '0%',\n                            'stop-color': dots[i].color || '#fff',\n                            // add stop opacity information\n                            'stop-opacity': dots[i].opacity === undefined ? 1 : dots[i].opacity\n                        }));\n                    }\n                    SVG.defs.appendChild(el);\n                }\n                updateGradientReference(element, el, attr);\n                $(o, {\n                    [attr]: \"url('\" + R._url + '#' + id + \"')\",\n                    [attr + '-opacity']: 1\n                });\n                s.fill = E;\n                return 1;\n            },\n            updatePosition = function (o) {\n                var bbox = o.getBBox(1);\n                $(o.pattern, {\n                    patternTransform: o.matrix.invert() + ' translate(' + bbox.x + ',' + bbox.y + ')'\n                });\n            },\n            addArrow = function(o, value, isEnd) {\n                if (o.type == \"path\") {\n                    var values = Str(value).toLowerCase().split(\"-\"),\n                    p = o.paper,\n                    se = isEnd ? \"end\" : \"start\",\n                    node = o.node,\n                    attrs = o.attrs,\n                    stroke = attrs[\"stroke-width\"],\n                    i = values.length,\n                    type = \"classic\",\n                    from,\n                    to,\n                    dx,\n                    refX,\n                    attr,\n                    w = 3,\n                    h = 3,\n                    t = 5;\n                    while (i--) {\n                        switch (values[i]) {\n                            case \"block\":\n                            case \"classic\":\n                            case \"oval\":\n                            case \"diamond\":\n                            case \"open\":\n                            case \"none\":\n                                type = values[i];\n                                break;\n                            case \"wide\":\n                                h = 5;\n                                break;\n                            case \"narrow\":\n                                h = 2;\n                                break;\n                            case \"long\":\n                                w = 5;\n                                break;\n                            case \"short\":\n                                w = 2;\n                                break;\n                        }\n                    }\n                    if (type == \"open\") {\n                        w += 2;\n                        h += 2;\n                        t += 2;\n                        dx = 1;\n                        refX = isEnd ? 4 : 1;\n                        attr = {\n                            fill: \"none\",\n                            stroke: attrs.stroke\n                        };\n                    } else {\n                        refX = dx = w / 2;\n                        attr = {\n                            fill: attrs.stroke,\n                            stroke: \"none\"\n                        };\n                    }\n                    if (o._.arrows) {\n                        if (isEnd) {\n                            o._.arrows.endPath && markerCounter[o._.arrows.endPath]--;\n                            o._.arrows.endMarker && markerCounter[o._.arrows.endMarker]--;\n                        } else {\n                            o._.arrows.startPath && markerCounter[o._.arrows.startPath]--;\n                            o._.arrows.startMarker && markerCounter[o._.arrows.startMarker]--;\n                        }\n                    } else {\n                        o._.arrows = {};\n                    }\n                    if (type != \"none\") {\n                        var pathId = \"raphael-marker-\" + type,\n                        markerId = \"raphael-marker-\" + se + type + w + h + \"-obj\" + o.id;\n                        if (!R._g.doc.getElementById(pathId)) {\n                            p.defs.appendChild($($(\"path\"), {\n                                \"stroke-linecap\": \"round\",\n                                d: markers[type],\n                                id: pathId\n                            }));\n                            markerCounter[pathId] = 1;\n                        } else {\n                            markerCounter[pathId]++;\n                        }\n                        var marker = R._g.doc.getElementById(markerId),\n                        use;\n                        if (!marker) {\n                            marker = $($(\"marker\"), {\n                                id: markerId,\n                                markerHeight: h,\n                                markerWidth: w,\n                                orient: \"auto\",\n                                refX: refX,\n                                refY: h / 2\n                            });\n                            use = $($(\"use\"), {\n                                \"xlink:href\": \"#\" + pathId,\n                                transform: (isEnd ? \"rotate(180 \" + w / 2 + \" \" + h / 2 + \") \" : E) + \"scale(\" + w / t + \",\" + h / t + \")\",\n                                \"stroke-width\": (1 / ((w / t + h / t) / 2)).toFixed(4)\n                            });\n                            marker.appendChild(use);\n                            p.defs.appendChild(marker);\n                            markerCounter[markerId] = 1;\n                        } else {\n                            markerCounter[markerId]++;\n                            use = marker.getElementsByTagName(\"use\")[0];\n                        }\n                        $(use, attr);\n                        var delta = dx * (type != \"diamond\" && type != \"oval\");\n                        if (isEnd) {\n                            from = o._.arrows.startdx * stroke || 0;\n                            to = R.getTotalLength(attrs.path) - delta * stroke;\n                        } else {\n                            from = delta * stroke;\n                            to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\n                        }\n                        attr = {};\n                        attr[\"marker-\" + se] = \"url('\" + R._url + \"#\" + markerId + \"')\";\n                        if (to || from) {\n                            attr.d = R.getSubpath(attrs.path, from, to);\n                        }\n                        $(node, attr);\n                        o._.arrows[se + \"Path\"] = pathId;\n                        o._.arrows[se + \"Marker\"] = markerId;\n                        o._.arrows[se + \"dx\"] = delta;\n                        o._.arrows[se + \"Type\"] = type;\n                        o._.arrows[se + \"String\"] = value;\n                    } else {\n                        if (isEnd) {\n                            from = o._.arrows.startdx * stroke || 0;\n                            to = R.getTotalLength(attrs.path) - from;\n                        } else {\n                            from = 0;\n                            to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\n                        }\n                        o._.arrows[se + \"Path\"] && $(node, {\n                            d: R.getSubpath(attrs.path, from, to)\n                        });\n                        delete o._.arrows[se + \"Path\"];\n                        delete o._.arrows[se + \"Marker\"];\n                        delete o._.arrows[se + \"dx\"];\n                        delete o._.arrows[se + \"Type\"];\n                        delete o._.arrows[se + \"String\"];\n                    }\n                    for (attr in markerCounter)\n                        if (markerCounter[has](attr) && !markerCounter[attr]) {\n                            var item = R._g.doc.getElementById(attr);\n                            item && item.parentNode.removeChild(item);\n                        }\n                }\n            },\n            dasharray = {\n            // In Firefox 37.0.1 the value of \"stroke-dasharray\" attribute `0` make the stroke/border invisible.\n            // The actual issue is setting `none` as the value of `stroke-dasharray` attribute\n            // redraphael internally changes the \"none\" value to \"0\", thus the stroke/border becomes invisible\n            // To fix this issue now instead of setting the value as `0` for `stroke-dasharray` attribute\n            // now using `none` string as none is a w3c standard value for stroke-dasharray\n                '': [noneStr],\n                'none': [noneStr],\n                '-': [3, 1],\n                '.': [1, 1],\n                '-.': [3, 1, 1, 1],\n                '-..': [3, 1, 1, 1, 1, 1],\n                '. ': [1, 3],\n                '- ': [4, 3],\n                '--': [8, 3],\n                '- .': [4, 3, 1, 3],\n                '--.': [8, 3, 1, 3],\n                '--..': [8, 3, 1, 3, 1, 3]\n            },\n            addDashes = function (o, value, params) {\n                if (value !== undefined) {\n                    var predefValue = dasharray[value.toLowerCase && value.toLowerCase()],\n                        calculatedValues,\n                        width,\n                        butt,\n                        i,\n                        widthFactor;\n\n                    value = predefValue || ([].concat(value));\n                    if (R.is(value, arrayStr)) {\n                        width = params['stroke-width'] || o.attrs['stroke-width'] || 1;\n                        butt = {\n                            round: width,\n                            square: width,\n                            butt: 0\n                        }[params['stroke-linecap'] || o.attrs['stroke-linecap']] || 0;\n                        i = value.length;\n                        widthFactor = predefValue ? width : 1;\n\n                        if (value[0] === noneStr) {\n                            calculatedValues = value;\n                        } else {\n                            calculatedValues = [];\n                            while (i--) {\n                                calculatedValues[i] = (value[i] * widthFactor + ((i % 2) ? 1 : -1) * butt);\n                                calculatedValues[i] <= 0 && (calculatedValues[i] = 0.01 + (width <= 1 ? butt : 0));\n                                if (isNaN(calculatedValues[i])) {\n                                    calculatedValues[i] = 0;\n                                }\n                            }\n                        }\n                        return {\n                            'stroke-dasharray': calculatedValues.join(',')\n                        };\n                    }\n                }\n            },\n\n            setFillAndStroke = R._setFillAndStroke = function (o, params) {\n                if (!o.paper.canvas) {\n                    return;\n                }\n                var node = o.node,\n                    attrs = o.attrs,\n                    paper = o.paper,\n                    // s = node.style,\n                    // vis = s.visibility,\n                    el,\n                    att,\n                    finalAttr = {},\n                    finalS = {},\n                    ignoreAttrs = {'clip-rect': true},\n                    value,\n                    pathClip,\n                    urlArr,\n                    rect;\n\n                // s.visibility = hiddenStr;\n                if (o.type === imageStr) {\n                    loadRefImage(o, params);\n                }\n                for (att in params) {\n                    if (att in R._availableAttrs) {\n                        value = params[att];\n                        if (value === E && att in attrs) {\n                            delete attrs[att];\n                            node.removeAttribute(att === 'src' ? 'href' : att);\n                        } else if (value === null && !ignoreAttrs[att]) {\n                            // when an attribute is provided as null, it will be removed from the element\n                            if (att in attrs) {\n                                delete attrs[att];\n                                node.removeAttribute(att === 'src' ? 'href' : att);\n                            }\n                        } else {\n                            attrs[att] = value;\n                            switch (att) {\n                            case 'blur':\n                                o.blur(value);\n                                break;\n                            case 'href':\n                            case 'title':\n                            case 'target':\n                                var pn = node.parentNode;\n                                if (pn.tagName.toLowerCase() !== 'a') {\n                                    if (value === E) { break; }\n                                    var hl = $('a');\n                                    hl.raphael = true;\n                                    hl.raphaelid = node.raphaelid;\n                                    pn.insertBefore(hl, node);\n                                    hl.appendChild(node);\n                                    pn = hl;\n                                }\n                                if (att === 'target') {\n                                    pn.setAttributeNS(xlink, 'show', value === 'blank' ? 'new' : value);\n                                } else {\n                                    pn.setAttributeNS(xlink, att, value);\n                                }\n                                node.titleNode = pn;\n                                break;\n                            case 'cursor':\n                                finalS.cursor = value;\n                                break;\n                            case 'transform':\n                                o.transform(value);\n                                break;\n                            case 'rotation':\n                                if (R.is(value, arrayStr)) {\n                                    o.rotate.apply(o, value);\n                                } else {\n                                    o.rotate(value);\n                                }\n                                break;\n                            case 'arrow-start':\n                                addArrow(o, value);\n                                break;\n                            case 'arrow-end':\n                                addArrow(o, value, 1);\n                                break;\n                            case 'clip-path':\n                                pathClip = true;\n                                // falls through\n                            case 'clip-rect':\n                                rect = !pathClip && Str(value).split(separator);\n                                o._.clipispath = !!pathClip;\n                                if (pathClip || rect.length === 4) {\n                                    o.clip && o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);\n                                    var rc = $(pathClip ? 'path' : 'rect');\n                                    el = $('clipPath');\n                                    el.id = R.getElementID(R.createUUID());\n                                    $(rc, pathClip ? {\n                                        d: value ? attrs['clip-path'] = R._pathToAbsolute(value) : R._availableAttrs.path,\n                                        fill: noneStr\n                                    } : {\n                                        x: rect[0],\n                                        y: rect[1],\n                                        width: rect[2],\n                                        height: rect[3],\n                                        transform: o.matrix.invert()\n                                    });\n                                    el.appendChild(rc);\n                                    paper.defs.appendChild(el);\n                                    finalAttr['clip-path'] = \"url('\" + R._url + '#' + el.id + \"')\";\n                                    o.clip = rc;\n                                }\n                                if (!value) {\n                                    var path = node.getAttribute('clip-path');\n                                    if (path) {\n                                        var clip = R._g.doc.getElementById(path.replace(/(^url\\(#|\\)$)/g, E));\n                                        clip && clip.parentNode.removeChild(clip);\n                                        finalAttr['clip-path'] = E;\n                                        document.documentMode === 11 && node.removeAttribute('clip-path');\n                                        delete o.clip;\n                                    }\n                                }\n                                break;\n                            case 'path':\n                                if (o.type === 'path') {\n                                    finalAttr.d = value ? attrs.path = (R._stopabsolutePath ? R.sanitizePath(value) : R._pathToAbsolute(value)) : R._availableAttrs.path;\n                                    o._.dirty = 1;\n                                    if (o._.arrows) {\n                                        'startString' in o._.arrows && addArrow(o, o._.arrows.startString);\n                                        'endString' in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                                    }\n                                }\n                                break;\n                            case 'width':\n                                finalAttr[att] = value;\n                                o._.dirty = 1;\n                                if (attrs.fx) {\n                                    att = 'x';\n                                    value = attrs.x;\n                                } else {\n                                    break;\n                                }\n                                // falls through\n                            case 'x':\n                                if (attrs.fx) {\n                                    value = -attrs.x - (attrs.width || 0);\n                                }\n                                // falls through\n                            case 'rx':\n                                if (att === 'rx' && o.type === 'rect') {\n                                    break;\n                                }\n                                // falls through\n                            case 'cx':\n                                finalAttr[att] = value;\n                                o.pattern && updatePosition(o);\n                                o._.dirty = 1;\n                                break;\n                            case 'height':\n                                finalAttr[att] = value;\n                                o._.dirty = 1;\n                                if (attrs.fy) {\n                                    att = 'y';\n                                    value = attrs.y;\n                                } else {\n                                    break;\n                                }\n                                // falls through\n                            case 'y':\n                                // For text don't apply y attribute as it will be applied during tuneText\n                                if (o.type === textStr) {\n                                    break;\n                                }\n                                if (attrs.fy) {\n                                    value = -attrs.y - (attrs.height || 0);\n                                }\n                                // falls through\n                            case 'ry':\n                                if (att === 'ry' && o.type === 'rect') {\n                                    break;\n                                }\n                                // falls through\n                            case 'cy':\n                                finalAttr[att] = value;\n                                o.pattern && updatePosition(o);\n                                o._.dirty = 1;\n                                break;\n                            case 'r':\n                                if (o.type === 'rect') {\n                                    finalAttr.rx = finalAttr.ry = value;\n                                } else {\n                                    finalAttr[att] = value;\n                                }\n                                o._.dirty = 1;\n                                break;\n                            case 'src':\n                                if (o.type === imageStr) {\n                                    node.setAttributeNS(xlink, 'href', value);\n                                }\n                                break;\n                            case 'stroke-width':\n                                if (o._.sx !== 1 || o._.sy !== 1) {\n                                    value /= mmax(abs(o._.sx), abs(o._.sy)) || 1;\n                                }\n                                if (paper._vbSize) {\n                                    value *= paper._vbSize;\n                                }\n                                if (zeroStrokeFix && value === 0) {\n                                    value = 0.000001;\n                                }\n                                finalAttr[att] = value;\n                                // if this time we have no stroke-dasharray param but last time we have then update it according to new stroke-width\n                                // Do not apply stroke-dasharray if the current stroke-dasharray is ''\n                                if (!params['stroke-dasharray'] && attrs['stroke-dasharray'] && params['stroke-dasharray'] !== '') {\n                                    quickExtend(finalAttr, addDashes(o, attrs['stroke-dasharray'], params));\n                                }\n                                if (o._.arrows) {\n                                    'startString' in o._.arrows && R.addArrow && R.addArrow(o, o._.arrows.startString);\n                                    'endString' in o._.arrows && R.addArrow && R.addArrow(o, o._.arrows.endString, 1);\n                                }\n                                break;\n                            case 'stroke-dasharray':\n                                quickExtend(finalAttr, addDashes(o, value, params));\n                                break;\n                            case 'fill':\n                                var isURL = R._ISURL.test(value);\n                                if (isURL) {\n                                    urlArr = value.split(R._ISURL);\n                                    el = $('pattern');\n                                    var ig = $(imageStr);\n                                    el.id = R.getElementID(R.createUUID());\n                                    $(el, {\n                                        x: 0,\n                                        y: 0,\n                                        patternUnits: 'userSpaceOnUse',\n                                        height: 1,\n                                        width: 1\n                                    });\n                                    $(ig, {\n                                        x: 0,\n                                        y: 0,\n                                        'xlink:href': urlArr[1]\n                                    });\n                                    el.appendChild(ig);\n                                    preLoad(el, ig, urlArr, paper);\n                                    paper.defs.appendChild(el);\n                                    finalAttr.fill = \"url('\" + R._url + urlArr[1] + \"')\";\n\n                                    o.pattern = el;\n                                    o.pattern && updatePosition(o);\n                                    break;\n                                }\n                                var clr = R.getRGB(value);\n                                if (!clr.error) {\n                                    delete params.gradient;\n                                    delete attrs.gradient;\n                                    // !R.is(attrs.opacity, \"undefined\") &&\n                                    //     R.is(params.opacity, \"undefined\") &&\n                                    //     finalAttr[opacity] = attrs.opacity;\n                                    !R.is(attrs['fill-opacity'], 'undefined') && R.is(params['fill-opacity'], 'undefined') && (finalAttr['fill-opacity'] = attrs['fill-opacity']);\n                                    o.gradient && updateGradientReference(o);\n                                } else if ((o.type === 'circle' || o.type === 'ellipse' || Str(value).charAt() !== 'r') && addGradient(o, value)) {\n                                    // The reason for this block of code is not known, hence it is commented out as it is causeing issues in\n                                    // IE8 browser for gradient color\n                                    /* if (\"opacity\" in attrs || \"fill-opacity\" in attrs) {\n                                        var gradient = R._g.doc.getElementById(node.getAttribute(\"fill\").replace(/^url\\(#|\\)$/g, E));\n                                        if (gradient) {\n                                            var stops = gradient.getElementsByTagName(\"stop\");\n                                            $(stops[stops.length - 1], {\n                                                \"stop-opacity\": (\"opacity\" in attrs ? attrs.opacity : 1) * (\"fill-opacity\" in attrs ? attrs[\"fill-opacity\"] : 1)\n                                            });\n                                        }\n                                    } */\n                                    attrs.gradient = value;\n                                    // attrs.fill = \"none\";\n                                    break;\n                                }\n                                if (clr[has]('opacity')) {\n                                    finalAttr['fill-opacity'] = clr.opacity > 1 ? clr.opacity / 100 : clr.opacity;\n                                    o._.fillOpacityDirty = true;\n                                } else if (o._.fillOpacityDirty && R.is(attrs['fill-opacity'], 'undefined') &&\n                                        R.is(params['fill-opacity'], 'undefined')) {\n                                    node.removeAttribute('fill-opacity');\n                                    delete o._.fillOpacityDirty;\n                                }\n                                // falls through\n                            case 'stroke':\n                                clr = R.getRGB(value);\n                                if (clr.error) {\n                                  if (\n                                    o.type === 'circle' ||\n                                    o.type === 'ellipse' ||\n                                    Str(value).charAt() !== 'r'\n                                  ) {\n                                    addGradient(o, value, 'stroke');\n                                  }\n                                } else {\n                                  finalAttr[att] = clr.hex;\n                                  updateGradientReference(o, UNDEF, att)\n                                }\n                                if (att === 'stroke') { // remove stroke opacity when stroke is set to none\n                                    if (clr[has]('opacity')) {\n                                        finalAttr['stroke-opacity'] = clr.opacity > 1 ? clr.opacity / 100 : clr.opacity;\n                                        o._.strokeOpacityDirty = true;\n                                    } else if (o._.strokeOpacityDirty && R.is(attrs['stroke-opacity'], 'undefined') &&\n                                            R.is(params['stroke-opacity'], 'undefined')) {\n                                        node.removeAttribute('stroke-opacity');\n                                        delete o._.strokeOpacityDirty;\n                                    }\n                                    if (o._.arrows) {\n                                        'startString' in o._.arrows && addArrow(o, o._.arrows.startString);\n                                        'endString' in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                                    }\n                                }\n                                break;\n                            case 'gradient':\n                                (o.type === 'circle' || o.type === 'ellipse' || Str(value).charAt() !== 'r') && addGradient(o, value);\n                                break;\n                            case 'visibility':\n                                value === hiddenStr ? o.hide() : o.show();\n                                break;\n                            case 'opacity':\n                                // if (attrs.gradient && !attrs[has](\"stroke-opacity\")) {\n                                //     finalAttr[\"stroke-opacity\"] = value > 1 ? value / 100 : value;\n                                // }\n                                value = value > 1 ? value / 100 : value;\n                                finalAttr.opacity = value;\n                                break;\n                            // fall\n                            case 'fill-opacity':\n                                // if (attrs.gradient) {\n                                //     gradient = R._g.doc.getElementById(node.getAttribute(\"fill\").replace(/^url\\([\\'\\\"]#|[\\'\\\"]\\)$/g, E));\n                                //     if (gradient) {\n                                //         stops = gradient.getElementsByTagName(\"stop\");\n                                //         l = stops.length;\n                                //         for (i = 0; i < l; i += 1) {\n                                //           $(stops[i], {\n                                //               \"stop-opacity\": value\n                                //           });\n                                //         }\n                                //     }\n                                //     break;\n                                // }\n                                value = value > 1 ? value / 100 : value;\n                                finalAttr['fill-opacity'] = value;\n                                break;\n                            case 'shape-rendering':\n                                o.attrs[att] = value = shapeRenderingAttrs[value] || value || 'auto';\n                                finalAttr[att] = value;\n                                node.style.shapeRendering = value;\n                                break;\n\n                            case 'line-height': // do not apply\n                            case 'vertical-align': // do not apply\n                                break;\n                            default:\n                                att === fontSizeStr && (value = toInt(value, 10) + 'px');\n                                o._.dirty = 1;\n                                finalAttr[att] = value;\n                                if (dashedAttr2CSSMap[att]) {\n                                    finalS[dashedAttr2CSSMap[att]] = value;\n                                }\n                                break;\n                            }\n                        }\n                    } else if (att in allPossibleAttrs){\n                        // ensuring any kind of attributes can be applied to a dom\n                        if (value === E && att in attrs) {\n                            delete attrs[att];\n                            node.removeAttribute(att);\n                        } else  {\n                            attrs[att] = value;\n                            finalS[att] = value;\n                        }\n                    }\n                }\n                // Finally apply the styles\n                for (att in finalS) {\n                    node.style[att] = finalS[att];\n                }\n                // Finally apply the attributes\n                for (att in finalAttr) {\n                    node.setAttribute(att, finalAttr[att]);\n                }\n                (o.type === textStr && !params[notToTuneStr]) && tuneText(o, params);\n                // s.visibility = vis;\n            },\n            /*\n            * Keeps the follower element in sync with the leaders.\n            * First and second arguments represents the context(element) and the\n            name of the callBack function respectively.\n            * The callBack is invoked for indivual follower Element with the rest of\n            arguments.\n            */\n            updateFollowers = R._updateFollowers = function () {\n                var i,\n                    ii,\n                    followerElem,\n                    args = getArrayCopy(arguments),\n                    o = arrayShift.call(args),\n                    fnName = arrayShift.call(args);\n                for (i = 0, ii = o.followers.length; i < ii; i++) {\n                    followerElem = o.followers[i].el;\n                    followerElem[fnName].apply(followerElem, args);\n                }\n            },\n            leading = 1.2,\n            tuneText = function (el, params) {\n                // If there is no effective change in new attributes then ignore\n                if (\n                  el.type !== textStr ||\n                  !(\n                    params[has](textStr) ||\n                    params[has]('font') ||\n                    params[has](fontSizeStr) ||\n                    params[has]('x') ||\n                    params[has]('y') ||\n                    params[has](lineHeightStr) ||\n                    params[has](vAlignStr) ||\n                    params[has](textPathStr)\n                  )\n                ) {\n                  return;\n                }\n                var a = el.attrs,\n                    defs = el.paper.defs,\n                    group = el.parent,\n                    node = el.node,\n                    fontSize,\n                    oldAttr = el._oldAttr = el._oldAttr || { baseLineDiff: 8, valign: -0.5 }, // Store all the attributes that are getting applied. This will help us to apply deferential information only.\n                    lineHeight = toFloat(params[lineHeightStr] || a[lineHeightStr]),\n                    direction = params.direction || a.direction || (group && group.attrs && group.attrs.direction) || oldAttr.direction || initialStr,\n                    valign,\n                    updateNode = false,\n                    tspanAttr,\n                    updateTspan = false,\n                    i,\n                    l,\n                    ii,\n                    // For rtl text in IE there is a blank tspan to fix RTL rendering issues in IE.\n                    // So there will twice the amount of tSpan\n                    j = !isIE && direction === rtlStr ? 2 : 1,\n                    texts,\n                    tempIESpan,\n                    tspan,\n                    updateAlignment = false,\n                    tspans,\n                    text,\n                    textChanged = false,\n                    // @todo: Comment the below lines of code in order to fix RED-8282\n                    // removeAllChild = !!(!isIE && oldAttr.direction && direction !== oldAttr.direction);\n                    removeAllChild,\n                    // Check whether a string has &nbsp; or similar non-breaking space\n                    hasnbsp = function (text) {\n                        return (text && nbspRegex.test(text));\n                    },\n                    /**\n                     * replaces multiple spaces and different codes of nbsp\n                     * with single white space so that it simulates the behaviour of dom\n                     * rendering for text\n                     * @param {string} text\n                     * @returns {string} processed text\n                     */\n                    spacify = function (text) {\n                        return text.replace(/\\s+/g, ' ').trim()\n                            .replace(nbspRegex, ' ');\n                    };\n\n                if (params[has](textPathStr)) {\n                    var rUUID = R.getElementID(R.createUUID()),\n                        textPathParams = params[textPathStr];\n\n                    var textPath,\n                        tSpan,\n                        txtNode,\n                        dy = 0,\n                        textPathProps = {};\n\n                    for (var key in textPathParams) {\n                        if (textPathParams.hasOwnProperty(key)) {\n                            if (key === 'path' && !('href' in textPathParams)) {\n                                if (\n                                  oldAttr.textPathStr !== textPathParams[key]\n                                ) {\n                                  if (el.textPathDef) {\n                                    el.textPathDef.setAttribute('d', textPathParams[key] || E);\n\n                                    textPathProps.href = '#' + el.textPathDef.getAttribute('id');\n                                    textPathProps['xlink:href'] = '#' + el.textPathDef.getAttribute('id');\n                                  } else {\n                                    el.textPathDef = defs.appendChild(\n                                      $('path', {\n                                        id: rUUID,\n                                        d: textPathParams[key] || E\n                                      })\n                                    );\n\n                                    textPathProps.href = '#' + rUUID;\n                                    textPathProps['xlink:href'] = '#' + rUUID;\n                                  }\n\n                                  oldAttr.textPathStr = textPathParams[key];\n                                } else {\n                                    textPathProps.href = '#' + el.textPathDef.getAttribute('id');\n                                    textPathProps['xlink:href'] = '#' + el.textPathDef.getAttribute('id');\n                                }\n                            } else {\n                                textPathProps[key] = textPathParams[key];\n                            }\n                        }\n                    }\n\n                    if (params[has](textStr)) {\n                        txtNode = R._g.doc.createTextNode(params[textStr] || E);\n                        oldAttr.pathText = a.text = params[textStr] || E;\n                    } else {\n                        txtNode = R._g.doc.createTextNode(\n                            oldAttr.pathText || oldAttr.text || E\n                        );\n                        oldAttr.pathText = oldAttr.pathText || oldAttr.text || E;\n                        delete oldAttr.text;\n                    }\n\n                    if (params[has](vAlignStr)) {\n                        if (params[vAlignStr] === middleStr) {\n                            dy = 0.3;\n                            oldAttr.valign = -0.5;\n                        } else if (params[vAlignStr] === bottomStr) {\n                            dy = 0.7;\n                            oldAttr.valign = -1;\n                        } else if (params[vAlignStr] === topStr) {\n                            oldAttr.valign = 0;\n                        }\n                        tSpan = $('tspan', { dy: dy + 'em' });\n                        tSpan.appendChild(txtNode);\n\n                        oldAttr.tSpan = tSpan;\n                    } else {\n                        if (oldAttr.tSpan && (oldAttr.tSpan.textContent === params[textStr] || typeof params[textStr] !== typeStringSTR)) {\n                            tSpan = oldAttr.tSpan;\n                        } else {\n                            if (oldAttr.valign === -0.5) {\n                                dy = 0.3;\n                            } else if (oldAttr.valign === -1) {\n                                dy = 0.7;\n                            } else {\n                                dy = 0;\n                            }\n\n                            tSpan = $('tspan', { dy: dy + 'em' });\n                            tSpan.appendChild(txtNode);\n\n                            oldAttr.tSpan = tSpan;\n                        }\n                    }\n\n                    // IE 11 does not support x and y with textPath\n                    // hence removing x and y\n                    delete oldAttr.x;\n                    delete oldAttr.y;\n                    node.removeAttribute('x');\n                    node.removeAttribute('y');\n\n\n                    textPath = $('textPath', textPathProps);\n                    textPath.appendChild(tSpan || txtNode);\n\n                    while (node.firstChild) {\n                        node.removeChild(node.firstChild);\n                    }\n                    node.appendChild(textPath);\n                } else {\n                    oldAttr.direction = direction;\n\n                    // cleanup old attr remnants from rendering a text path\n                    if (el.textPathDef && defs) {\n                        el.textPathDef.parentNode.removeChild(\n                            el.textPathDef\n                        );\n                        delete el.textPathDef;\n                    }\n\n                    delete oldAttr.txtNode;\n                    delete oldAttr.tSpan;\n                    delete oldAttr.textPathStr;\n\n                    // If line height is not valid (0, NaN, undefuned), then derive it from fontSize\n                    if (!lineHeight) {\n                        fontSize = params.fontSize || params[fontSizeStr] || a[fontSizeStr] || (group && group.attrs && group.attrs.fontSize);\n                        fontSize = fontSize ? fontSize.toString().replace(pxStr, E) : 10;\n                        lineHeight = fontSize * leading;\n                    }\n                    // If the containing text got changed\n                    if (params[has](textStr) || oldAttr.pathText) {\n                        // If the text is an arra then join with <br>\n                        if (R.is(params.text, arrayStr)) {\n                            text = params.text.join(brStr);\n                        } else if (params.text == null) {\n                            text = oldAttr.pathText;\n                        } else {\n                            text = params.text\n                        }\n\n                        delete oldAttr.pathText;\n\n                        // If it is a new text applied\n                        if (text !== oldAttr.text) {\n                            textChanged = true;\n                            // Convert all the &lt; and &gt; to < and > and if there is any <br/> tag in between &lt; and &gt;\n                            // then converting them into <<br/> and ><br/> respectively.\n                            if (text && ltgtbrRegex.test(text)) {\n                                text = text.replace(/&lt;/g, '<').replace(/&gt;/g, '>')\n                                    .replace(/&quot;|&#034;/g, '\"')\n                                    .replace(/&#039;/g, '\\'')\n                                    .replace(/&<br\\/>lt;|&l<br\\/>t;|&lt<br\\/>;/g, '<<br/>')\n                                    .replace(/&<br\\/>gt;|&g<br\\/>t;|&gt<br\\/>;/g, '><br/>');\n                            }\n                            oldAttr.text = a.text = text;\n                            if (textBreakRegx.test(text)) { // if multiline text\n                                if (oldAttr.noTSpan) { // previously it was single line\n                                    oldAttr.noTSpan = !(removeAllChild = true);\n                                }\n                                texts = Str(text).split(textBreakRegx);\n                                l = texts.length;\n                            } else { // single line\n                                // If it is a single line text then always remove the children\n                                removeAllChild = true;\n                                oldAttr.noTSpan = true; // Always remove old text node\n                                l = 1;\n                            }\n                            // if no if lines are changed\n                            if (oldAttr.lineCount !== l) {\n                                oldAttr.lineCount = l;\n                                updateAlignment = true;\n                            }\n                        }\n                    }\n\n                    if (lineHeight !== oldAttr.lineHeight) { // lineHeight change\n                        oldAttr.lineHeight = lineHeight;\n                        oldAttr.baseLineDiff = lineHeight * 0.75; // Approximate calculation\n                        updateAlignment = true;\n                    }\n\n                    // If the text was RTL earlier and now changed or vice versa\n                    if (removeAllChild) {\n                        // remove all children\n                        while (node.firstChild) {\n                            node.removeChild(node.firstChild);\n                        }\n                    }\n\n                    // ** If multiline text mode\n                    if (oldAttr.lineCount > 1) {\n                        // Remove white-space preserve property from parent text node\n                        if (node.style.whiteSpace === PRESERVESTRING) {\n                            node.style.whiteSpace = BLANKSTRING;\n                        }\n                        tspanAttr = {};\n                        if (!oldAttr.tspanAttr) {\n                            oldAttr.tspanAttr = {};\n                            oldAttr.tspan0Attr = {};\n                        }\n                        // If the dy needs to be changed\n                        if (oldAttr.tspanAttr.dy !== oldAttr.lineHeight) {\n                            oldAttr.tspanAttr.dy = tspanAttr.dy = oldAttr.lineHeight;\n                            updateTspan = true;\n                        }\n\n                        // if x is getting changed\n                        if (params[has]('x') && oldAttr.tspanAttr.x !== params.x) { // X change\n                            // If the x is getting changed, then the tspan need to be updated\n                            // Note: we don't need to update the node as it is already updated during setFillAndStroke\n                            oldAttr.tspan0Attr.x = oldAttr.tspanAttr.x = tspanAttr.x = a.x;\n                            updateTspan = true;\n                        }\n\n                        // Note for the first tspan (i === 0), we will add only the x attribute. No dy\n                        // If the containing text got changed\n                        if (textChanged) {\n                            tspans = node.getElementsByTagName(tSpanStr);\n                            for (i = 0; i < l; i++) {\n                                tspan = tspans[i * j];\n                                if (tspan) { // If already there is a tspan then remove the text\n                                    tspan.innerHTML = E;\n                                    if (isIE) {\n                                        // For IE, setting the innerHTML of tspan to blank string doesnot remove\n                                        // the child nodes. Child nodes should be removed explicitly.\n                                        while (tspan.firstChild) {\n                                            tspan.removeChild(tspan.firstChild);\n                                        }\n                                    }\n                                    if (updateTspan) { // If update required, update here\n                                        $(tspan, i ? tspanAttr : oldAttr.tspan0Attr);\n                                    }\n                                } else { // Else create a new span\n                                    tspan = $(tSpanStr, i ? oldAttr.tspanAttr : oldAttr.tspan0Attr);\n                                    node.appendChild(tspan);\n                                    // Special fix for RTL texts in IE-SVG browsers\n                                    if (!isIE && direction === rtlStr) {\n                                        tempIESpan = $(tSpanStr, IESplTspanAttr);\n                                        tempIESpan.appendChild(R._g.doc.createTextNode('i'));\n                                        node.appendChild(tempIESpan);\n                                    }\n                                }\n                                // If it is a blank line, preserve it\n                                if (!texts[i]) {\n                                    tspan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n                                    texts[i] = S;\n                                }\n\n                                // If text has &nbsp; then change the white-space style of the node to 'preserve' for disabling space collapse\n                                if (hasnbsp(texts[i])) {\n                                    texts[i] = spacify(texts[i]);\n                                    tspan.style.whiteSpace = PRESERVESTRING;\n                                } else if (tspan.style.whiteSpace === PRESERVESTRING) {\n                                    tspan.style.whiteSpace = BLANKSTRING;\n                                }\n                                // create and append the text node\n                                tspan.appendChild(R._g.doc.createTextNode(texts[i]));\n                            }\n\n                            ii = l * j;\n                            // If there are already more tspan than required, then remove the extra tspans\n                            if (tspans.length > ii) {\n                                for (i = tspans.length - 1; i >= ii; i -= 1) {\n                                    node.removeChild(tspans[i]);\n                                }\n                            }\n                        } else if (updateTspan) { // else if the tspans needs to be updated\n                            tspans = node.getElementsByTagName(tSpanStr); // @note: don't count on tspan, rather store the previous count\n                            ii = tspans.length;\n                            for (i = 0; i < ii; i += j) {\n                                $(tspans[i], i ? tspanAttr : oldAttr.tspan0Attr);\n                            }\n                        }\n                    } else if (textChanged) { // ** single line mode\n                        // If text has &nbsp; then change the white-space style of the node to 'preserve' for disabling space collapse\n                        if (hasnbsp(text)) {\n                            text = spacify(text);\n                            node.style.whiteSpace = PRESERVESTRING;\n                        } else if (node.style.whiteSpace === PRESERVESTRING) {\n                            node.style.whiteSpace = BLANKSTRING;\n                        }\n                        // create and append the text node\n                        node.appendChild(R._g.doc.createTextNode(text));\n                    }\n\n                    if (params[vAlignStr]) { // vAlign change\n                        valign = vAlignMultiplier[a[vAlignStr]] || 0; // default v-alignment is middle but for wrong alignment value it will be top.\n                        if (valign !== oldAttr.valign) {\n                            oldAttr.valign = valign;\n                            updateAlignment = true;\n                        }\n                    }\n\n                    // Update the dy of the first tspan according to the v-alignment\n                    if (updateAlignment) {\n                        oldAttr.shift = oldAttr.baseLineDiff + (oldAttr.lineCount * oldAttr.lineHeight * oldAttr.valign);\n                        updateNode = true;\n                    }\n                    // if y is getting changed\n                    if ((params.y || params.y === 0) && oldAttr.y !== params.y) { // Y change\n                        oldAttr.y = a.y;\n                        updateNode = true;\n                    }\n\n                    // Update the node's attribute\n                    if (updateNode && (oldAttr.y || oldAttr.y === 0) && (oldAttr.shift || oldAttr.shift === 0)) {\n                        $(node, { y: Math.round(oldAttr.y + oldAttr.shift) });\n                    }\n                }\n            },\n            Element = function (node, svg, group/*, dontAppend */) {\n                var o = this,\n                    parent = group || svg;\n\n                /*! dontAppend && */parent.canvas && parent.canvas.appendChild(node);\n\n                o.node = o[0] = node;\n                node.raphael = true;\n                node.raphaelid = o.id = R._oid++;\n\n                o.matrix = R.matrix();\n                o.realPath = null;\n\n                o.attrs = o.attrs || {};\n                o.followers = o.followers || [];\n\n                o.paper = svg;\n                o.ca = o.customAttributes = o.customAttributes ||\n                new svg._CustomAttributes();\n\n                o._ = {\n                    transform: [],\n                    sx: 1,\n                    sy: 1,\n                    deg: 0,\n                    dx: 0,\n                    dy: 0,\n                    dirty: 1\n                };\n\n                o.parent = parent;\n                !parent.bottom && (parent.bottom = o);\n\n                o.prev = parent.top;\n                parent.top && (parent.top.next = o);\n                parent.top = o;\n                o.next = null;\n            },\n            /*\n             * Function to get the distance between two touches\n            */\n            getTouchDistance = function (touch1, touch2, isY) {\n                var select = isY ? 'pageY' : 'pageX';\n                return Math.abs(touch2[select] - touch1[select]);\n            },\n            /**\n             * Function to store the various event handlers\n             */\n            storeHandlers = R.storeHandlers = function (elem, handler, fn) {\n                // Storing the handlers\n                elem._actualListners || (elem._actualListners = []);\n                elem._derivedListeners || (elem._derivedListeners = []);\n                elem._actualListners.push(handler);\n                elem._derivedListeners.push(fn);\n            },\n            /**\n             * Function to remove various handlers\n             */\n            removeHandlers = function (elem, handler) {\n                // Storing the handlers\n                var index = elem._actualListners.indexOf(handler),\n                    derivedHandler;\n\n                if (index !== -1) {\n                    derivedHandler = elem._derivedListeners[index];\n                    elem._actualListners.splice(index, 1);\n                    elem._derivedListeners.splice(index, 1);\n                }\n                return derivedHandler\n            },\n            elproto = R.el;\n\n        Element.prototype = elproto;\n        elproto.constructor = Element;\n\n        R._engine.getNode = function (el) {\n            var node = el.node || el[0].node;\n            return node.titleNode || node;\n        };\n        R._engine.getLastNode = function (el) {\n            var node = el.node || el[el.length - 1].node;\n            return node.titleNode || node;\n        };\n\n        elproto.rotate = function (deg, cx, cy) {\n            var o = this,\n                bbox;\n            if (o.removed) {\n                return o;\n            }\n            updateFollowers(o, 'rotate', deg, cx, cy);\n            deg = Str(deg).split(separator);\n            if (deg.length - 1) {\n                cx = toFloat(deg[1]);\n                cy = toFloat(deg[2]);\n            }\n            deg = toFloat(deg[0]);\n            (cy == null) && (cx = cy);\n            if (cx == null || cy == null) {\n                bbox = o.getBBox(1);\n                cx = bbox.x + bbox.width / 2;\n                cy = bbox.y + bbox.height / 2;\n            }\n            o.transform(o._.transform.concat([['r', deg, cx, cy]]));\n            return o;\n        };\n\n        elproto.scale = function (sx, sy, cx, cy) {\n            var o = this,\n                bbox;\n            if (o.removed) {\n                return o;\n            }\n            updateFollowers(o, 'scale', sx, sy, cx, cy);\n            sx = Str(sx).split(separator);\n            if (sx.length - 1) {\n                sy = toFloat(sx[1]);\n                cx = toFloat(sx[2]);\n                cy = toFloat(sx[3]);\n            }\n            sx = toFloat(sx[0]);\n            (sy == null) && (sy = sx);\n            (cy == null) && (cx = cy);\n            if (cx == null || cy == null) {\n                bbox = o.getBBox(1);\n            }\n            cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n            cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n            o.transform(o._.transform.concat([['s', sx, sy, cx, cy]]));\n            return o;\n        };\n\n        elproto.translate = function (dx, dy) {\n            var o = this;\n            if (o.removed) {\n                return o;\n            }\n            updateFollowers(o, 'translate', dx, dy);\n            dx = Str(dx).split(separator);\n            if (dx.length - 1) {\n                dy = toFloat(dx[1]);\n            }\n            dx = toFloat(dx[0]) || 0;\n            dy = +dy || 0;\n            o.transform(o._.transform.concat([['t', dx, dy]]));\n            return o;\n        };\n\n        elproto.transform = function (tstr) {\n            var o = this,\n                _ = o._,\n                sw;\n\n            if (tstr == null) {\n                return _.transform;\n            }\n            R._extractTransform(o, tstr);\n\n            o.clip && !_.clipispath && $(o.clip, {\n                transform: o.matrix.invert()\n            });\n            o.pattern && updatePosition(o);\n            o.node && $(o.node, {\n                transform: o.matrix\n            });\n\n            if (_.sx !== 1 || _.sy !== 1) {\n                sw = o.attrs['stroke-width'];\n                sw && o.attr({\n                    'stroke-width': sw\n                });\n            }\n\n            return o;\n        };\n\n        elproto.hide = function () {\n            var o = this;\n            updateFollowers(o, 'hide');\n            !o.removed && o.paper.safari(o.node.style.display = noneStr);\n            return o;\n        };\n\n        elproto.show = function () {\n            var o = this;\n            updateFollowers(o, 'show');\n            !o.removed && o.paper.safari(o.node.style.display = E);\n            return o;\n        };\n\n        elproto.remove = function () {\n            if (this.removed || !this.parent.canvas) {\n                return;\n            }\n\n            var o = this,\n                node = R._engine.getNode(o),\n                paper = o.paper,\n                defs = paper.defs,\n                i;\n\n            paper.__set__ && paper.__set__.exclude(o);\n            eve.unbind('raphael.*.*.' + o.id);\n\n            if (o.gradient && defs) {\n                updateGradientReference(o);\n            }\n            if (o['stroke-gradient'] && defs) {\n                updateGradientReference(o, UNDEF, 'stroke');\n            }\n            if (o.textPathDef && defs) {\n                o.textPathDef.parentNode.removeChild(o.textPathDef);\n                delete o.textPathDef;\n            }\n\n            while ((i = o.followers.pop())) {\n                i.el.remove();\n            }\n            while ((i = o.bottom)) {\n                i.remove();\n            }\n\n            if (o._drag) {\n                o.undrag();\n            }\n\n            if (o.events) {\n                while ((i = o.events.pop())) {\n                    i.unbind();\n                }\n            }\n\n            o.parent.canvas.contains(node) && o.parent.canvas.removeChild(node);\n            o.removeData();\n            delete paper._elementsById[o.id]; // remove from lookup hash\n            R._tear(o, o.parent);\n\n            for (i in o) {\n                o[i] = typeof o[i] === fnStr ? R._removedFactory(i) : null;\n            }\n\n            o.removed = true;\n        };\n\n        elproto._getBBox = function () {\n            var fn,\n                o = this,\n                node = o.node,\n                bbox = {},\n                a = o.attrs,\n                align,\n                hide,\n                isText = (o.type === textStr);\n            if (isIE && isText) {\n                fn = showRecursively(o);\n            } else {\n                if (node.style.display === noneStr) {\n                    o.show();\n                    hide = true;\n                }\n            }\n\n            try {\n                bbox = node.getBBox();\n                if (isText) {\n                    // If bbox does not have x / y, which is possible in certain\n                    // environments, we mathematically calculate these values by\n                    // using x, y (adjusted using the values of text-anchor, and\n                    // vertical-align attributes), of the element along with the\n                    // width and height provided by the getBBox().\n                    if (bbox.x === undefined) {\n                        bbox.isCalculated = true;\n                        align = a['text-anchor'];\n                        bbox.x = (a.x || 0) - (bbox.width * ((align === 'start')\n                            ? 0 : (align === middleStr) ? 0.5 : 1));\n                    }\n\n                    if (bbox.y === undefined) {\n                        bbox.isCalculated = true;\n                        align = a[vAlignStr];\n                        bbox.y = (a.y || 0) - (bbox.height * ((align === bottomStr)\n                            ? 1 : (align === middleStr) ? 0.5 : 0));\n                    }\n                }\n            } catch (e) {\n            // Firefox 3.0.x plays badly here\n            } finally {\n                bbox = bbox || {};\n            }\n            isIE && isText ? fn && fn() : hide && o.hide();\n            return bbox;\n        };\n\n        elproto.attr = function (name, value) {\n            if (this.removed) {\n                return this;\n            }\n            var elem = this,\n                attrs = this.attrs,\n                key,\n                finalParam = {},\n                i,\n                ii,\n                params,\n                subkey,\n                par,\n                follower,\n                invokedCa = elem._invokedCa || (elem._invokedCa = {}),\n                ca,\n                caObj = this.ca;\n            // get all, return all applied attributes\n            if (name == null) {\n                var res = {};\n                for (key in attrs) {\n                    if (attrs[has](key)) {\n                        res[key] = attrs[key];\n                    }\n                }\n                res.gradient && res.fill === noneStr && (res.fill = res.gradient) && delete res.gradient;\n                res.transform = this._.transform;\n                res.visibility = this.node.style.display === noneStr ? hiddenStr : visibleStr;\n                return res;\n            } else {\n                if (value == null) {\n                    if (R.is(name, objectStr)) { // Provided as an object\n                        params = name;\n                    } else if (R.is(name, typeStringSTR)) { // get one, return the value of the given attribute\n                        if (name === fillStr && attrs.fill === noneStr && attrs.gradient) {\n                            return attrs.gradient;\n                        }\n                        if (name === transformStr) {\n                            return this._.transform;\n                        }\n                        if (name === visibilityStr) {\n                            return this.node.style.display === noneStr ? hiddenStr : visibleStr;\n                        }\n\n                        if (name in attrs) {\n                            return attrs[name];\n                        } else if (R.is(caObj[name], fnStr)) {\n                            return caObj[name].def;\n                        }\n                        return R._availableAttrs[name];\n                    }\n                } else { // key value provided seperately\n                    params = {};\n                    params[name] = value;\n                }\n\n                if (!R.stopPartialEventPropagation) {\n                    for (key in params) {\n                        eve('raphael.attr.' + key + '.' + this.id, this, params[key], key);\n                    }\n                }\n\n                // For each param\n                for (key in params) {\n                    // check if that is a Custom attribute or not\n                    ca = caObj[key];\n                    if (ca && !invokedCa[key] && R.is(ca, fnStr)) {\n                        invokedCa[key] = true; // prevent recursion\n                        par = ca.apply(this, [].concat(params[key]));\n                        invokedCa[key] = false;\n\n                        // If the custom attribute create another set of attribute to be updated\n                        // Then add them in the attribute list\n                        for (subkey in par) {\n                            finalParam[subkey] = par[subkey];\n                        }\n                        // Add the attribute in attrs\n                        attrs[key] = params[key];\n                    } else {\n                        finalParam[key] = params[key];\n                    }\n                }\n\n                setFillAndStroke(this, finalParam);\n\n                for (i = 0, ii = this.followers.length; i < ii; i++) {\n                    follower = this.followers[i];\n                    (follower.cb && !follower.cb.call(follower.el, finalParam, this)) ||\n                        follower.el.attr(finalParam);\n                }\n\n                return this;\n            }\n        };\n\n        elproto.pinchstart = function (handler, context) {\n            var elem = this,\n                dummyEve = {},\n                fn = function (e) {\n                    // Pinchstart is triggered only if 2 fingers are used.\n                    if (e.touches && e.touches.length === 2) {\n                        var touch1 = e.touches[0],\n                            touch2 = e.touches[1];\n                        // Flag to block drag events\n                        elem._blockDrag = true;\n                        e && e.preventDefault();\n                        R.makeSelectiveCopy(dummyEve, e);\n                        dummyEve.data = {\n                            finger0: touch1,\n                            finger1: touch2,\n                            distanceX: getTouchDistance(touch1, touch2),\n                            distanceY: getTouchDistance(touch1, touch2, true)\n                        };\n                        handler.call(context || elem, dummyEve);\n                    } else {\n                        elem._blockDrag = false;\n                    }\n                };\n            // Storing the handlers\n            storeHandlers(elem, handler, fn);\n\n            elem.node.addEventListener('touchstart', fn);\n        };\n\n        elproto.unpinchstart = function (handler) {\n            var elem = this,\n                derivedHandler = removeHandlers(elem, handler);\n            elem.__blockDrag = false;\n            elem._pinchDragStarted = false;\n            derivedHandler && elem.node.removeEventListener('touchstart', derivedHandler);\n        };\n\n        elproto.pinchmove = function (handler, context) {\n            var elem = this,\n                dummyEve = {},\n                fn = function (e) {\n                    // Pinchin is triggered only if 2 fingers are used.\n                    if (e.touches && e.touches.length === 2) {\n                        var touch1 = e.touches[0],\n                            touch2 = e.touches[1];\n                        e && e.preventDefault();\n                        elem._pinchDragStarted = true;\n                        R.makeSelectiveCopy(dummyEve, e);\n                        dummyEve.data = {\n                            finger0: touch1,\n                            finger1: touch2,\n                            distanceX: getTouchDistance(touch1, touch2),\n                            distanceY: getTouchDistance(touch1, touch2, true)\n                        };\n                        handler.call(context || elem, dummyEve);\n                    }\n                };\n\n            // Storing the handlers\n            storeHandlers(elem, handler, fn);\n\n            elem.node.addEventListener('touchmove', fn);\n        };\n\n        elproto.unpinchmove = function (handler) {\n            var elem = this,\n                derivedHandler = removeHandlers(elem, handler);\n\n            derivedHandler && elem.node.removeEventListener('touchmove', derivedHandler);\n        };\n\n        elproto.pinchend = function (handler, context) {\n            var elem = this,\n                fn = function (e) {\n                    if (elem._pinchDragStarted) {\n                        elem._pinchDragStarted = false;\n                        handler.call(context || elem, e);\n                    }\n                };\n\n            // Storing the handlers\n            storeHandlers(elem, handler, fn);\n\n            elem.node.addEventListener('touchend', fn);\n        };\n\n        elproto.unpinchend = function (handler) {\n            var elem = this,\n                derivedHandler = removeHandlers(elem, handler);\n            elem._pinchDragStarted = false;\n            derivedHandler && elem.node.removeEventListener('touchend', derivedHandler);\n        };\n\n        elproto.pinch = function (pinchstarthandler, pinchinhandler, pinchendhandler) {\n            elproto.pinchstart.call(this, pinchstarthandler);\n            elproto.pinchin.call(this, pinchinhandler);\n            elproto.pinchend.call(this, pinchendhandler);\n        };\n\n        elproto.unpinch = function (pinchstarthandler, pinchinhandler, pinchendhandler) {\n            elproto.unpinchstart.call(this, pinchstarthandler);\n            elproto.unpinchin.call(this, pinchinhandler);\n            elproto.unpinchend.call(this, pinchendhandler);\n        };\n        elproto.fcwheel = function (handler, context) {\n            var elem = this,\n                dummyEve = {},\n                fn = function (e) {\n                    e && e.preventDefault();\n                    R.makeSelectiveCopy(dummyEve, e);\n                    handler.call(context || elem, dummyEve);\n                };\n            // Storing the handlers\n            storeHandlers(elem, handler, fn);\n            elem.node.addEventListener('wheel', fn);\n        };\n        elproto.fcunwheel = function (handler) {\n            var elem = this,\n                derivedHandler = removeHandlers(elem, handler);\n            derivedHandler && elem.node.removeEventListener('wheel', derivedHandler);\n        };\n\n        /* \\\n        * Element.on\n        [ method ]\n        **\n        * Bind handler function for a particular event to Element\n        * @param eventType - Type of event\n        * @param handler - Function to be called on the firing of the event\n        \\ */\n        elproto.on = function (eventType, handler, context) {\n            if (!handler || !eventType) {\n                return;\n            }\n            var elem = this,\n                node,\n                actualEventType,\n                // an event is termed as safe if it is preceeded by fc\n                isSafe = eventType.match(/fc-/),\n                fn = handler;\n            if (this.removed) {\n                return this;\n            }\n\n            elem._actualListners || (elem._actualListners = []);\n            elem._derivedListeners || (elem._derivedListeners = []);\n\n            switch (eventType) {\n                case 'fc-dragstart':\n                    elem.drag(null, handler);\n                    return elem;\n                case 'fc-dragmove':\n                    elem.drag(handler);\n                    return elem;\n                case 'fc-dragend':\n                    elem.drag(null, null, handler);\n                    return elem;\n                case 'fc-dbclick':\n                    elem.dbclick(handler, context);\n                    return elem;\n                case 'fc-pinchstart':\n                    elem.pinchstart(handler, context);\n                    return elem;\n                case 'fc-pinchmove':\n                    elem.pinchmove(handler, context);\n                    return elem;\n                case 'fc-pinchend':\n                    elem.pinchend(handler, context);\n                    return elem;\n                case 'fc-click':\n                    elem.fcclick(handler, context);\n                    return elem;\n                case 'fc-wheel':\n                    elem.fcwheel(handler, context);\n                    return elem;\n            }\n\n            // Setting the original event on which operations has to be done\n            isSafe && (eventType = eventType.replace(/fc-/, ''));\n\n            /**\n             * Here we are implementing safe mouse events. All browsers for which pointer events are supported, we are using\n             * pointer events for touch. For rest (non-hybrid ios device) we are using touch events.\n             */\n            if (isSafe) {\n                if (supportsTouch) {\n                    actualEventType = eventType;\n                    eventType = (supportsPointer ? R.safePointerEventMapping[eventType] : safeMouseEventMapping[eventType])\n                        || eventType;\n\n                    // Mouse out event's handler is fired when the next element on the page is hovered.\n                    if (actualEventType === 'mouseout') {\n                        fn = function (e) {\n                            // No action done if multi touch triggered in touch device supporting pointer\n                            if (!(supportsPointer && supportsTouch && !e.isPrimary)) {\n                                lastHoveredInfo.elementInfo.push({\n                                    el: context || elem,\n                                    callback: handler\n                                });\n                                lastHoveredInfo.srcElement = e.srcElement || e.target;\n                            }\n                        }\n                        eventType = supportsPointer ? 'pointerover' : 'touchstart';\n                    }\n                }\n            }\n\n            // IE-11 cannot emit load and error event,\n            // that's why we are attaching the load and error events on the Reference Image\n            if (this._ && this._.RefImg && (eventType === 'load' || eventType === 'error')) {\n                node = this._.RefImg;\n                fn = function (e) {\n                    // No action done if multi touch triggered in touch device supporting pointer\n                    // !(supportsPointer && supportsTouch && !e.isPrimary) && !elem.removed && handler.call(elem, e);\n                    !elem.removed && handler.call(elem, e);\n                };\n            } else {\n                node = this.node;\n            }\n            if (fn === handler) {\n                fn = function (e) {\n                    // No action done if multi touch triggered in touch device supporting pointer\n                    !(supportsPointer && supportsTouch && !e.isPrimary) && handler.call(context || elem, e);\n                }\n            }\n            elem._actualListners.push(handler);\n            elem._derivedListeners.push(fn);\n\n            if (node.addEventListener) {\n                node.addEventListener(eventType, fn);\n            } else {\n                node['on' + eventType] = fn;\n            }\n            return this;\n        };\n\n        /* \\\n        * Element.off\n        [ method ]\n        **\n        * Remove handler function bind to an event of element\n        * @param eventType - Type of event\n        * @param handler - Function to be removed from event\n        \\ */\n        elproto.off = function (eventType, handler) {\n            var elem = this,\n                fn = handler,\n                actualEventType,\n                index,\n                // an event is termed as safe if it is preceeded by fc\n                isSafe = eventType.match(/fc-/),\n                node;\n            if (this.removed || !elem._actualListners || !eventType || !handler) {\n                return this;\n            }\n\n            // Unbinding the drag events\n            switch (eventType) {\n                case 'fc-dragstart':\n                    elem.undragstart(handler);\n                    return elem;\n                case 'fc-dragmove':\n                    elem.undragmove(handler);\n                    return elem;\n                case 'fc-dragend':\n                    elem.undragend(handler);\n                    return elem;\n                case 'fc-dbclick':\n                    elem.undbclick(handler);\n                    return elem;\n                case 'fc-pinchstart':\n                    elem.unpinchstart(handler);\n                    return elem;\n                case 'fc-pinchmove':\n                    elem.unpinchmove(handler);\n                    return elem;\n                case 'fc-pinchend':\n                    elem.unpinchend(handler);\n                    return elem;\n                case 'fc-click':\n                    elem.fcunclick(handler);\n                    return elem;\n                case 'fc-wheel':\n                    elem.fcunwheel(handler);\n                    return elem;\n            }\n\n            // Setting the original event on which operations has to be done\n            isSafe && (eventType = eventType.replace(/fc-/, ''));\n\n            fn = handler;\n\n            if (isSafe) {\n                if (supportsTouch) {\n                    actualEventType = eventType;\n                    eventType = (supportsPointer ? R.safePointerEventMapping[eventType] : safeMouseEventMapping[eventType])\n                        || eventType;\n                    if (actualEventType === 'mouseout') {\n                        eventType = supportsPointer ? 'pointerover' : 'touchstart';\n                    }\n                }\n            }\n\n            if (this._ && this._.RefImg) {\n                node = this._.RefImg;\n            } else {\n                node = this.node;\n            }\n            index = elem._actualListners.indexOf(fn);\n\n            if (index !== -1) {\n                fn = elem._derivedListeners[index];\n                elem._actualListners.splice(index, 1);\n                elem._derivedListeners.splice(index, 1);\n            }\n\n            if (node.removeEventListener) {\n                node.removeEventListener(eventType, fn);\n            } else {\n                node['on' + eventType] = null;\n            }\n            return this;\n        };\n\n        R._engine.path = function (svg, attrs, group) {\n            var el = $('path'),\n                res = new Element(el, svg, group);\n\n            res.type = 'path';\n            // Apply the attribute if provided\n            attrs && res.attr(attrs);\n            return res;\n        };\n\n        R._engine.group = function (svg, id, group, overrideId) {\n            var el = $('g'),\n                res = new Element(el, svg, group);\n\n            res.type = 'group';\n            res.canvas = res.node;\n            res.top = res.bottom = null;\n            res._id = id || E;\n\n            if (id) {\n                if (overrideId) {\n                    el.setAttribute('class', 'raphael-group-' + id);\n                } else {\n                    el.setAttribute('class', 'raphael-group-' + res.id + '-' + id);\n                }\n            }\n\n            return res;\n        };\n\n        R._engine.circle = function (svg, attrs, group) {\n            var el = $('circle'),\n                res = new Element(el, svg, group);\n\n            res.type = 'circle';\n            // Apply the attribute if provided\n            attrs && res.attr(attrs);\n            return res;\n        };\n        R._engine.rect = function (svg, attrs, group) {\n            var el = $('rect'),\n                res = new Element(el, svg, group);\n\n            res.type = 'rect';\n            attrs.rx = attrs.ry = attrs.r;\n            // Apply the attribute if provided\n            attrs && res.attr(attrs);\n            return res;\n        };\n        R._engine.ellipse = function (svg, attrs, group) {\n            var el = $('ellipse'),\n                res = new Element(el, svg, group);\n\n            res.type = 'ellipse';\n            // Apply the attribute if provided\n            attrs && res.attr(attrs);\n            return res;\n        };\n        R._engine.image = function (svg, attrs, group) {\n            var el = $(imageStr),\n                res = new Element(el, svg, group, true);\n\n            res._.group = group || svg;\n            res.type = imageStr;\n            el.setAttribute('preserveAspectRatio', noneStr);\n            // Apply the attribute if provided\n            attrs && res.attr(attrs);\n            return res;\n        };\n        R._engine.text = function (svg, attrs, group, css) {\n            var el = $(textStr),\n                res = new Element(el, svg, group);\n            res.type = textStr;\n            // Ideally this code should not be here as .css() is not a function of rapheal.\n            css && res.css && res.css(css, undefined, true);\n            // Apply the attribute if provided\n            attrs && res.attr(attrs);\n            return res;\n        };\n\n        R._engine.setSize = function (width, height) {\n            this.width = width || this.width;\n            this.height = height || this.height;\n            this.canvas.setAttribute('width', this.width);\n            this.canvas.setAttribute('height', this.height);\n            if (this._viewBox) {\n                this.setViewBox.apply(this, this._viewBox);\n            }\n            return this;\n        };\n        R._engine.create = function () {\n            var con = R._getContainer.apply(0, arguments),\n                container = con && con.container,\n                x = con.x,\n                y = con.y,\n                width = con.width,\n                height = con.height,\n                paper;\n            if (!container) {\n                throw new Error('SVG container not found.');\n            }\n            var cnvs = $('svg'),\n                css = 'overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);' +\n                '-webkit-user-select:none;-moz-user-select:-moz-none;-khtml-user-select:none;' +\n                '-ms-user-select:none;user-select:none;-o-user-select:none;cursor:default;' +\n                'vertical-align:middle;',\n                isFloating;\n            // '-ms-touch-action : none' permits no default touch behaviors in IE (10 and 11) browser\n            // '-touch-action : none' permits no default touch behaviors in mozilla of windows\n            if (supportsTouch) {\n                if (R.isIE10) {\n                    css += '-ms-touch-action:none;';\n                } else {\n                    css += 'touch-action:none;';\n                }\n            }\n            x = x || 0;\n            y = y || 0;\n            width = width || 512;\n            height = height || 342;\n            $(cnvs, {\n                height: height,\n                version: 1.1,\n                width: width,\n                xmlns: svgNSStr\n            });\n\n            if (container === 1) {\n                cnvs.style.cssText = css + 'position:absolute;left:' + x + 'px;top:' + y + pxStr;\n\n                // Store body as the container\n                container = R._g.doc.body;\n                container.appendChild(cnvs);\n                isFloating = 1;\n            } else {\n                cnvs.style.cssText = css + 'position:relative';\n                if (container.firstChild) {\n                    container.insertBefore(cnvs, container.firstChild);\n                } else {\n                    container.appendChild(cnvs);\n                }\n            }\n            paper = new R._Paper();\n            paper.width = width;\n            paper.height = height;\n            paper.canvas = cnvs;\n            // Store the container for further detachment and attachment\n            paper.container = container;\n\n            $(cnvs, {\n                id: 'raphael-paper-' + paper.id\n            });\n            paper.clear();\n            paper._left = paper._top = 0;\n            isFloating && (paper.renderfix = function () {\n                // No render fix required when isFloating is true\n            });\n            paper.renderfix();\n            return paper;\n        };\n        R._engine.setViewBox = function (x, y, w, h, fit) {\n            eve('raphael.setViewBox', this, this._viewBox, [x, y, w, h, fit]);\n            var size = mmax(w / this.width, h / this.height),\n                top = this.top,\n                aspectRatio = fit ? 'meet' : 'xMinYMin',\n                vb,\n                sw;\n            if (x == null) {\n                if (this._vbSize) {\n                    size = 1;\n                }\n                delete this._vbSize;\n                vb = '0 0 ' + this.width + S + this.height;\n            } else {\n                this._vbSize = size;\n                vb = x + S + y + S + w + S + h;\n            }\n            $(this.canvas, {\n                viewBox: vb,\n                preserveAspectRatio: aspectRatio\n            });\n            if (size) {\n                while (top) {\n                    sw = 'stroke-width' in top.attrs ? top.attrs['stroke-width'] : 1;\n                    top.attr({\n                        'stroke-width': sw\n                    });\n                    top._.dirty = 1;\n                    top._.dirtyT = 1;\n                    top = top.prev;\n                }\n            }\n            this._viewBox = [x, y, w, h, !!fit];\n            return this;\n        };\n\n        /**\n         * Function to remove the paper form the DOM tree\n         */\n        R.prototype.detachPaper = function () {\n            if (this._detached !== false) {\n                this.container.removeChild(this.canvas);\n                this._detached = true;\n            }\n        };\n        /**\n         * Function to append the paper in the DOM tree\n         * @note: This might change the order of the child elements.\n         */\n        R.prototype.attachPaper = function () {\n            if (this._detached) {\n                this.container.appendChild(this.canvas);\n                this._detached = false;\n            }\n        };\n\n        R.prototype.renderfix = function () {\n            var cnvs = this.canvas,\n                s = cnvs.style,\n                pos;\n            try {\n                pos = cnvs.getScreenCTM() || cnvs.createSVGMatrix();\n            } catch (e) {\n                pos = cnvs.createSVGMatrix();\n            }\n            var left = -pos.e % 1,\n                top = -pos.f % 1;\n            if (left || top) {\n                if (left) {\n                    this._left = (this._left + left) % 1;\n                    s.left = this._left + pxStr;\n                }\n                if (top) {\n                    this._top = (this._top + top) % 1;\n                    s.top = this._top + pxStr;\n                }\n            }\n        };\n\n        R.prototype._desc = function (txt) {\n            var desc = this.desc;\n\n            if (!desc) {\n                this.desc = desc = $('desc');\n                this.canvas.appendChild(desc);\n            } else {\n                while (desc.firstChild) {\n                    desc.removeChild(desc.firstChild);\n                }\n            }\n            desc.appendChild(R._g.doc.createTextNode(R.is(txt, typeStringSTR) ? txt : ('Created with Red Rapha\\xebl ' +\n                R.version)));\n        };\n\n        R.prototype.clear = function () {\n            var c;\n            eve('raphael.clear', this);\n\n            while ((c = this.bottom)) {\n                c.remove();\n            }\n\n            c = this.canvas;\n            while (c.firstChild) {\n                c.removeChild(c.firstChild);\n            }\n            this.bottom = this.top = null;\n            c.appendChild(this.desc = $('desc'));\n            c.appendChild(this.defs = $('defs'));\n        };\n\n        R.prototype.remove = function () {\n            var i;\n            eve('raphael.remove', this);\n\n            while ((i = this.bottom)) {\n                i.remove();\n            }\n\n            this.defs && this.defs.parentNode.removeChild(this.defs);\n            this.desc && this.desc.parentNode.removeChild(this.desc);\n            this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas);\n            for (i in this) {\n                this[i] = typeof this[i] === fnStr ? R._removedFactory(i) : null;\n            }\n            this.removed = true;\n        };\n        R.prototype.setHTMLClassName = function () {\n            // blank functiom\n        };\n        // var setproto = R.st;\n        // for (var method in elproto)\n        //     if (elproto[has](method) && !setproto[has](method)) {\n        //         setproto[method] = (function(methodname) {\n        //             return function() {\n        //                 var arg = arguments;\n        //                 return this.forEach(function(el) {\n        //                     el[methodname].apply(el, arg);\n        //                 });\n        //             };\n        //         })(method);\n        //     }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./source/raphael.svg.js","import { getArrayCopy } from \"./raphael.lib\";\n\n/**!\n* RedRaphael 1.0.0 - JavaScript Vector Library VML Module\n* Copyright (c) 2012-2013 FusionCharts, Inc. <http://www.fusioncharts.com>\n*\n* Raphael 2.1.0 - JavaScript Vector Library VML Module\n* Copyright (c) 2008-2012 Dmitry Baranovskiy <http://raphaeljs.com>\n* Copyright  2008-2012 Sencha Labs <http://sencha.com>\n*\n* Licensed under the MIT license.\n*/\n// Define _window as window object in case of indivual file inclusion.\nexport default function (R) {\n    if (R.vml) {\n        var has = \"hasOwnProperty\",\n        Str = String,\n        toFloat = parseFloat,\n        math = Math,\n        round = math.round,\n        mmax = math.max,\n        mmin = math.min,\n        sqrt = math.sqrt,\n        abs = math.abs,\n        fillString = \"fill\",\n        separator = /[, ]+/,\n        eve = R.eve,\n        ms = \" progid:DXImageTransform.Microsoft\",\n        arrayShift = Array.prototype.shift,\n        doc = R._g.doc,\n        f = doc.createElement(\"div\"),\n        b,\n        S = \" \",\n        E = \"\",\n        map = {\n            M: \"m\",\n            L: \"l\",\n            C: \"c\",\n            Z: \"x\",\n            m: \"t\",\n            l: \"r\",\n            c: \"v\",\n            z: \"x\"\n        },\n        bites = /([clmz]),?([^clmz]*)/gi,\n        blurregexp = / progid:\\S+Blur\\([^\\)]+\\)/g,\n        val = /-?[^,\\s-]+/g,\n        cssDot = \"position:absolute;left:0;top:0;width:1px;height:1px\",\n        zoom = 21600,\n        pathTypes = {\n            path: 1,\n            rect: 1,\n            image: 1\n        },\n        ovalTypes = {\n            circle: 1,\n            ellipse: 1\n        },\n        path2vml = function(path) {\n            var total = /[ahqstv]/ig,\n            command = R._pathToAbsolute;\n            Str(path).match(total) && (command = R._path2curve);\n            total = /[clmz]/g;\n            if (command == R._pathToAbsolute && !Str(path).match(total)) {\n                var res = Str(path).replace(bites, function(all, command, args) {\n                    var vals = [],\n                    isMove = command.toLowerCase() == \"m\",\n                    res = map[command];\n                    args.replace(val, function(value) {\n                        if (isMove && vals.length == 2) {\n                            res += vals + map[command == \"m\" ? \"l\" : \"L\"];\n                            vals = [];\n                        }\n                        vals.push(round(value * zoom));\n                    });\n                    return res + vals;\n                });\n\n                return res || 'm0,0';\n            }\n            var pa = command(path), p, r;\n            res = [];\n            for (var i = 0, ii = pa.length; i < ii; i++) {\n                p = pa[i];\n                r = pa[i][0].toLowerCase();\n                r == \"z\" && (r = \"x\");\n                for (var j = 1, jj = p.length; j < jj; j++) {\n                    r += round(p[j] * zoom) + (j != jj - 1 ? \",\" : E);\n                }\n                res.push(r);\n            }\n            return res.length ? res.join(S) : 'm0,0';\n        },\n        compensation = function(deg, dx, dy) {\n            var m = R.matrix();\n            m.rotate(-deg, .5, .5);\n            return {\n                dx: m.x(dx, dy),\n                dy: m.y(dx, dy)\n            };\n        },\n        setCoords = function(p, sx, sy, dx, dy, deg) {\n            var _ = p._,\n            m = p.matrix,\n            fillpos = _.fillpos,\n            o = p.node,\n            s = o.style,\n            y = 1,\n            flip = \"\",\n            dxdy,\n            kx = zoom / sx,\n            ky = zoom / sy;\n            s.visibility = \"hidden\";\n            if (!sx || !sy) {\n                return;\n            }\n            o.coordsize = abs(kx) + S + abs(ky);\n            s.rotation = deg * (sx * sy < 0 ? -1 : 1);\n            if (deg) {\n                var c = compensation(deg, dx, dy);\n                dx = c.dx;\n                dy = c.dy;\n            }\n            sx < 0 && (flip += \"x\");\n            sy < 0 && (flip += \" y\") && (y = -1);\n            s.flip = flip;\n            o.coordorigin = (dx * -kx) + S + (dy * -ky);\n            if (fillpos || _.fillsize) {\n                var fill = o.getElementsByTagName(fillString);\n                fill = fill && fill[0];\n                if (fill) {\n                    o.removeChild(fill);\n                    if (fillpos) {\n                        c = compensation(deg, m.x(fillpos[0], fillpos[1]), m.y(fillpos[0], fillpos[1]));\n                        fill.position = c.dx * y + S + c.dy * y;\n                    }\n                    if (_.fillsize) {\n                        fill.size = _.fillsize[0] * abs(sx) + S + _.fillsize[1] * abs(sy);\n                    }\n                    o.appendChild(fill);\n                }\n            }\n            s.visibility = \"visible\";\n        };\n        f.innerHTML = '<v:shape adj=\"1\"/>';\n        b = f.firstChild;\n        b.style.behavior = \"url(#default#VML)\";\n        if (!(b && typeof b.adj == 'object')) {\n            R.type = E;\n            // return (R.type = E);\n        }\n        f = null;\n\n        R._url = E;\n        R.toString = function() {\n            return  \"Your browser doesn\\u2019t support SVG. Falling down to VML.\\nYou are running Rapha\\xebl \" + this.version;\n        };\n        var addArrow = function(o, value, isEnd) {\n            var values = Str(value).toLowerCase().split(\"-\"),\n            se = isEnd ? \"end\" : \"start\",\n            i = values.length,\n            type = \"classic\",\n            w = \"medium\",\n            h = \"medium\";\n            while (i--) {\n                switch (values[i]) {\n                    case \"block\":\n                    case \"classic\":\n                    case \"oval\":\n                    case \"diamond\":\n                    case \"open\":\n                    case \"none\":\n                        type = values[i];\n                        break;\n                    case \"wide\":\n                    case \"narrow\":\n                        h = values[i];\n                        break;\n                    case \"long\":\n                    case \"short\":\n                        w = values[i];\n                        break;\n                }\n            }\n            var stroke = o.node.getElementsByTagName(\"stroke\")[0];\n            stroke[se + \"arrow\"] = type;\n            stroke[se + \"arrowlength\"] = w;\n            stroke[se + \"arrowwidth\"] = h;\n        },\n        applyCustomAttributes = function (o, attrs) {\n            for (var key in attrs) {\n                eve(\"raphael.attr.\" + key + \".\" + o.id, o, attrs[key], key);\n                o.ca[key] && o.attr(key, attrs[key]);\n            }\n        },\n        styles = ['font', 'line-height', 'font-family', 'font-weight', 'font-style', 'font-size'],\n        getComputedFontStyle = function (o) {\n            var style = {},\n                _break,\n                i,\n                len = styles.length,\n                attrs;\n            while (o.paper && o.paper.canvas) {\n                attrs = o.attrs;\n                _break = true;\n                for (i = 0; i < len; i++) {\n                    if (!style[styles[i]]) {\n                        style[styles[i]] = attrs[styles[i]];\n                        _break = false;\n                    }\n                }\n                if (_break) break;\n                o = o.parent;\n            }\n            return style;\n        },\n        setFillAndStroke = R._setFillAndStroke = function(o, params) {\n            if (!o.paper.canvas) return;\n            // o.paper.canvas.style.display = \"none\";\n            o.attrs = o.attrs || {};\n            var node = o.node,\n            a = o.attrs,\n            s = node.style,\n            xy,\n            oriOp,\n            newpath = pathTypes[o.type] && (params.x != a.x || params.y != a.y || params.width != a.width || params.height != a.height || params.cx != a.cx || params.cy != a.cy || params.rx != a.rx || params.ry != a.ry || params.r != a.r),\n            isOval = ovalTypes[o.type] && (a.cx != params.cx || a.cy != params.cy || a.r != params.r || a.rx != params.rx || a.ry != params.ry),\n            isGroup = o.type === 'group',\n            res = o;\n            oriOp = res.oriOp || (res.oriOp = {});\n            for (var par in params)\n                // Not setting any black property\n                if (params[par] === '') {\n                    node.removeAttribute(par);\n                    delete a[par];\n                    delete params[par];\n                    continue;\n                } else if (params[has](par)) {\n                    a[par] = params[par];\n                }\n            if (newpath) {\n                a.path = R._getPath[o.type](o);\n                o._.dirty = 1;\n            }\n            params.href && (node.href = params.href);\n            params.title && (node.title = params.title);\n            params.target && (node.target = params.target);\n            params.cursor && (s.cursor = params.cursor);\n            \"blur\" in params && o.blur(params.blur);\n\n            if (params.path && o.type == \"path\" || newpath) {\n                node.path = path2vml(~Str(a.path).toLowerCase().indexOf(\"r\") ? R._pathToAbsolute(a.path) : a.path);\n                if (o.type == \"image\") {\n                    o._.fillpos = [a.x, a.y];\n                    o._.fillsize = [a.width, a.height];\n                    setCoords(o, 1, 1, 0, 0, 0);\n                }\n            }\n            \"transform\" in params && o.transform(params.transform);\n            if (\"rotation\" in params) {\n                var rotation = params.rotation;\n                if (R.is(rotation, \"array\")) {\n                    o.rotate.apply(o, rotation);\n                }\n                else {\n                    o.rotate(rotation);\n                }\n            }\n            if (\"visibility\" in params) {\n                params.visibility === 'hidden' ? o.hide() : o.show();\n            }\n            if (isOval) {\n                var cx = +a.cx,\n                cy = +a.cy,\n                rx = +a.rx || +a.r || 0,\n                ry = + a.ry || + a.r || 0;\n                node.path = R.format(\"ar{0},{1},{2},{3},{4},{1},{4},{1}x\", round((cx - rx) * zoom), round((cy - ry) * zoom), round((cx + rx) * zoom), round((cy + ry) * zoom), round(cx * zoom));\n            }\n            if (\"clip-rect\" in params) {\n                var rect = Str(params[\"clip-rect\"]).split(separator);\n\n                if (rect.length == 4) {\n                    rect[0] = +rect[0];\n                    rect[1] = +rect[1];\n                    rect[2] = +rect[2] + rect[0];\n                    rect[3] = +rect[3] + rect[1];\n\n                    /** @todo create separate element for group clip-rect to\n                     * avoid unclipping issue */\n                    var div = isGroup ? node : (node.clipRect ||\n                            R._g.doc.createElement(\"div\")),\n                        offset,\n                        dstyle = div.style;\n\n                    if (isGroup) {\n                        o.clip = rect.slice(); // copy param\n                        offset = o.matrix.offset();\n                        offset = [toFloat(offset[0]), toFloat(offset[1])];\n                        // invert matrix calculation\n                        rect[0] -= offset[0];\n                        rect[1] -= offset[1];\n                        rect[2] -= offset[0];\n                        rect[3] -= offset[1];\n                        // Fix for bug in ie clip-auto when height/width is not defined\n                        /** @todo set dynamic w/h based on clip bounds or find\n                         * another workaround fix */\n                        //dstyle.width = \"10800px\";\n                        //dstyle.height = \"10800px\";\n\n                        // Not sure about the above fix\n                        // Revert the fix because it's creating another issue.\n                        // Setting the Group style, width/height as \"10800px\" makes the other group inaccessible\n                        // which is below this group\n                        dstyle.width = \"1px\";\n                        dstyle.height = \"1px\";\n                    }\n                    else if (!node.clipRect) {\n                        dstyle.top = \"0\";\n                        dstyle.left = \"0\";\n                        dstyle.width = o.paper.width + \"px\";\n                        dstyle.height = o.paper.height + \"px\";\n                        node.parentNode.insertBefore(div, node);\n                        div.appendChild(node);\n                        div.raphael = true;\n                        div.raphaelid = node.raphaelid;\n                        node.clipRect = div;\n                    }\n                    dstyle.position = \"absolute\";\n                    dstyle.clip = R.format(\"rect({1}px {2}px {3}px {0}px)\", rect);\n                }\n                if (!params[\"clip-rect\"]) {\n                    if (isGroup && o.clip) {\n                        node.style.clip = \"rect(0px 10800px 10800px 0px)\";\n                        delete o.clip;\n                    }\n                    else if (node.clipRect) {\n                        node.clipRect.style.clip = \"rect(0px 10800px 10800px 0px)\";\n                    }\n                }\n            }\n\n            if (\"shape-rendering\" in params) {\n                node.style.antialias = (params[\"shape-rendering\"] !== 'crisp');\n            }\n            // Css styles will be applied in element or group.\n            if (o.textpath || isGroup) {\n            var textpathStyle = isGroup ? node.style : o.textpath.style;\n                params.font && (textpathStyle.font = params.font);\n                params[\"font-family\"] && (textpathStyle.fontFamily = '\"' + params[\"font-family\"].split(\",\")[0].replace(/^['\"]+|['\"]+$/g, E) + '\"');\n                params[\"font-size\"] && (textpathStyle.fontSize = params[\"font-size\"]);\n                params[\"font-weight\"] && (textpathStyle.fontWeight = params[\"font-weight\"]);\n                params[\"font-style\"] && (textpathStyle.fontStyle = params[\"font-style\"]);\n            }\n            if (\"arrow-start\" in params) {\n                R.addArrow && R.addArrow(res, params[\"arrow-start\"]);\n            }\n            if (\"arrow-end\" in params) {\n                R.addArrow && R.addArrow(res, params[\"arrow-end\"], 1);\n            }\n            if (params.opacity != null ||\n                params[\"stroke-width\"] != null ||\n                params.fill != null ||\n                params.src != null ||\n                params.stroke != null ||\n                params[\"stroke-width\"] != null ||\n                params[\"stroke-opacity\"] != null ||\n                params[\"fill-opacity\"] != null ||\n                params[\"stroke-dasharray\"] != null ||\n                params[\"stroke-miterlimit\"] != null ||\n                params[\"stroke-linejoin\"] != null ||\n                params[\"stroke-linecap\"] != null) {\n                var fill = node.getElementsByTagName(fillString),\n                newfill = false,\n                fillOpacity = -1;\n                fill = fill && fill[0];\n                !fill && (newfill = fill = createNode(fillString));\n                if (o.type == \"image\" && params.src) {\n                    LoadRefImage(o, params);\n                    fill.src = params.src;\n                }\n                params.fill && (fill.on = true);\n                if (fill.on == null || params.fill == \"none\" || params.fill === null) {\n                    fill.on = false;\n                }\n\n                if (fill.on && params.fill) {\n                    var isURL = Str(params.fill).match(R._ISURL),\n                        urlArr;\n                    if (isURL) {\n                        urlArr = params.fill.split(R._ISURL);\n                        fill.parentNode == node && node.removeChild(fill);\n                        fill.rotate = true;\n                        fill.src = urlArr[1];\n                        fill.type = \"tile\";\n                        var bbox = o.getBBox(1);\n                        fill.position = bbox.x + S + bbox.y;\n                        o._.fillpos = [bbox.x, bbox.y];\n\n                        R._preload(urlArr[1], function() {\n                            o._.fillsize = [this.offsetWidth, this.offsetHeight];\n                        });\n                    } else {\n                        var color = R.getRGB(params.fill);\n                        fill.color = color.hex;\n                        fill.src = E;\n                        fill.type = \"solid\";\n\n                        if (color.error && (res.type in {\n                            circle: 1,\n                            ellipse: 1\n                        } || Str(params.fill).charAt() != \"r\") && addGradientFill(res, params.fill, fill)) {\n                            a.fill = \"none\";\n                            a.gradient = params.fill;\n                            fill.rotate = false;\n                        }\n                        else if (\"opacity\" in color && !(\"fill-opacity\" in params)) {\n                            // store oiginal non gradient color opacity\n                            oriOp.nonGradOpacity = fillOpacity = color.opacity;\n                        }\n                    }\n                }\n                if (fillOpacity !== -1 || \"fill-opacity\" in params || \"opacity\" in params) {\n                    var opacity = ((+a[\"fill-opacity\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1);\n                    opacity = mmin(mmax(opacity, 0), 1);\n                    oriOp.opacity = opacity;\n                    // if gradient color opacity is set then opacity (applied through the params)\n                    //  should be multiplied with the gradient opacity so that ratio will remain same\n                    if (oriOp.opacity1 !== undefined) {\n                        fill.opacity = oriOp.opacity1 * opacity;\n                        fill['o:opacity2'] = oriOp.opacity2 * opacity;\n                    } else {\n                        // multiply with the original non gradient color opacity with the opacity to preserve the ratio of the opacity\n                        fill.opacity = opacity * (oriOp.nonGradOpacity === undefined ? 1 : oriOp.nonGradOpacity);\n                    }\n                    if (fill.src) {\n                        fill.color = \"none\";\n                    }\n                }\n                oriOp.opacity = undefined;\n                node.appendChild(fill);\n                var stroke = (node.getElementsByTagName(\"stroke\") && node.getElementsByTagName(\"stroke\")[0]),\n                    newstroke = false;\n                !stroke && (newstroke = stroke = createNode(\"stroke\"));\n                if ((params.stroke && params.stroke != \"none\") ||\n                    params[\"stroke-width\"] ||\n                    params[\"stroke-opacity\"] != null ||\n                    params[\"stroke-dasharray\"] ||\n                    params[\"stroke-miterlimit\"] ||\n                    params[\"stroke-linejoin\"] ||\n                    params[\"stroke-linecap\"]) {\n                    stroke.on = true;\n                }\n                (params.stroke == \"none\" || params.stroke === null || stroke.on == null || params.stroke == 0 || params[\"stroke-width\"] == 0) && (stroke.on = false);\n                var strokeColor = R.getRGB(('stroke' in params) ? params.stroke : a.stroke);\n                stroke.on && params.stroke && (stroke.color = strokeColor.hex);\n                opacity = ((+a[\"stroke-opacity\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+strokeColor.opacity + 1 || 2) - 1);\n                var width = (toFloat(params[\"stroke-width\"]) || 1) * .75;\n                opacity = mmin(mmax(opacity, 0), 1);\n                params[\"stroke-width\"] == null && (width = a[\"stroke-width\"]);\n                params[\"stroke-width\"] && (stroke.weight = width);\n                width && width < 1 && (opacity *= width) && (stroke.weight = 1);\n                // stroke-opacity should be applied only if stroke color is provided.\n                stroke.opacity = (a.stroke !== 'none') ? opacity : 0;\n                params[\"stroke-linejoin\"] && (stroke.joinstyle = params[\"stroke-linejoin\"]) || newstroke && (newstroke.joinstyle = 'miter');\n                stroke.miterlimit = params[\"stroke-miterlimit\"] || 8;\n                params[\"stroke-linecap\"] && (stroke.endcap = params[\"stroke-linecap\"] == \"butt\" ? \"flat\" : params[\"stroke-linecap\"] == \"square\" ? \"square\" : \"round\");\n                if (params[\"stroke-dasharray\"]) {\n                    var dasharray = {\n                        \"-\": \"shortdash\",\n                        \".\": \"shortdot\",\n                        \"-.\": \"shortdashdot\",\n                        \"-..\": \"shortdashdotdot\",\n                        \". \": \"dot\",\n                        \"- \": \"dash\",\n                        \"--\": \"longdash\",\n                        \"- .\": \"dashdot\",\n                        \"--.\": \"longdashdot\",\n                        \"--..\": \"longdashdotdot\"\n                    };\n                    stroke.dashstyle = dasharray[has](params[\"stroke-dasharray\"]) ? dasharray[params[\"stroke-dasharray\"]] :\n                            ((params[\"stroke-dasharray\"].join && params[\"stroke-dasharray\"].join(' ')) || E);\n                }\n                newstroke && node.appendChild(stroke);\n            }\n            if (res.type == \"text\") {\n                res.paper.canvas.style.display = E;\n                var span = res.paper.span,\n                m = 100,\n                _style = getComputedFontStyle(res),\n                fontSize = _style.font && _style.font.match(/\\d+(?:\\.\\d*)?(?=px)/),\n                lineHeight = _style['line-height'] && (_style['line-height']+E).match(/\\d+(?:\\.\\d*)?(?=px)/);\n                s = span.style;\n                _style.font && (s.font = _style.font);\n                _style[\"font-family\"] && (s.fontFamily = _style[\"font-family\"]);\n                _style[\"font-weight\"] && (s.fontWeight = _style[\"font-weight\"]);\n                _style[\"font-style\"] && (s.fontStyle = _style[\"font-style\"]);\n                fontSize = toFloat(_style[\"font-size\"] || fontSize && fontSize[0]) || 10;\n                s.fontSize = fontSize * m + \"px\";\n                lineHeight = toFloat(_style[\"line-height\"] || lineHeight && lineHeight[0] || fontSize * 1.2) || 12;\n                s.lineHeight = lineHeight * m + 'px';\n                R.is(params.text, 'array') && (params.text = res.textpath.string = params.text.join('\\n').replace(/<br\\s*?\\/?>/ig, '\\n'));\n                res.textpath.string && (span.innerHTML = Str(res.textpath.string).replace(/</g, \"&#60;\").replace(/&/g, \"&#38;\").replace(/\\n/g, \"<br>\"));\n                var brect = span.getBoundingClientRect();\n                res.W = a.w = (brect.right - brect.left) / m;\n                res.H = a.h = (brect.bottom - brect.top) / m;\n                // res.paper.canvas.style.display = \"none\";\n                res.X = a.x;\n                res.Y = a.y;\n                var leading = lineHeight - fontSize;\n\n                switch(a[\"vertical-align\"]) {\n                    case \"top\":\n                        res.bby = res.H / 2; // + leading;\n                        break;\n                    case \"bottom\":\n                        res.bby = -res.H / 2; // - leading;\n                        break;\n                    default:\n                        res.bby = 0;\n                }\n\n                (\"x\" in params || \"y\" in params || res.bby !== undefined) && (res.path.v = R.format(\"m{0},{1}l{2},{1}\", round(a.x * zoom), round((a.y + (res.bby || 0)) * zoom), round(a.x * zoom) + 1));\n                var dirtyattrs = [\"x\", \"y\", \"text\", \"font\", \"font-family\", \"font-weight\", \"font-style\", \"font-size\", \"line-height\"];\n                for (var d = 0, dd = dirtyattrs.length; d < dd; d++)\n                    if (dirtyattrs[d] in params) {\n                        res._.dirty = 1;\n                        break;\n                    }\n\n                // text-anchor emulation\n                switch (a[\"text-anchor\"]) {\n                    case \"start\":\n                        res.textpath.style[\"v-text-align\"] = \"left\";\n                        res.bbx = res.W / 2;\n                        break;\n                    case \"end\":\n                        res.textpath.style[\"v-text-align\"] = \"right\";\n                        res.bbx = -res.W / 2;\n                        break;\n                    default:\n                        res.textpath.style[\"v-text-align\"] = \"center\";\n                        res.bbx = 0;\n                        break;\n                }\n                res.textpath.style[\"v-text-kern\"] = true;\n            }\n        // res.paper.canvas.style.display = E;\n        },\n        /*\n        * Keeps the follower element in sync with the leaders.\n        * First and second arguments represents the context(element) and the\n        name of the callBack function respectively.\n        * The callBack is invoked for indivual follower Element with the rest of\n        arguments.\n        */\n        updateFollowers = R._updateFollowers = function () {\n            var i,\n                ii,\n                followerElem,\n                args = getArrayCopy(arguments),\n                o = arrayShift.call(args),\n                fnName = arrayShift.call(args);\n            for (i = 0, ii = o.followers.length; i < ii; i++) {\n                followerElem = o.followers[i].el;\n                followerElem[fnName].apply(followerElem, args);\n            }\n        },\n        addGradientFill = function(o, gradient, fill) {\n            o.attrs = o.attrs || {};\n            var attrs = o.attrs,\n            pow = Math.pow,\n            oriFOpacity,\n            oriOp = o.oriOp,\n            opacity,\n            oindex,\n            type = \"linear\",\n            fxfy = \".5 .5\";\n            o.attrs.gradient = gradient;\n            gradient = Str(gradient).replace(R._radial_gradient, function(all, opts) {\n                type = \"radial\";\n                opts = opts && opts.split(',') || [];\n\n                // fx,fy of vml is cx,cy of svg\n                var cx = opts[0],\n                    cy = opts[1],\n                    r = opts[2],\n                    fx = opts[3],\n                    fy = opts[4],\n                    units = opts[5];\n                if (fx && fy) {\n                    fx = toFloat(fx);\n                    fy = toFloat(fy);\n                    pow(fx - .5, 2) + pow(fy - .5, 2) > .25 && (fy = sqrt(.25 - pow(fx - .5, 2)) * ((fy > .5) * 2 - 1) + .5);\n                    fxfy = fx + S + fy;\n                }\n                return E;\n            });\n            gradient = gradient.split(/\\s*\\-\\s*/);\n            if (type == \"linear\") {\n                var angle = gradient.shift();\n                angle = -toFloat(angle);\n                if (isNaN(angle)) {\n                    return null;\n                }\n            }\n            var dots = R._parseDots(gradient);\n            if (!dots) {\n                return null;\n            }\n            o = o.shape || o.node;\n            if (dots.length) {\n                fill.parentNode == o && o.removeChild(fill);\n                fill.on = true;\n                fill.method = \"none\";\n                fill.color = dots[0].color;\n                fill.color2 = dots[dots.length - 1].color;\n                //For VML use first and last available alpha\n                var clrs = [],\n                opacity1 = 1,\n                opacity2 = dots[0].opacity === undefined ? 1 : dots[0].opacity;\n                for (var i = 0, ii = dots.length; i < ii; i++) {\n                    dots[i].offset && clrs.push(dots[i].offset + S + dots[i].color);\n                    if (dots[i].opacity !== undefined) {\n                        opacity1 = dots[i].opacity;//update with latest avaible opacity\n                    }\n                }\n                fill.colors = clrs.length ? clrs.join() : \"0% \" + fill.color;\n                //set opacity1 & opacity2\n                // store original gradient color opacity\n                oriOp.opacity1 = opacity1;\n                oriOp.opacity2 = opacity2;\n                oriFOpacity = (oriOp.opacity === undefined) ? 1 : oriOp.opacity;\n                // if gradient color opacity is set then opacity (applied through the params)\n                // should be multiplied with the gradient opacity so that ratio will remain same\n                fill.opacity = opacity1 * oriFOpacity;\n                fill['o:opacity2'] = opacity2 * oriFOpacity;\n                if (type == \"radial\") {\n                    fill.type = \"gradientTitle\";\n                    fill.focus = \"100%\";\n                    fill.focussize = \"0 0\";\n                    fill.focusposition = fxfy;\n                    fill.angle = 0;\n                } else {\n                    // fill.rotate= true;\n                    fill.type = \"gradient\";\n                    fill.angle = (270 - angle) % 360;\n                }\n                o.appendChild(fill);\n            }\n            return 1;\n        },\n        Element = function(node, vml, group/*, dontAppend*/) {\n            var o = this,\n                parent = group || vml,\n                skew;\n\n            /*!dontAppend && */parent.canvas && parent.canvas.appendChild(node);\n            skew = createNode(\"skew\");\n            skew.on = true;\n            node.appendChild(skew);\n            o.skew = skew;\n\n            o.node = o[0] = node;\n            node.raphael = true;\n            node.raphaelid = o.id = R._oid++;\n\n            o.X = 0;\n            o.Y = 0;\n\n            o.attrs = o.attrs || {};\n            o.followers = o.followers || [];\n\n            o.paper = vml;\n            o.ca = o.customAttributes = o.customAttributes ||\n                new vml._CustomAttributes();\n\n            o.matrix = R.matrix();\n            o._ = {\n                transform: [],\n                sx: 1,\n                sy: 1,\n                dx: 0,\n                dy: 0,\n                deg: 0,\n                dirty: 1,\n                dirtyT: 1\n            };\n\n            o.parent = parent;\n            !parent.bottom && (parent.bottom = o);\n\n            o.prev = parent.top;\n            parent.top && (parent.top.next = o);\n            parent.top = o;\n            o.next = null;\n        };\n        var elproto = R.el;\n\n        Element.prototype = elproto;\n        elproto.constructor = Element;\n\n        elproto.transform = function(tstr) {\n            if (tstr == null) {\n                return this._.transform;\n            }\n            var vbs = this.paper._viewBoxShift,\n            vbt = vbs ? \"s\" + [vbs.scale, vbs.scale] + \"-1-1t\" + [vbs.dx, vbs.dy] : E,\n            oldt;\n\n            if (vbs) {\n                oldt = tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, this._.transform || E);\n            }\n\n            R._extractTransform(this, vbt + tstr);\n\n            var matrix = this.matrix.clone(),\n            skew = this.skew,\n            o = this.node,\n            split,\n            isGrad = ~Str(this.attrs.fill).indexOf(\"-\"),\n            isPatt = !Str(this.attrs.fill).indexOf(\"url(\");\n            matrix.translate(-.5, -.5);\n            if (isPatt || isGrad || this.type == \"image\") {\n                skew.matrix = \"1 0 0 1\";\n                skew.offset = \"0 0\";\n                split = matrix.split();\n                if ((isGrad && split.noRotation) || !split.isSimple) {\n                    o.style.filter = matrix.toFilter();\n                    var bb = this.getBBox(),\n                    bbt = this.getBBox(1),\n                    xget = bb.x2 && bbt.x2 && 'x2' || 'x',\n                    yget = bb.y2 && bbt.y2 && 'y2' || 'y',\n                    dx = bb[xget] - bbt[xget],\n                    dy = bb[yget] - bbt[yget];\n                    o.coordorigin = (dx * -zoom) + S + (dy * -zoom);\n                    setCoords(this, 1, 1, dx, dy, 0);\n                } else {\n                    o.style.filter = E;\n                    setCoords(this, split.scalex, split.scaley, split.dx, split.dy, split.rotate);\n                }\n            } else {\n                o.style.filter = E;\n                skew.matrix = Str(matrix);\n                skew.offset = matrix.offset();\n            }\n            oldt && (this._.transform = oldt);\n\n            return this;\n        };\n        elproto.rotate = function(deg, cx, cy) {\n            var o = this;\n            if (o.removed) {\n                return o;\n            }\n            updateFollowers(o, 'rotate', deg, cx, cy);\n            if (deg == null) {\n                return;\n            }\n            deg = Str(deg).split(separator);\n            if (deg.length - 1) {\n                cx = toFloat(deg[1]);\n                cy = toFloat(deg[2]);\n            }\n            deg = toFloat(deg[0]);\n            (cy == null) && (cx = cy);\n            if (cx == null || cy == null) {\n                var bbox = o.getBBox(1);\n                cx = bbox.x + bbox.width / 2;\n                cy = bbox.y + bbox.height / 2;\n            }\n            o._.dirtyT = 1;\n            o.transform(o._.transform.concat([[\"r\", deg, cx, cy]]));\n            return o;\n        };\n        elproto.translate = function(dx, dy) {\n            var o = this;\n            if (o.removed) {\n                return o;\n            }\n            updateFollowers(o, 'translate', dx, dy);\n            dx = Str(dx).split(separator);\n            if (dx.length - 1) {\n                dy = toFloat(dx[1]);\n            }\n            dx = toFloat(dx[0]) || 0;\n            dy = +dy || 0;\n            if (o._.bbox) {\n                o._.bbox.x += dx;\n                o._.bbox.y += dy;\n            }\n            o.transform(o._.transform.concat([[\"t\", dx, dy]]));\n            return o;\n        };\n        elproto.scale = function(sx, sy, cx, cy) {\n            var o = this;\n            if (o.removed) {\n                return o;\n            }\n            updateFollowers(o, 'scale', sx, sy, cx, cy);\n            sx = Str(sx).split(separator);\n            if (sx.length - 1) {\n                sy = toFloat(sx[1]);\n                cx = toFloat(sx[2]);\n                cy = toFloat(sx[3]);\n                isNaN(cx) && (cx = null);\n                isNaN(cy) && (cy = null);\n            }\n            sx = toFloat(sx[0]);\n            (sy == null) && (sy = sx);\n            (cy == null) && (cx = cy);\n            if (cx == null || cy == null) {\n                var bbox = o.getBBox(1);\n            }\n            cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n            cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n\n            o.transform(o._.transform.concat([[\"s\", sx, sy, cx, cy]]));\n            o._.dirtyT = 1;\n            return o;\n        };\n        elproto.hide = function(soft) {\n            var o = this;\n            updateFollowers(o, 'hide', soft);\n            !o.removed && (o.node.style.display = \"none\");\n            return o;\n        };\n\n        elproto.show = function(soft) {\n            var o = this;\n            updateFollowers(o, 'show', soft);\n            !o.removed && (o.node.style.display = E);\n            return o;\n        };\n        elproto._getBBox = function() {\n            var o = this;\n            if (o.removed) {\n                return {};\n            }\n            return {\n                x: o.X + (o.bbx || 0) - o.W / 2,\n                y: o.Y + (o.bby || 0) - o.H / 2,\n                width: o.W,\n                height: o.H\n            };\n        };\n        elproto.remove = function() {\n            if (this.removed || !this.parent.canvas) {\n                return;\n            }\n\n            var o = this,\n                node = R._engine.getNode(o),\n                paper = o.paper,\n                shape = o.shape,\n                i;\n\n            paper.__set__ && paper.__set__.exclude(o);\n            eve.unbind(\"raphael.*.*.\" + o.id);\n\n            shape && shape.parentNode.removeChild(shape);\n            node.parentNode && node.parentNode.removeChild(node);\n\n            while (i = o.followers.pop()) {\n                i.el.remove();\n            }\n            while (i = o.bottom) {\n                i.remove();\n            }\n\n            if (o._drag) {\n                o.undrag();\n            }\n\n            if (o.events)  {\n                while (i = o.events.pop()) {\n                    i.unbind();\n                }\n            }\n\n            o.removeData();\n            delete paper._elementsById[o.id];\n            R._tear(o, o.parent);\n\n            for (var i in o) {\n                o[i] = typeof o[i] === \"function\" ? R._removedFactory(i) : null;\n            }\n            o.removed = true;\n        };\n\n        elproto.attr = function(name, value) {\n            if (this.removed) {\n                return this;\n            }\n            if (name == null) {\n                var res = {};\n                for (var a in this.attrs)\n                    if (this.attrs[has](a)) {\n                        res[a] = this.attrs[a];\n                    }\n                res.gradient && res.fill == \"none\" && (res.fill = res.gradient) && delete res.gradient;\n                res.transform = this._.transform;\n                res.visibility = this.node.style.display === \"none\" ? \"hidden\" : \"visible\";\n                return res;\n            }\n            if (value == null && R.is(name, \"string\")) {\n                if (name == fillString && this.attrs.fill == \"none\" && this.attrs.gradient) {\n                    return this.attrs.gradient;\n                }\n                if (name == \"visibility\") {\n                    return this.node.style.display === \"none\" ? \"hidden\" : \"visible\";\n                }\n                var names = name.split(separator),\n                out = {};\n                for (var i = 0, ii = names.length; i < ii; i++) {\n                    name = names[i];\n                    if (name in this.attrs) {\n                        out[name] = this.attrs[name];\n                    } else if (R.is(this.ca[name], \"function\")) {\n                        out[name] = this.ca[name].def;\n                    } else {\n                        out[name] = R._availableAttrs[name];\n                    }\n                }\n                return ii - 1 ? out : out[names[0]];\n            }\n            if (this.attrs && value == null && R.is(name, \"array\")) {\n                out = {};\n                for (i = 0, ii = name.length; i < ii; i++) {\n                    out[name[i]] = this.attr(name[i]);\n                }\n                return out;\n            }\n            var params;\n            if (value != null) {\n                params = {};\n                params[name] = value;\n            }\n            value == null && R.is(name, \"object\") && (params = name);\n            if (!R.stopPartialEventPropagation) {\n                for (var key in params) {\n                    eve(\"raphael.attr.\" + key + \".\" + this.id, this, params[key], key);\n                }\n            }\n            if (params) {\n                var todel = {};\n                for (key in this.ca) {\n                    if (this.ca[key] && params[has](key) && R.is(this.ca[key], \"function\") && !this.ca['_invoked' + key]) {\n                        this.ca['_invoked' + key] = true; // prevent recursion\n                        var par = this.ca[key].apply(this, [].concat(params[key]));\n                        delete this.ca['_invoked' + key];\n\n                        for (var subkey in par) {\n                            if (par[has](subkey)) {\n                                params[subkey] = par[subkey];\n                            }\n                        }\n                        this.attrs[key] = params[key];\n                        if (par === false) {\n                            todel[key] = params[key];\n                            delete params[key];\n                        }\n                    }\n                }\n\n                // this.paper.canvas.style.display = \"none\";\n                if ('text' in params && this.type == \"text\") {\n                    R.is(params.text, 'array') && (params.text = params.text.join('\\n'));\n                    this.textpath.string = params.text.replace(/<br\\s*?\\/?>/ig, '\\n');\n                }\n                setFillAndStroke(this, params);\n                var follower;\n                for (i = 0, ii = this.followers.length; i < ii; i++) {\n                    follower = this.followers[i];\n                    (follower.cb && !follower.cb.call(follower.el, params, this)) ||\n                        follower.el.attr(params);\n                }\n                for (var subkey in todel) {\n                    params[subkey] = todel[subkey];\n                }\n            // this.paper.canvas.style.display = E;\n            }\n            return this;\n        };\n\n        /*\\\n        * Element.on\n        [ method ]\n        **\n        * Bind handler function for a particular event to Element\n        * @param eventType - Type of event\n        * @param handler - Function to be called on the firing of the event\n        \\*/\n        elproto.on = function(eventType, handler, context) {\n            var elem = this,\n                dummyEve,\n                fn = handler;\n            if (elem.removed) {\n                return elem;\n            }\n\n            elem._actualListners || (elem._actualListners = []);\n            elem._derivedListeners || (elem._derivedListeners = []);\n\n            switch (eventType) {\n                case 'fc-dragstart':\n                    elem.drag(null, handler);\n                    return elem;\n                case 'fc-dragmove':\n                    elem.drag(handler);\n                    return elem;\n                case 'fc-dragend':\n                    elem.drag(null, null, handler);\n                    return elem;\n                case 'fc-dbclick':\n                    elem.dbclick(handler, context);\n                    return elem;\n                case 'fc-click':\n                    elem.fcclick(handler, context);\n                    return elem;\n            }\n\n            eventType = eventType.replace(/fc-/, '');\n\n            // There is discrepancy in IE-8 load and error event emmition,\n            // that's why we are attaching the load and error events on the Reference Image\n            if (elem._ && elem._.RefImg && (eventType === 'load' || eventType === 'error')) {\n                node = elem._.RefImg;\n                fn = (function (el, handler) {\n                    return function (e) {\n                        dummyEve = {};\n                        R.makeSelectiveCopy(dummyEve, e);\n                        dummyEve.target = elem._.RefImg;\n                        !el.removed && handler.call(el, dummyEve);\n                    };\n                })(elem, handler);\n            } else {\n                node = elem.node;\n            }\n\n            if (!node.attachEvent) {\n                fn = function() {\n                    var evt = R._g.win.event;\n                    evt.target = evt.srcElement;\n                    handler(evt);\n                };\n            } else if (fn === handler) {\n                fn = function (e) {\n                    handler.call(context || elem, e);\n                }\n            }\n\n            // Storing the actual and derived event for removing it later\n            elem._actualListners.push(handler);\n            elem._derivedListeners.push(fn);\n\n            if (node.attachEvent) {\n                node.attachEvent('on'+ eventType, fn);\n            }\n            else {\n                node['on'+ eventType] = fn;\n            }\n            return elem;\n        };\n\n        /*\\\n        * Element.off\n        [ method ]\n        **\n        * Remove handler function bind to an event of element\n        * @param eventType - Type of event\n        * @param handler - Function to be removed from event\n        \\*/\n        elproto.off = function(eventType, handler) {\n            var elem = this,\n                index;\n            if (elem.removed) {\n                return elem;\n            }\n\n            switch (eventType) {\n                case 'fc-dragstart':\n                    elem.undragstart(handler);\n                    return elem;\n                case 'fc-dragmove':\n                    elem.undragmove(handler);\n                    return elem;\n                case 'fc-dragend':\n                    elem.undragend(handler);\n                    return elem;\n                case 'fc-dbclick':\n                    elem.undbclick(handler);\n                    return elem;\n                case 'fc-click':\n                    elem.fcunclick(handler);\n                    return elem;\n            }\n\n            eventType = eventType.replace(/fc-/, '');\n\n            index = elem._actualListners.indexOf(handler);\n\n            if (index !== -1) {\n                handler = elem._derivedListeners[index];\n                elem._actualListners.splice(index, 1);\n                elem._derivedListeners.splice(index, 1);\n            }\n\n            if (elem.node.attachEvent) {\n                elem.node.detachEvent('on'+ eventType, handler);\n            }\n            else {\n                elem.node['on'+ eventType] = null;\n            }\n            return elem;\n        };\n\n        R._engine.getNode = function (el) {\n            var node = el.node || el[0].node;\n            return node.clipRect || node;\n        };\n        R._engine.getLastNode = function (el) {\n            var node = el.node || el[el.length - 1].node;\n            return node.clipRect || node;\n        };\n\n        R._engine.group = function(vml, id, group, overrideId) {\n            var el = R._g.doc.createElement(\"div\"),\n                className,\n                universalClassName = vml._HTMLClassName,\n                p = new Element(el, vml, group);\n\n            el.style.cssText = cssDot;\n            p._id = id || E;\n\n            if (id) {\n                if (overrideId) {\n                    className = el.className = 'raphael-group-' + id;\n                } else {\n                    className = el.className = 'raphael-group-' + p.id + '-' + id;\n                }\n            }\n\n            if (universalClassName) {\n                el.className = className ? className + ' ' + universalClassName : universalClassName;\n            }\n            (group || vml).canvas.appendChild(el);\n\n            p.type = 'group';\n            p.canvas = p.node;\n            p.transform = R._engine.group.transform;\n            p.top = null;\n            p.bottom = null;\n\n            return p;\n        };\n\n        R._engine.group.transform = function(tstr) {\n            if (tstr == null) {\n                return this._.transform;\n            }\n\n            var o = this,\n                s = o.node.style,\n                c = o.clip,\n                vbs = o.paper._viewBoxShift,\n                vbt = vbs ? \"s\" + [vbs.scale, vbs.scale] + \"-1-1t\" + [vbs.dx, vbs.dy] : E,\n                oldt,\n                matrix,\n                offset,\n                tx,\n                ty;\n\n            if (vbs) {\n                oldt = tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, o._.transform || E);\n            }\n            R._extractTransform(o, vbt + tstr);\n            matrix = o.matrix;\n            offset = matrix.offset();\n            tx = toFloat(offset[0]) || 0;\n            ty = toFloat(offset[1]) || 0;\n\n            s.left = tx + \"px\";\n            s.top = ty + \"px\";\n            s.zoom = (o._.tzoom = matrix.get(0)) + E;\n\n            /** @todo try perform relative group transform, thus avoiding\n             * transform on clipping */\n            c && (s.clip = R.format(\"rect({1}px {2}px {3}px {0}px)\", [\n                c[0] - tx, c[1] - ty, c[2] - tx, c[3] - ty\n            ]));\n\n            return o;\n        };\n\n        R._engine.path = function(vml, attrs, group) {\n            var el = createNode(\"shape\");\n            el.style.cssText = cssDot;\n            el.coordsize = zoom + S + zoom;\n            el.coordorigin = vml.coordorigin;\n\n            var p = new Element(el, vml, group);\n            p.type = attrs.type || \"path\";\n            p.path = [];\n            p.Path = E;\n\n            attrs.type && (delete attrs.type);\n            setFillAndStroke(p, attrs);\n            applyCustomAttributes(p, attrs);\n            return p;\n        };\n\n        R._engine.rect = function(vml, attrs, group) {\n            var path = R._rectPath(attrs.x, attrs.y, attrs.w, attrs.h, attrs.r);\n\n            attrs.path = path;\n            attrs.type = \"rect\";\n\n            var res = vml.path(attrs, group),\n            a = res.attrs;\n            res.X = a.x;\n            res.Y = a.y;\n            res.W = a.width;\n            res.H = a.height;\n            a.path = path;\n\n            return res;\n        };\n        R._engine.ellipse = function(vml, attrs, group) {\n            attrs.type = \"ellipse\";\n\n            var res = vml.path(attrs, group),\n                a = res.attrs;\n            res.X = a.x - a.rx;\n            res.Y = a.y - a.ry;\n            res.W = a.rx * 2;\n            res.H = a.ry * 2;\n\n            return res;\n        };\n        R._engine.circle = function(vml, attrs, group) {\n            attrs.type = \"circle\";\n\n            var res = vml.path(attrs, group),\n                a = res.attrs;\n\n            res.X = a.x - a.r;\n            res.Y = a.y - a.r;\n            res.W = res.H = a.r * 2;\n            return res;\n        };\n        function LoadRefImage (element, attrs) {\n            var src = attrs.src,\n                parent = element._.group,\n                node = element.node;\n            if (!element._.RefImg) {\n                element._.RefImg = new Image();\n            }\n            if (attrs.src === undefined) {\n                return;\n            }\n            element._.RefImg.src = src;\n        };\n        R._engine.image = function(vml, attrs, group) {\n            attrs.w || (attrs.w = attrs.width);\n            attrs.h || (attrs.h = attrs.height);\n            var path = R._rectPath(attrs.x, attrs.y, attrs.w, attrs.h);\n\n            attrs.path = path;\n            attrs.type = \"image\";\n            attrs.stroke = \"none\";\n            var res = vml.path(attrs, group),\n                a = res.attrs,\n                node = res.node,\n                fill = node.getElementsByTagName(fillString)[0];\n            !res._.RefImg && (res._.RefImg = new Image());\n            a.src = attrs.src;\n            res.X = a.x = attrs.x;\n            res.Y = a.y = attrs.y;\n            res.W = a.width = attrs.w;\n            res.H = a.height = attrs.h;\n\n            fill.parentNode == node && node.removeChild(fill);\n            fill.rotate = true;\n            fill.src = a.src;\n            fill.type = \"tile\";\n            res._.fillpos = [a.x, a.y];\n            res._.fillsize = [a.w, a.h];\n            node.appendChild(fill);\n            setCoords(res, 1, 1, 0, 0, 0);\n            return res;\n        };\n        R._engine.text = function(vml, attrs, group, css) {\n            var el = createNode(\"shape\"),\n                path = createNode(\"path\"),\n                o = createNode(\"textpath\");\n            x = attrs.x || 0;\n            y = attrs.y || 0;\n            text = attrs.text;\n            path.v = R.format(\"m{0},{1}l{2},{1}\", round(attrs.x * zoom), round(attrs.y * zoom), round(attrs.x * zoom) + 1);\n            path.textpathok = true;\n            o.string = Str(attrs.text).replace(/<br\\s*?\\/?>/ig, '\\n');\n            o.on = true;\n            el.style.cssText = cssDot;\n            el.coordsize = zoom + S + zoom;\n            el.coordorigin = \"0 0\";\n            var p = new Element(el, vml, group);\n\n            p.shape = el;\n            p.path = path;\n            p.textpath = o;\n            p.type = \"text\";\n            p.attrs.text = Str(attrs.text || E);\n            p.attrs.x = attrs.x;\n            p.attrs.y = attrs.y;\n            p.attrs.w = 1;\n            p.attrs.h = 1;\n            css && p.css && p.css(css, undefined, true);\n            setFillAndStroke(p, attrs);\n            applyCustomAttributes(p, attrs);\n\n            el.appendChild(o);\n            el.appendChild(path);\n\n            return p;\n        };\n\n        R._engine.setSize = function(width, height) {\n            var cs = this.canvas.style;\n            this.width = width;\n            this.height = height;\n            width == +width && (width += \"px\");\n            height == +height && (height += \"px\");\n            width && (cs.width = width);\n            height && (cs.height = height);\n            cs.clip = \"rect(0 \" + cs.width + \" \" + cs.height + \" 0)\";\n            if (this._viewBox) {\n                R._engine.setViewBox.apply(this, this._viewBox);\n            }\n            return this;\n        };\n        R._engine.setViewBox = function(x, y, w, h, fit) {\n            eve(\"raphael.setViewBox\", this, this._viewBox, [x, y, w, h, fit]);\n            var width = this.width,\n            height = this.height,\n            size = 1 / mmax(w / width, h / height),\n            H, W;\n            if (fit) {\n                H = height / h;\n                W = width / w;\n                if (w * H < width) {\n                    x -= (width - w * H) / 2 / H;\n                }\n                if (h * W < height) {\n                    y -= (height - h * W) / 2 / W;\n                }\n            }\n            this._viewBox = [x, y, w, h, !!fit];\n            this._viewBoxShift = {\n                dx: -x,\n                dy: -y,\n                scale: size\n            };\n            this.forEach(function(el) {\n                el.transform(\"...\");\n            });\n            return this;\n        };\n        var createNode;\n        R._engine.initWin = function(win) {\n            var doc = win.document;\n            doc.createStyleSheet().addRule(\".rvml\", \"behavior:url(#default#VML)\");\n            try {\n                !doc.namespaces.rvml && doc.namespaces.add(\"rvml\", \"urn:schemas-microsoft-com:vml\");\n                createNode = R._createNode = function(tagName, attrs) {\n                    var el = doc.createElement('<rvml:' + tagName + ' class=\"rvml\">'),\n                    prop;\n                    for (prop in attrs) {\n                        el[prop] = Str(attrs[prop]);\n                    }\n                    return el;\n                };\n            } catch (e) {\n                createNode = R._createNode = function(tagName, attrs) {\n                    var el = doc.createElement('<' + tagName + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"rvml\">'),\n                    prop;\n                    for (prop in attrs) {\n                        el[prop] = Str(attrs[prop]);\n                    }\n                    return el;\n                };\n            }\n        };\n        R._engine.initWin(R._g.win);\n        R._engine.create = function() {\n            var con = R._getContainer.apply(0, arguments),\n            container = con.container,\n            height = con.height,\n            s,\n            width = con.width,\n            x = con.x,\n            y = con.y;\n            if (!container) {\n                throw new Error(\"VML container not found.\");\n            }\n            var res = new R._Paper,\n            c = res.canvas = R._g.doc.createElement(\"div\"),\n            cs = c.style;\n            x = x || 0;\n            y = y || 0;\n            width = width || 512;\n            height = height || 342;\n            res.width = width;\n            res.height = height;\n            width == +width && (width += \"px\");\n            height == +height && (height += \"px\");\n            res.coordsize = zoom * 1e3 + S + zoom * 1e3;\n            res.coordorigin = \"0 0\";\n            c.id = \"raphael-paper-\" + res.id;\n            res.span = R._g.doc.createElement(\"span\");\n            res.span.style.cssText = \"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;\";\n            c.appendChild(res.span);\n            cs.cssText = R.format(\"top:0;left:0;width:{0};height:{1};display:inline-block;cursor:default;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden\", width, height);\n            if (container == 1) {\n                R._g.doc.body.appendChild(c);\n                cs.left = x + \"px\";\n                cs.top = y + \"px\";\n                cs.position = \"absolute\";\n            } else {\n                if (container.firstChild) {\n                    container.insertBefore(c, container.firstChild);\n                } else {\n                    container.appendChild(c);\n                }\n            }\n            res.renderfix = function() {\n            };\n            return res;\n        };\n        R.prototype.clear = function() {\n            var c;\n            eve(\"raphael.clear\", this);\n            while (c = this.bottom) {\n                c.remove();\n            }\n            this.canvas.innerHTML = E;\n            this.span = R._g.doc.createElement(\"span\");\n            this.span.style.cssText = \"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;\";\n            this.canvas.appendChild(this.span);\n            this.bottom = this.top = null;\n        };\n        R.prototype.remove = function() {\n            var i;\n            eve(\"raphael.remove\", this);\n            while (i = this.bottom) {\n                i.remove();\n            }\n            this.canvas.parentNode.removeChild(this.canvas);\n            for (i in this) {\n                this[i] = typeof this[i] == \"function\" ? R._removedFactory(i) : null;\n            }\n            return true;\n        };\n\n        R.prototype.setHTMLClassName = function (className) {\n            this._HTMLClassName = className;\n        };\n        // var setproto = R.st;\n        // for (var method in elproto)\n        //     if (elproto[has](method) && !setproto[has](method)) {\n        //         setproto[method] = (function(methodname) {\n        //             return function() {\n        //                 var arg = arguments;\n        //                 return this.forEach(function(el) {\n        //                     el[methodname].apply(el, arg);\n        //                 });\n        //             };\n        //         })(method);\n        //     }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./source/raphael.vml.js","/*jslint forin: true, regexp: true, todo: true, white: false, browser: true,\n sloppy: true, white: true, eqeq: false, newcap: true, nomen: true */\n\n/*global FusionCharts */\n\n/**\n * Raphael Canvas Extension\n */\n\nexport default function (R) {\n    if (R.canvas) {\n        var win = R._g.win,\n            doc = R._g.doc,\n            g = R._g,\n\n            STRING = 'string',\n            PX = 'px',\n\n            separator = /[, ]+/,\n\n            Str = win.String,\n            toInt = win.parseInt,\n            toFloat = win.parseFloat,\n\n            math = win.Math,\n            mmax = math.max,\n            mmin = math.min,\n            pi = math.PI,\n            mathFloor = math.floor,\n\n            eve = R.eve,\n            paperproto = R.fn,\n            elproto = R.el,\n            setproto = R.st,\n\n            clone = R.clone,\n            deg2rad = pi / 180,\n            rad2deg = 180 / pi,\n\n            DEFAULT_FILL = \"#fff\",\n            DEFAULT_STROKE = \"#000\",\n            has = \"hasOwnProperty\",\n            S = \" \",\n            /** @todo: detect touch */\n            supportsTouch = (('ontouchstart' in win) || (navigator.msMaxTouchPoints > 0)),\n            events = (\"click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel\").split(S),\n            noHandle = false,\n\n            $,\n            FauxNode,\n            Element,\n            draggable = [],\n            drag = [],\n            dragMove = function(e) {\n                var x = e.clientX,\n                y = e.clientY,\n                scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n                dragi,\n                j = drag.length;\n                while (j--) {\n                    dragi = drag[j];\n                    if (supportsTouch) {\n                        var i = e.touches.length,\n                        touch;\n                        while (i--) {\n                            touch = e.touches[i];\n                            if (touch.identifier == dragi.el._drag.id) {\n                                x = touch.clientX;\n                                y = touch.clientY;\n                                (e.originalEvent ? e.originalEvent : e).preventDefault();\n                                break;\n                            }\n                        }\n                    } else {\n                        e.preventDefault();\n                    }\n\n                    //var node = dragi.el.node;\n                        //o,\n                        //next = node.nextSibling,\n                        //parent = node.parentNode,\n                        //display = node.style.display;\n\n                    /** @todo: implement raphael.drag.over */\n\n                    //g.win.opera && parent.removeChild(node);\n                    //node.style.display = \"none\";\n                    //o = dragi.el.paper.getElementByPoint(x, y);\n                    //node.style.display = display;\n                    //g.win.opera && (next ? parent.insertBefore(node, next) : parent.appendChild(node));\n                    //o && eve(\"raphael.drag.over.\" + dragi.el.id, dragi.el, o);\n                    x += scrollX;\n                    y += scrollY;\n                    eve(\"raphael.drag.move.\" + dragi.el.id, dragi.move_scope || dragi.el, x - dragi.el._drag.x, y - dragi.el._drag.y, x, y, e);\n                }\n            },\n            dragUp = function(e) {\n                R.unmousemove(dragMove).unmouseup(dragUp);\n                var i = drag.length,\n                dragi;\n                while (i--) {\n                    dragi = drag[i];\n                    dragi.el._drag = {};\n                    dragi.onendHandler && eve(\"raphael.drag.end.\" + dragi.el.id, dragi.end_scope || dragi.start_scope || dragi.move_scope || dragi.el, e);\n                }\n                drag = [];\n            };\n\n        $ = R._createNode = function(el, attr) {\n            if (attr) {\n                if (typeof el === STRING) {\n                    el = $(el);\n                }\n                for (var key in attr)\n                    if (attr.hasOwnProperty(key)) {\n                        el.setAttribute(key, Str(attr[key]));\n                    }\n            } else {\n                el = doc.createElement(el);\n            }\n            return el;\n        };\n\n        R._getConnectedNodes = function (node) {\n            return {\n                above: [],\n                below: []\n            };\n        };\n\n        R._getTargetNode = function (coords) {\n            var x = coords[0],\n                y = coords[1];\n\n\n        };\n\n        R._containerEventHandler = function (event) {\n            event = event || win.event;\n\n            if (noHandle) {\n                return;\n            }\n\n            /** @todo: do not use offsetX and offsetY */\n            var x = event.offsetX,//mathFloor(event.pageX || (event.clientX + doc.body.scrollLeft + doc.documentElement.scrollLeft) || 0),\n                y = event.offsetY,//mathFloor(event.pageY || (event.clientY + doc.body.scrollTop + doc.documentElement.scrollTop) || 0),\n                type = event.type,\n                node = R._getTargetNode([x, y]);\n\n            //console.log(type + \":: x: \" + x + \" y: \" + y);\n\n            /*\n            if (typeof node.listeners[type] === 'function') {\n                node.listeners[type].call(node, e);\n            }*/\n\n        };\n\n\n\n\n\n        FauxNode =  function (parent) {\n            this.type = \"basic\";\n\n            this.owner = parent;\n\n            // Element reference needed to get attrs so that there is no need to\n            // maintain a redundant copy.\n            this._rElement = null;\n\n            // False if this element does not need mouse interactivity.\n            this.mouseInteractions = false;\n            this.matrix = null;\n\n            // An outline path that will be the outline of the shape or in case of\n            // text the rect that bounds the text.\n            this.outlinePath = null;\n\n            this.conf = {};\n        };\n\n        FauxNode.prototype = {\n\n            constructor: FauxNode,\n\n            /**\n             * This method does the complete rendering of the element, including\n             * (re)setting the bbox and image map.\n             *\n             * @returns {_L10.FauxNode.prototype}\n             */\n            render: function () {\n\n                var o = this;\n\n                o.draw();\n                o.setBBox();\n\n                return o;\n            },\n\n            /**\n             * Applies the transforms and clipping to the context and draws the\n             * element.\n             *\n             * @returns {undefined}\n             */\n            draw: function () {\n                var o = this,\n                    ctx = o.context,\n                    el = o._rElement,\n                    m = el.matrix,\n                    isClipped = o.isClipped,\n                    attrs = o.validateAttrs(),\n                    cr,\n                    end;\n\n\n                // After the validation the attributes need to be set to the element\n                // as validateAttrs works on a copy of the attrs object.\n                el.attrs = attrs;\n\n                ctx.save();\n\n                ctx.fillStyle = attrs.fill;\n                ctx.strokeStyle = attrs.stroke;\n                ctx.lineWidth = attrs['stroke-width'];\n\n                // Applying the clip before the context is transformed as is the case\n                // in case of SVG.\n                if (cr = attrs['clip-rect']) {\n                    cr = cr.split(\" \");\n                    ctx.rect(cr[0], cr[1], cr[2], cr[3]);\n                    ctx.clip();\n                    isClipped = o.isClipped = true;\n                }\n\n                o.applyTransform(m);\n\n                o.paint();\n\n                ctx.restore();\n            },\n\n            /**\n             * Parse the attributes provided to paint the element shape using the\n             * canvas context.\n             *\n             * Overridden by individual derived FauxNodes\n             */\n            paint: function () {\n            },\n\n            /**\n             * The redraw of the FauxNodes is to be handled by the CanvasObjectModel\n             * instance as it involves redrawing all the elements corresponsing to\n             * that canvas in the proper order.\n             */\n            redraw: function () {\n                this.COMInstance.redraw(this);\n            },\n\n            /**\n             * Clears the rectangle corresponding to the bounding box of the node.\n             */\n            clear: function () {\n                var o = this,\n                    ctx = o.context,\n                    bbox = o._bbox;\n\n                /** @todo: while clearing the stroke-width also needs to be accounted for. */\n                if (bbox) {\n                    ctx.clearRect(bbox.x, bbox.y, bbox.width, bbox.height);\n                }\n            },\n\n            /**\n             * Creates the area node in the image map so that mouse interactivity\n             * can be emulated using it.\n             */\n            addMouseInteractivity: function () {\n                var o = this,\n                    attrs = o._rElement.attrs,\n                    bbox = o._bbox,\n                    map = o.owner.wrapper._map,\n                    shape = (o.type === 'circle') ? 'circle' : 'rect',\n                    coords = (shape === 'circle') ? [attrs.cx, attrs.cy, attrs.r].join(\",\")\n                        : [bbox.x, bbox.y, bbox.x2, bbox.y2].join(\",\"),\n                    area,\n                    end;\n\n                    area = $('area', {shape: shape, coords: coords});\n                    if (map.firstChild) {\n                        map.insertBefore(area, map.firstChild);\n                    }\n                    else {\n                        map.appendChild(area);\n                    }\n\n                    /** @todo: should be put this check here */\n                    o._mouseArea = area;\n\n                    // Needed for paths.\n                    o.eventListeners = {};\n            },\n\n\n            /**\n             * Update the coords of the area node (image map) corresponding to the FauxNode\n             * after it has been modified by changing attributes.\n             */\n            updateMapAreaCoords: function () {\n                var o = this,\n                    oArea = o._mouseArea,\n                    bbox = o._bbox;\n\n                if (oArea) {\n                    //o.context.strokeRect(bbox.x, bbox.y, bbox.width, bbox.height);\n                    if (o instanceof CircleFauxNode) {\n                        var r = bbox.width / 2;\n                        oArea.setAttribute('coords',\n                            [bbox.x + r, bbox.y + r, r].join(\",\"));\n                    }\n                    else {\n                        oArea.setAttribute('coords',\n                            [bbox.x, bbox.y, bbox.x2, bbox.y2].join(\",\"));\n                    }\n                }\n            },\n\n            /**\n             * Applies the transform given the transformation matrix to the context.\n             *\n             * @param {type} matrix\n             * @param {type} bbox\n             * @param {type} dontsetbbox\n             *\n             * @returns {_L10.FauxNode.prototype.transformBBox.tbox}\n             */\n            applyTransform: function (m) {\n                var o = this,\n                    ctx = o.context,\n                    split;\n\n                if (m) {\n                    split = m.split();\n                    ctx.translate(split.dx, split.dy);\n                    !split.noRotation && ctx.rotate(deg2rad * split.rotate);\n                    ctx.scale(split.scalex, split.scaley);\n                }\n            },\n\n            /**\n             *\n             */\n            setBBox: function () {\n                var o = this,\n                    el = o._rElement,\n                    m = el.matrix,\n                    parent = o.owner,\n                    pm = parent.getTransformMatrix && parent.getTransformMatrix();\n\n                if (pm) {\n                    pm = pm.clone();\n                    pm.add(m);\n                    m = pm;\n                }\n\n                if (o.outlinePath) {\n                    o._bbox = R.pathBBox(R.transformPath(o.outlinePath, m.toTransformString()).toString());\n                }\n                else {\n                    o.setShapeBBox(m);\n                }\n\n                o._mouseArea && o.updateMapAreaCoords();\n            },\n\n            getBBox: function () {\n                return this._bbox;\n            },\n\n            drawPath: function (path) {\n                var o = this,\n                    ctx = o.context,\n                    len = (path && path.length) || 0,\n                    pp = PathParser,\n                    i = 0,\n                    command,\n                    x,\n                    y,\n                    end;\n\n                // The PathParser object has been borrowed from canvg. All 3rd party attributions implied.\n                pp.reset();\n                pp.setTokens(path);\n\n                //var bb = new BoundingBox();\n                if (ctx != null) {\n                    ctx.beginPath();\n                }\n\n                while (!pp.isEnd()) {\n                    pp.nextCommand();\n                    switch (pp.command) {\n                        case 'M':\n                        case 'm':\n                            var p = pp.getAsCurrentPoint();\n                            pp.addMarker(p);\n                            //bb.addPoint(p.x, p.y);\n                            if (ctx != null) {\n                                ctx.moveTo(p.x, p.y);\n                            }\n                            pp.start = pp.current;\n                            while (!pp.isCommandOrEnd()) {\n                                var p = pp.getAsCurrentPoint();\n                                pp.addMarker(p, pp.start);\n                                //bb.addPoint(p.x, p.y);\n                                if (ctx != null) {\n                                    ctx.lineTo(p.x, p.y);\n                                }\n                            }\n                            break;\n                        case 'L':\n                        case 'l':\n                            while (!pp.isCommandOrEnd()) {\n                                var c = pp.current;\n                                var p = pp.getAsCurrentPoint();\n                                pp.addMarker(p, c);\n                                //bb.addPoint(p.x, p.y);\n                                if (ctx != null) {\n                                    ctx.lineTo(p.x, p.y);\n                                }\n                            }\n                            break;\n                        case 'H':\n                        case 'h':\n                            while (!pp.isCommandOrEnd()) {\n                                var newP = new Point((pp.isRelativeCommand() ? pp.current.x : 0) + pp.getScalar(), pp.current.y);\n                                pp.addMarker(newP, pp.current);\n                                pp.current = newP;\n                                //bb.addPoint(pp.current.x, pp.current.y);\n                                if (ctx != null) {\n                                    ctx.lineTo(pp.current.x, pp.current.y);\n                                }\n                            }\n                            break;\n                        case 'V':\n                        case 'v':\n                            while (!pp.isCommandOrEnd()) {\n                                var newP = new Point(pp.current.x, (pp.isRelativeCommand() ? pp.current.y : 0) + pp.getScalar());\n                                pp.addMarker(newP, pp.current);\n                                pp.current = newP;\n                                //bb.addPoint(pp.current.x, pp.current.y);\n                                if (ctx != null) {\n                                    ctx.lineTo(pp.current.x, pp.current.y);\n                                }\n                            }\n                            break;\n                        case 'C':\n                        case 'c':\n                            while (!pp.isCommandOrEnd()) {\n                                var curr = pp.current;\n                                var p1 = pp.getPoint();\n                                var cntrl = pp.getAsControlPoint();\n                                var cp = pp.getAsCurrentPoint();\n                                pp.addMarker(cp, cntrl, p1);\n                                //bb.addBezierCurve(curr.x, curr.y, p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\n                                if (ctx != null) {\n                                    ctx.bezierCurveTo(p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\n                                }\n                            }\n                            break;\n                        case 'S':\n                        case 's':\n                            while (!pp.isCommandOrEnd()) {\n                                var curr = pp.current;\n                                var p1 = pp.getReflectedControlPoint();\n                                var cntrl = pp.getAsControlPoint();\n                                var cp = pp.getAsCurrentPoint();\n                                pp.addMarker(cp, cntrl, p1);\n                                //bb.addBezierCurve(curr.x, curr.y, p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\n                                if (ctx != null) {\n                                    ctx.bezierCurveTo(p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\n                                }\n                            }\n                            break;\n                        case 'Q':\n                        case 'q':\n                            while (!pp.isCommandOrEnd()) {\n                                var curr = pp.current;\n                                var cntrl = pp.getAsControlPoint();\n                                var cp = pp.getAsCurrentPoint();\n                                pp.addMarker(cp, cntrl, cntrl);\n                                //bb.addQuadraticCurve(curr.x, curr.y, cntrl.x, cntrl.y, cp.x, cp.y);\n                                if (ctx != null) ctx.quadraticCurveTo(cntrl.x, cntrl.y, cp.x, cp.y);\n                            }\n                            break;\n                        case 'T':\n                        case 't':\n                            while (!pp.isCommandOrEnd()) {\n                                var curr = pp.current;\n                                var cntrl = pp.getReflectedControlPoint();\n                                pp.control = cntrl;\n                                var cp = pp.getAsCurrentPoint();\n                                pp.addMarker(cp, cntrl, cntrl);\n                                //bb.addQuadraticCurve(curr.x, curr.y, cntrl.x, cntrl.y, cp.x, cp.y);\n                                if (ctx != null) ctx.quadraticCurveTo(cntrl.x, cntrl.y, cp.x, cp.y);\n                            }\n                            break;\n                        case 'A':\n                        case 'a':\n                            while (!pp.isCommandOrEnd()) {\n                                var curr = pp.current;\n                                var rx = pp.getScalar();\n                                var ry = pp.getScalar();\n                                var xAxisRotation = pp.getScalar() * (Math.PI / 180.0);\n                                var largeArcFlag = pp.getScalar();\n                                var sweepFlag = pp.getScalar();\n                                var cp = pp.getAsCurrentPoint();\n\n                                // Conversion from endpoint to center parameterization\n                                // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n                                // x1', y1'\n                                var currp = new Point(\n                                    Math.cos(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.sin(xAxisRotation) * (curr.y - cp.y) / 2.0,\n                                    -Math.sin(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.cos(xAxisRotation) * (curr.y - cp.y) / 2.0\n                                );\n                                // adjust radii\n                                var l = Math.pow(currp.x,2)/Math.pow(rx,2)+Math.pow(currp.y,2)/Math.pow(ry,2);\n                                if (l > 1) {\n                                    rx *= Math.sqrt(l);\n                                    ry *= Math.sqrt(l);\n                                }\n                                // cx', cy'\n                                var s = (largeArcFlag == sweepFlag ? -1 : 1) * Math.sqrt(\n                                    ((Math.pow(rx,2)*Math.pow(ry,2))-(Math.pow(rx,2)*Math.pow(currp.y,2))-(Math.pow(ry,2)*Math.pow(currp.x,2))) /\n                                    (Math.pow(rx,2)*Math.pow(currp.y,2)+Math.pow(ry,2)*Math.pow(currp.x,2))\n                                );\n                                if (isNaN(s)) s = 0;\n                                var cpp = new Point(s * rx * currp.y / ry, s * -ry * currp.x / rx);\n                                // cx, cy\n                                var centp = new Point(\n                                    (curr.x + cp.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y,\n                                    (curr.y + cp.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y\n                                );\n                                // vector magnitude\n                                var m = function(v) { return Math.sqrt(Math.pow(v[0],2) + Math.pow(v[1],2)); }\n                                // ratio between two vectors\n                                var r = function(u, v) { return (u[0]*v[0]+u[1]*v[1]) / (m(u)*m(v)) }\n                                // angle between two vectors\n                                var a = function(u, v) { return (u[0]*v[1] < u[1]*v[0] ? -1 : 1) * Math.acos(r(u,v)); }\n                                // initial angle\n                                var a1 = a([1,0], [(currp.x-cpp.x)/rx,(currp.y-cpp.y)/ry]);\n                                // angle delta\n                                var u = [(currp.x-cpp.x)/rx,(currp.y-cpp.y)/ry];\n                                var v = [(-currp.x-cpp.x)/rx,(-currp.y-cpp.y)/ry];\n                                var ad = a(u, v);\n                                if (r(u,v) <= -1) ad = Math.PI;\n                                if (r(u,v) >= 1) ad = 0;\n\n                                // for markers\n                                var dir = 1 - sweepFlag ? 1.0 : -1.0;\n                                var ah = a1 + dir * (ad / 2.0);\n                                var halfWay = new Point(\n                                    centp.x + rx * Math.cos(ah),\n                                    centp.y + ry * Math.sin(ah)\n                                );\n                                pp.addMarkerAngle(halfWay, ah - dir * Math.PI / 2);\n                                pp.addMarkerAngle(cp, ah - dir * Math.PI);\n\n                                //bb.addPoint(cp.x, cp.y); // TODO: this is too naive, make it better\n                                if (ctx != null) {\n                                    var r = rx > ry ? rx : ry;\n                                    var sx = rx > ry ? 1 : rx / ry;\n                                    var sy = rx > ry ? ry / rx : 1;\n\n                                    ctx.translate(centp.x, centp.y);\n                                    ctx.rotate(xAxisRotation);\n                                    ctx.scale(sx, sy);\n                                    ctx.arc(0, 0, r, a1, a1 + ad, 1 - sweepFlag);\n                                    ctx.scale(1/sx, 1/sy);\n                                    ctx.rotate(-xAxisRotation);\n                                    ctx.translate(-centp.x, -centp.y);\n                                }\n                            }\n                            break;\n                        case 'Z':\n                        case 'z':\n                            if (ctx != null) ctx.closePath();\n                            pp.current = pp.start;\n                    }\n                }\n\n                o.outlinePath = path;\n\n                return o;\n            },\n\n            /**\n             * Methods to add and remove event listeners emulating the DOM of\n             * standard browsers (and also the non-standard one).\n             */\n            addEventListener: function () {\n                var o = this,\n                    args = arguments,\n                    eventName = args && args[0],\n                    handler = args && args[1],\n                    area,\n                    checkPathHandler,\n                    end;\n\n                if (!o._mouseArea) {\n                    o.addMouseInteractivity();\n                }\n\n                area = o._mouseArea;\n\n                if (typeof eventName === 'string' && typeof handler === 'function') {\n                    /*\n                    * If the shape has an associated path then we need to check if\n                    * the mouse is within the co-ordinates of the path.\n                    */\n                    if (o._path) {\n\n                        /*\n                        * If the event being listened to is mouseover, mouseout or\n                        * mousemove then the mouse position has to be constantly\n                        * monitored and the event handler called explicitly when\n                        * appropriate.\n                        */\n                        if (eventName === 'mouseover' || eventName === 'mouseout' || eventName === 'mousemove') {\n\n                            if (!o._mousemoveAdded) {\n                                var startListening = (function (node) {\n\n                                    var isInside = false,\n                                        isOutside = true,\n                                        transition = false;\n\n                                    return function (event) {\n                                        /** @todo: replace layerX and layerY with\n                                         * standard ways of determining mouse position.\n                                         */\n                                        var x = event.layerX,\n                                            y = event.layerY;\n\n                                        transition = false;\n                                        /*\n                                        * Check if the current position of the mouse\n                                        * pointer lies within the path or not.\n                                        */\n                                        if (R.isPointInsidePath(node._transformPath, x, y)) {\n                                        /*\n                                        * @todo: fix isPointInsidePath to return the\n                                        * proper result when the mouse pointer is on\n                                        * the same horizontal/vertical lines as one\n                                        * of the vertices of the path.\n                                        */\n                                            isInside = true;\n                                            if (isOutside) {\n                                                isOutside = false;\n                                                transition = true;\n                                            }\n                                        }\n                                        else {\n                                            isOutside = true;\n                                            if (isInside) {\n                                                isInside = false;\n                                                transition = true;\n                                            }\n                                        }\n\n                                        // Based on the state of the flags, fire the\n                                        // appropriate event handlers.\n                                        if (isOutside && transition && node.eventListeners['mouseout']) {\n                                            node.eventListeners['mouseout'].apply(this, arguments);\n                                        }\n                                        if (isInside) {\n                                            if (transition && node.eventListeners['mouseover']) {\n                                                node.eventListeners['mouseover'].apply(this, arguments);\n                                            }\n                                            if (node.eventListeners['mousemove']) {\n                                                node.eventListeners['mousemove'].apply(this, arguments);\n                                            }\n                                        }\n                                    };\n                                })(o);\n\n                                area.addEventListener('mousemove', startListening, false);\n                                o._mousemoveAdded = true;\n                            }\n\n                            o.eventListeners[eventName] = handler;\n                        }\n                        else {\n                            var checkPathHandler = (function (node, handler) {\n                                return function (event) {\n                                    if (R.isPointInsidePath(node._path, event.layerX, event.layerY)) {\n                                        handler.apply(this, arguments);\n                                    }\n                                };\n                            }(o, handler));\n\n                            area.addEventListener(eventName, checkPathHandler, false);\n                        }\n                    }\n                    else {\n                        area.addEventListener(eventName, handler, false);\n                    }\n                }\n            },\n\n            removeEventListener: function () {\n                var o = this,\n                    args = arguments,\n                    eventName = args && args[0],\n                    handler = args && args[1],\n                    area,\n                    end;\n\n                if (!o._mouseArea) {\n                    return;\n                }\n                area = o._mouseArea;\n\n                if (typeof eventName === 'string' && typeof handler === 'function') {\n                    area.removeEventListener(eventName, handler);\n                }\n            },\n\n            attachEvent: function () {\n            },\n\n            detachEvent: function () {\n            },\n\n            validateAttrs: function (attrs) {\n\n                var o = this,\n                    elAttrs = clone(o._rElement.attrs),\n                    attr,\n                    val;\n\n                if (attrs === null) {\n                    if (o._isValid) {\n                        return elAttrs;\n                    }\n                    else {\n                        o._isValid = true;\n                    }\n                }\n\n                attrs = attrs || elAttrs;\n\n                for (attr in attrs) {\n                    val = attrs[attr];\n\n                    switch (attr) {\n\n                        default:\n                            continue;\n                    }\n                }\n\n                return attrs;\n            },\n\n            attrs: function () {\n            }\n        };\n\n\n\n\n        var NodeListItem = function (node) {\n                this.node = node;\n                this.next = null;\n                this.prev = null;\n            },\n\n            NodeList = function () {\n                this.top = null;\n                this.bottom = null;\n            };\n\n        NodeList.prototype = {\n\n            constructor: NodeList,\n\n            add: function (node) {\n\n                node = new NodeListItem(node);\n\n                if (!this.bottom) {\n                    this.bottom = node;\n                }\n                if (this.top) {\n                    this.top.next = node;\n                }\n                node.next = null;\n                node.prev = this.top;\n\n                this.top = node;\n            },\n\n            addList: function (list) {\n                if (!this.bottom) {\n                    this.bottom = list.bottom;\n                }\n\n                if (this.top) {\n                    this.top.next = list.bottom;\n                    list.bottom.prev = this.top;\n                }\n\n                this.top = list.top;\n            },\n\n            toFront: function (node) {\n                if (this.top === node) {\n                    return false;\n                }\n\n                if (this.bottom === node) {\n                    this.bottom = node.next;\n                }\n\n                //var map = node.node.canvas._map,\n                //    area = node.node._mouseArea;\n\n                node.prev && (node.prev.next = node.next);\n                node.next && (node.next.prev = node.prev);\n\n                this.top.next = node;\n                node.prev = this.top;\n                node.next = null;\n\n                this.top = node;\n\n                /*if (map.firstChild) {\n                    map.insertBefore(area, map.firstChild);\n                }\n                else {\n                    map.appendChild(area);\n                }\n\n                node.redraw();*/\n            },\n\n            toBack: function (node) {\n                if (this.bottom === node) {\n                    return false;\n                }\n\n                if (this.top === node) {\n                    this.top = node.prev;\n                }\n\n                //var map = node.canvas._map,\n                //    area = node._mouseArea;\n\n                node.prev && (node.prev.next = node.next);\n                node.next && (node.next.prev = node.prev);\n\n                this.bottom.prev = node;\n                node.prev = null;\n                node.next = this.bottom;\n\n                this.bottom = node;\n\n                /*map.appendChild(area);\n\n                node.redraw();*/\n            },\n\n            insertBefore: function () {\n            },\n\n            insertAfter: function () {\n            },\n\n            each: function (fn, args) {\n                var item = this.bottom;\n\n                while (item) {\n                    fn.apply(item.node, args);\n                    item = item.next;\n                }\n            },\n\n            iterate: function (fn, args) {\n                var item = this.bottom,\n                    retVal = true;\n\n                while (item) {\n                    retVal = fn.apply(item.node, args);\n\n                    if (retVal === false) {\n                        break;\n                    }\n\n                    item = item.next;\n                }\n            },\n\n            dispose: function () {\n\n                this.each(function () {\n                    this.node.dispose && this.node.dispose();\n                });\n\n                this.top = null;\n                this.bottom = null;\n            },\n        };\n\n        /**\n         *\n            ncowner, a NodeCollection that corresponds to the collection of which\n            the layer neing created  is a part\n\n            above, a NodeCollection iterator, that indicated the collection the layer has to be rendered. If\n            not provided then this is the first layer of ncowner.\n        */\n        var CanvasLayer = function (ncowner, canvas) {\n            this.items = new NodeList();\n\n            this.owner = ncowner;\n            //this.above = above;\n            this.element = null;\n\n            if (canvas) {\n                this.element = canvas;\n            }\n            else {\n                this.init();\n            }\n        };\n\n        CanvasLayer.prototype = {\n            constructor: CanvasLayer,\n\n            appendChild: function () {\n                var o = this,\n                    ownerWrapper = o.owner.wrapper,\n                    ele = this.element;\n\n                if (ownerWrapper._image) {\n                    ownerWrapper.insertBefore(ele, ownerWrapper._image);\n                }\n                else {\n                    ownerWrapper.appendChild(ele);\n                }\n            },\n\n            insertBefore: function () {\n\n            },\n\n            insertAfter: function () {\n\n            },\n\n            init: function () {\n                this.element = $(\"canvas\");\n                // CHECKPOINT: width and height in %?\n                $(this.element, {\n                    width: this.owner.wrapper.offsetWidth,\n                    height: this.owner.wrapper.offsetHeight\n                });\n\n                this.element.style.cssText = \"position:absolute;left:0;top:0;\";\n\n                this.appendChild();\n            },\n\n            getCanvas: function () {\n                return this.element;\n            },\n\n            getContext: function () {\n                return this.element.getContext('2d');\n            },\n\n            addToLayer: function (node) {\n                this.items.add(node);\n            },\n\n            mergeWithLayerOnTop: function (layerObj) {\n                this.items.addList(layerObj.items);\n                layerObj.dispose(true);\n            },\n\n            mergeWithLayerOnBottom: function (layerObj) {\n                layerObj.items.addList(this.items);\n                this.items = layerObj.items;\n                layerObj.dispose(true);\n            },\n\n            dispose: function (softDispose) {\n\n                if (!softDispose) {\n                    this.items.each(function () {\n                        this.dispose();\n                    });\n                }\n\n                this.items = null;\n                this.owner = null;\n\n                this.element.parentNode.removeChild(this.element);\n                this.element = null;\n            }\n        };\n\n        var NodeCollection = function (parent, wrapper, canvas) {\n\n            this.nodeItems =  new NodeList();\n            this.collectionItems = new NodeList();\n            this.layerItems = new NodeList();\n\n            this.owner = this.parent = parent;\n            this.layerOnTop = null;\n\n            this.currentLayer = null;\n            this.baseLayer = null;\n\n            if (wrapper) {\n                this.wrapper = wrapper;\n                this.currentLayer = this.baseLayer = new CanvasLayer(this, canvas);\n            }\n            else {\n                this.init();\n            }\n        };\n\n        NodeCollection.prototype = {\n            constructor: NodeCollection,\n\n            init: function () {\n\n                var o = this,\n                    parent = o.parent,\n                    imageMap = parent.wrapper._image,\n                    wrapper = $(\"div\");\n\n                // Hacky but need a refernce to the image map to addEventListeners.\n                wrapper.style.cssText = \"width:100%;height:100%;position:absolute;left:0;top:0;\";\n\n                wrapper._map = parent.wrapper._map;\n\n                if (imageMap) {\n                    parent.wrapper.insertBefore(wrapper, imageMap);\n                }\n                else {\n                    parent.wrapper.appendChild(wrapper);\n                }\n\n                o.wrapper = wrapper;\n                o.currentLayer = o.baseLayer = new CanvasLayer(o);\n            },\n\n            getCurrentContext: function () {\n                return this.currentLayer.getContext();\n            },\n\n            setLayerOnTop: function (layerObj) {\n                this.layerOnTop = layerObj;\n            },\n\n            getCurrentCanvas: function () {\n                return this.currentLayer.getCanvas();\n            },\n\n            addNode: function (node) {\n                this.nodeItems.add(node);\n\n                if (node.type === \"group\") {\n                    this.addCollection(node);\n                }\n                else {\n                    this.currentLayer.addToLayer(node);\n                }\n            },\n\n            addCollection: function (collectionNode) {\n\n                collectionNode = collectionNode || new NodeCollection(this);\n\n                this.collectionItems.add(collectionNode);\n                this.currentLayer = new CanvasLayer(this);\n                this.layerItems.add(this.currentLayer);\n                collectionNode.setLayerOnTop(this.currentLayer);\n            },\n\n            dispose: function () {\n                this.nodeItems.dispose();\n                this.collectionItems.dispose();\n                this.layerItems.dispose();\n                this.owner = this.parent = null;\n\n                this.ownerLayer = null;\n                this.currentLayer = null;\n                this.baseLayer = null;\n            }\n        };\n\n        /**\n         * The CanvasObjectModel will be a layer of abstraction above the individual\n         * FauxNodes created to emulate the DOM in case of canvas rendering.\n         * The engine will be the point of contact for Raphael._engine that will be\n         * the direct consumer of the FauxNodes.\n         */\n        var CanvasObjectModel = function (cnvs, wrpr, width, height) {\n\n            var com = this,\n                root = new NodeCollection(null, wrpr, cnvs);\n\n            //root.set\n\n            com.width = width;\n            com.height = height;\n\n            com.createNode = function (type, parent) {\n\n                parent = parent || root;\n\n                var node,\n                    nodeItems = parent.nodeItems,\n                    layer = parent.currentLayer,\n                    canvasEle = layer.getCanvas();\n\n                switch (type) {\n                    case 'rect':\n                        node = new RectFauxNode(parent);\n                        break;\n\n                    case 'circle':\n                        node = new CircleFauxNode(parent);\n                        break;\n\n                    case 'path':\n                        node = new PathFauxNode(parent);\n                        break;\n\n                    case 'text':\n                        node = new TextFauxNode(parent);\n                        break;\n\n                    case 'group':\n                        node = new GroupFauxNode(parent);\n                        parent.addCollection(node);\n                        break;\n\n                    default:\n                        node = new FauxNode(canvasEle);\n                }\n\n                node.COMInstance = this;\n                nodeItems.add(node);\n                layer.addToLayer(node);\n\n                return node;\n            };\n\n            /**\n             * This method is needed to redraw a node. Redraw is to be handled at the\n             * COM level as redrawing one node needs all the (connected) nodes to be\n             * redrawn in the right order.\n             *\n             * @param {type} node The node that needs to be redrawn.\n             *\n             * @returns {undefined}\n             */\n            com.redraw = function (node) {\n\n                // Check if node is a group or a shape.\n                var nodeList,\n                    childNode,\n                    layer;\n\n                if (node.type === \"group\") {\n                    nodeList = node.nodeItems;\n                    node.render();\n                }\n                else {\n\n                    layer = node.layer;\n                    nodeList = layer.items;\n                    childNode = nodeList.bottom;\n\n                    // Clear the canvas.\n                    layer.element.width = layer.element.width;\n\n                    while (childNode) {\n                        fNode = childNode.node;\n                        (fNode.type !== \"group\") && fNode.render();\n                        childNode = childNode.next;\n                    }\n\n                }\n\n            };\n\n            com.insertBefore = function (node) {\n\n            };\n\n            com.insertAfter = function (node) {\n\n            };\n\n            com.removeNode = function (node) {\n\n            };\n\n            com.refreshNode = function (node) {\n\n            };\n\n            com.refreshAll = function () {\n\n            };\n        };\n\n\n\n        Point = function(x, y) {\n            this.x = x;\n            this.y = y;\n        }\n\n        Point.prototype.angleTo = function(p) {\n            return Math.atan2(p.y - this.y, p.x - this.x);\n        }\n\n        Point.prototype.applyTransform = function(v) {\n            var xp = this.x * v[0] + this.y * v[2] + v[4];\n            var yp = this.x * v[1] + this.y * v[3] + v[5];\n            this.x = xp;\n            this.y = yp;\n        }\n\n        PathParser = new (function() {\n\n            this.tokens = null;\n\n            this.setTokens = function (d) {\n                if (typeof d === 'string') {\n                    this.tokens = d.split(' ');\n                }\n                else {\n                    this.tokens = d;\n                }\n            };\n\n            this.reset = function() {\n                this.i = -1;\n                this.command = '';\n                this.previousCommand = '';\n                this.start = new Point(0, 0);\n                this.control = new Point(0, 0);\n                this.current = new Point(0, 0);\n                this.points = [];\n                this.angles = [];\n            };\n\n            this.isEnd = function() {\n                return this.i >= this.tokens.length - 1;\n            }\n\n            this.isCommandOrEnd = function() {\n                if (this.isEnd()) {\n                    return true;\n                }\n\n                return this.tokens[this.i + 1].toString().match(/^[A-Za-z]$/) != null;\n            }\n\n            this.isRelativeCommand = function() {\n                switch(this.command)\n                {\n                    case 'm':\n                    case 'l':\n                    case 'h':\n                    case 'v':\n                    case 'c':\n                    case 's':\n                    case 'q':\n                    case 't':\n                    case 'a':\n                    case 'z':\n                        return true;\n                        break;\n                }\n                return false;\n            }\n\n            this.getToken = function() {\n                this.i++;\n                return this.tokens[this.i];\n            }\n\n            this.getScalar = function() {\n                return parseFloat(this.getToken());\n            }\n\n            this.nextCommand = function() {\n                this.previousCommand = this.command;\n                this.command = this.getToken();\n            }\n\n            this.getPoint = function() {\n                var p = new Point(this.getScalar(), this.getScalar());\n                return this.makeAbsolute(p);\n            }\n\n            this.getAsControlPoint = function() {\n                var p = this.getPoint();\n                this.control = p;\n                return p;\n            }\n\n            this.getAsCurrentPoint = function() {\n                var p = this.getPoint();\n                this.current = p;\n                return p;\n            }\n\n            this.getReflectedControlPoint = function() {\n                if (this.previousCommand.toLowerCase() != 'c' &&\n                    this.previousCommand.toLowerCase() != 's' &&\n                    this.previousCommand.toLowerCase() != 'q' &&\n                    this.previousCommand.toLowerCase() != 't' ){\n                    return this.current;\n                }\n\n                // reflect point\n                var p = new Point(2 * this.current.x - this.control.x, 2 * this.current.y - this.control.y);\n                return p;\n            }\n\n            this.makeAbsolute = function(p) {\n                if (this.isRelativeCommand()) {\n                    p.x += this.current.x;\n                    p.y += this.current.y;\n                }\n                return p;\n            }\n\n            this.addMarker = function(p, from, priorTo) {\n                // if the last angle isn't filled in because we didn't have this point yet ...\n                if (priorTo != null && this.angles.length > 0 && this.angles[this.angles.length-1] == null) {\n                    this.angles[this.angles.length-1] = this.points[this.points.length-1].angleTo(priorTo);\n                }\n                this.addMarkerAngle(p, from == null ? null : from.angleTo(p));\n            }\n\n            this.addMarkerAngle = function(p, a) {\n                this.points.push(p);\n                this.angles.push(a);\n            }\n\n            this.getMarkerPoints = function() {\n                return this.points;\n            }\n\n            this.getMarkerAngles = function() {\n                for (var i=0; i<this.angles.length; i++) {\n                    if (this.angles[i] == null) {\n                        for (var j=i+1; j<this.angles.length; j++) {\n                            if (this.angles[j] != null) {\n                                this.angles[i] = this.angles[j];\n                                break;\n                            }\n                        }\n                    }\n                }\n                return this.angles;\n            }\n        })();\n\n\n\n\n        /**\n         * The FauxNode is the adapter written to give DOM node like handling to the\n         * shapes that are create using canvas object model.\n         */\n\n        RectFauxNode = function (parentObj) {\n            this.type = \"rect\";\n            this._isValid = false;\n\n            this.parent = this.owner = parentObj;\n            this.context = parentObj.getCurrentContext();\n            this.layer = parentObj.currentLayer;\n        };\n\n        RectFauxNode.prototype = R.extend(new FauxNode(), {\n\n            constructor: RectFauxNode,\n\n            paint: function () {\n\n                var o = this,\n                    ctx = o.context,\n                    // CHECKPOINT 3. Rename validateAttrs to getValidAttrs?\n                    attrs = o.validateAttrs(),\n                    x = attrs.x,\n                    y = attrs.y,\n                    w = attrs.width,\n                    h = attrs.height,\n                    r = attrs.r,\n                    /** @todo: provide support for rx, ry */\n                    rx = r || attrs.rx,\n                    ry = r || attrs.ry;\n\n                if (attrs.r) {\n                    path = [\"M\", x + rx, y, \"L\", x + w - rx, y]\n                        .concat([\"A\", rx, ry, 0, 0, 1,  x + w, y + ry])\n                        .concat([\"L\", x + w, y + h - ry])\n                        .concat([\"A\", rx, ry, 0, 0, 1, x + w - rx, y + h])\n                        .concat([\"L\", x + rx, y + h])\n                        .concat([\"A\", rx, ry, 0, 0, 1, x, y + h - ry])\n                        .concat([\"L\", x, y + ry])\n                        .concat([\"A\", rx, ry, 0, 0, 1, x + rx, y, \"Z\"]);\n                }\n                else {\n                    path = [\"M\", x, y, \"H\", x + w, \"V\", y + h, \"H\", x, \"V\", y, \"Z\"];\n                }\n\n                o.drawPath(path);\n\n                if (attrs['stroke-width']) {\n                    var strokeAlpha = attrs['stroke-opacity'] === undefined ? attrs['opacity'] : attrs['stroke-opacity'];\n                    if (strokeAlpha !== undefined) {\n                        ctx.globalAlpha = strokeAlpha;\n                    }\n                    ctx.stroke();\n                }\n                var fillAlpha = attrs['fill-opacity'] === undefined ? attrs['opacity'] : attrs['fill-opacity'];\n                if (fillAlpha !== undefined) {\n                    ctx.globalAlpha = fillAlpha;\n                }\n                ctx.fill();\n\n                return;\n            },\n\n            validateAttrs: function (attrs) {\n                var o = this,\n                    elAttrs = clone(o._rElement.attrs),\n                    attr,\n                    val;\n\n\n                if (attrs === null) {\n                    if (o._isValid) {\n                        return elAttrs;\n                    }\n                    else {\n                        o._isValid = true;\n                    }\n                }\n\n                attrs = attrs || elAttrs;\n\n                for (attr in attrs) {\n                    val = attrs[attr];\n\n                    switch (attr) {\n                        case \"r\":\n                            var w = elAttrs.width,\n                                h = elAttrs.height,\n                                maxR = mmin(w, h) / 2;\n\n                            if (val > maxR) {\n                                attrs.r = maxR;\n                            }\n\n                            if (val < 0) {\n                                attrs.r = 0;\n                            }\n                            break;\n\n                        case \"width\":\n                        case \"height\":\n                            if (val < 0) {\n                                attrs[attr] = 0;\n                            };\n                            break;\n\n                        default:\n                            continue;\n                    }\n                }\n\n                return attrs;\n            },\n\n            setShapeBBox: function (m) {\n                var o = this,\n                    el = o._rElement,\n                    attrs = el.attrs,\n                    sX = m.get(0),\n                    sY = m.get(3),\n                    tX = m.get(4),\n                    tY = m.get(5),\n                    strokeW = attrs['stroke-width'];\n\n                o._bbox = {\n                    x: ((attrs.x * sX) + tX) - strokeW,\n                    y: ((attrs.y * sY) + tY) - strokeW,\n                    width: (attrs.width * sX) + (2 * strokeW),\n                    height: (attrs.height * sY) + (2 * strokeW),\n                };\n\n                o._bbox.x2 = o._bbox.x + o._bbox.width;\n                o._bbox.y2 = o._bbox.y + o._bbox.height;\n\n                o.X = o._bbox.x;\n                o.Y = o._bbox.y;\n                o.W = o._bbox.width;\n                o.H = o._bbox.height;\n            }\n        });\n\n        var CircleFauxNode = function (parentObj) {\n            this.type = \"circle\";\n            this._isValid = false;\n\n            this.parent = this.owner = parentObj;\n            this.context = parentObj.getCurrentContext();\n            this.layer = parentObj.currentLayer;\n        },\n\n        PathFauxNode = function (parentObj) {\n            this.type = \"path\";\n            this._isValid = false;\n\n            this.parent = this.owner = parentObj;\n            this.context = parentObj.getCurrentContext();\n            this.layer = parentObj.currentLayer;\n        },\n\n        TextFauxNode = function (parentObj) {\n            this.type = \"text\";\n            this._isValid = false;\n\n            this.parent = this.owner = parentObj;\n            this.context = parentObj.getCurrentContext();\n            this.layer = parentObj.currentLayer;\n        },\n\n        GroupFauxNode = function (parent, width, height) {\n\n            this.type = \"group\";\n\n            this.nodeItems =  new NodeList();\n            this.collectionItems = new NodeList();\n            this.layerItems = new NodeList();\n\n            this.owner = this.parent = parent;\n            this.layerOnTop = parent.currentLayer;\n\n            this.currentLayer = null;\n            this.baseLayer = null;\n\n            this.init();\n        };\n\n        CircleFauxNode.prototype = R.extend(new FauxNode(), {\n\n            constructor: CircleFauxNode,\n\n            paint: function () {\n                var o = this,\n                    ctx = o.context,\n                    attrs = o.validateAttrs(),\n                    x = attrs.cx,\n                    y = attrs.cy,\n                    r = attrs.r,\n                    /** @todo: provide support for rx, ry */\n                    rx = r || attrs.rx,\n                    ry = r || attrs.ry;\n\n                if (attrs.r) {\n\n                    o.drawPath([\"M\", x + r, y, \"A\", rx, ry, 0, 1, 0, x - r, y, \"A\", rx, ry, 0, 1, 0, x + r, y, \"Z\"]);\n\n                    if (attrs['stroke-width']) {\n                        var strokeAlpha = attrs['stroke-opacity'] === undefined ? attrs['opacity'] : attrs['stroke-opacity'];\n                        if (strokeAlpha !== undefined) {\n                            ctx.globalAlpha = strokeAlpha;\n                        }\n                        ctx.stroke();\n                    }\n                    var fillAlpha = attrs['fill-opacity'] === undefined ? attrs['opacity'] : attrs['fill-opacity'];\n                    if (fillAlpha !== undefined) {\n                        ctx.globalAlpha = fillAlpha;\n                    }\n                    ctx.fill();\n                }\n\n                return;\n            },\n\n            setShapeBBox: function (m) {\n                var o = this,\n                    el = o._rElement,\n                    attrs = el.attrs,\n                    sX = m.get(0),\n                    sY = m.get(3),\n                    tX = m.get(4),\n                    tY = m.get(5),\n                    strokeW = attrs['stroke-width'];\n\n                o._bbox = {\n                    x: tX + ((attrs.cx - attrs.r) * sX) - strokeW,\n                    y: tY + ((attrs.cy - attrs.r) * sY) - strokeW,\n                    width: 2 * (strokeW + (attrs.r * sX)),\n                    height: 2 * ((attrs.r * sY) + strokeW)\n                };\n\n                o._bbox.x2 = o._bbox.x + o._bbox.width;\n                o._bbox.y2 = o._bbox.y + o._bbox.height;\n\n                o.X = o._bbox.x;\n                o.Y = o._bbox.y;\n                o.W = o._bbox.width;\n                o.H = o._bbox.height;\n            }\n        });\n\n        PathFauxNode.prototype = R.extend(new FauxNode(), {\n\n            constructor: PathFauxNode,\n\n            paint: function () {\n                var o = this,\n                    el = o._rElement,\n                    attrs = el.attrs,\n                    path = el.attr('path'),\n                    m = el.matrix,\n                    ctx = o.context;\n\n                // 1. Get the path from the path attribute\n                // 2. Accept paths in different array formats.\n                // 3. Optimize as this can potentially be a huge pain-point.\n                // 4. Draw path mapping M,L,H,V etc to canvas APIs\n                o.drawPath(path);\n                o._transformPath = R.transformPath(path, m.toTransformString());\n\n                var strokeAlpha = attrs['stroke-opacity'] === undefined ? attrs['opacity'] : attrs['stroke-opacity'];\n                if (strokeAlpha !== undefined) {\n                    ctx.globalAlpha = strokeAlpha;\n                }\n                ctx.stroke();\n                var fillAlpha = attrs['fill-opacity'] === undefined ? attrs['opacity'] : attrs['fill-opacity'];\n                if (fillAlpha !== undefined) {\n                    ctx.globalAlpha = fillAlpha;\n                }\n                ctx.fill();\n\n                return;\n            }\n        });\n\n        TextFauxNode.prototype = R.extend(new FauxNode(), {\n\n            constructor: TextFauxNode,\n\n            paint: function () {\n                var o = this,\n                    el = o._rElement,\n                    attrs = el.attr(),\n                    text = attrs['text'],\n                    stroke = attrs['stroke'],\n                    valign = attrs['vertical-align'],\n                    halign = attrs['text-anchor'],\n                    x = attrs['x'],\n                    y = attrs['y'],\n                    m = el.matrix,\n                    ctx = o.context,\n                    path;\n\n                // apply the font styles, if any\n\n                // find the dimensions of the text using the given styles.\n                // All the dimensions should be present in the attrs user provided OR default.\n                var fontSize = attrs['font-size'] || 10,\n                    lineHeight = attrs['line-height'] || toInt(fontSize, 10) * 1.2,\n                    fontArr = [\"normal\", fontSize, attrs['font']];\n\n                // draw the text.\n                ctx.fillStyle = stroke;\n                ctx.font = fontArr.join(\" \");\n\n                if (text) {\n                    var texts = Str(text).split(/\\n|<br\\s*?\\/?>/ig),\n                        totalHeight = texts.length * lineHeight,\n                        totalWidth = -Infinity,\n                        startX = Infinity,\n                        startY,\n                        width,\n                        textX,\n                        textY;\n\n                    if (valign === \"top\") {\n                        startY = y + lineHeight;\n                    }\n                    else if (valign === \"middle\") {\n                        startY = y - (totalHeight / 2) + (lineHeight / 2);\n                    }\n                    else { // valign is bottom.\n                        startY = y - totalHeight + lineHeight;\n                    }\n\n                    for (var i = 0, ii = texts.length; i < ii; i += 1) {\n\n                        text = texts[i];\n                        textY = startY + (lineHeight * i);\n                        width = ctx.measureText(text).width;\n\n                        if (halign === \"start\") {\n                            textX = x;\n                        }\n                        else if (halign === \"middle\") {\n                            textX = x - (width / 2);\n                        }\n                        else {\n                            textX = x - width;\n                        }\n\n                        totalWidth = mmax(totalWidth, width);\n                        startX = mmin(startX, textX);\n\n                        ctx.fillText(text, textX, textY);\n                    }\n\n                    el._textdirty = false;\n                }\n\n                o.outlinePath = [\n                    \"M\",\n                    startX,\n                    startY - (lineHeight / 1.4),\n                    \"H\",\n                    startX + totalWidth,\n                    \"V\",\n                    startY - lineHeight + totalHeight,\n                    \"H\",\n                    startX,\n                    \"V\",\n                    startY - (lineHeight / 1.4)\n                ];\n\n                return;\n            }\n        });\n\n        GroupFauxNode.prototype = R.extend(R.extend(new FauxNode, NodeCollection.prototype), {\n\n            constructor: GroupFauxNode,\n\n            draw: function () {\n\n                // Clear the group canvas first.\n                this.layerItems.each(function () {\n                    this.element.width = this.element.width;\n                });\n\n                FauxNode.prototype.draw.apply(this, arguments);\n            },\n\n            /**\n             * This method does the complete rendering of the element, including\n             * (re)setting the bbox and image map.\n             *\n             * @returns {_L10.FauxNode.prototype}\n             */\n            render: function () {\n\n                var o = this;\n\n                o.draw();\n                o.setBBox();\n\n                return o;\n            },\n\n            paint: function () {\n                var o = this,\n                    list = o.nodeList,\n                    el = o._rElement,\n                    canvas = o.canvas,\n                    attrs = el.attrs,\n                    childNode = list.bottom;\n\n                /** @todo: Clean this up */\n                if (attrs.opacity !== undefined) {\n                    this.layerItems.each(function () {\n                        this.getContext().globalAlpha = attrs.opacity;\n                    });\n                }\n\n                while (childNode) {\n                    childNode.render();\n                    childNode = childNode.next;\n                }\n            },\n\n            setBBox: function () {\n\n            },\n\n            addMouseInteractivity: function () {\n            },\n\n            applyTransform: function (m) {\n                var o = this,\n                    parent = o.parent,\n                    parentMatrix = parent.getTransformMatrix && parent.getTransformMatrix();\n\n                // Parent is a group element with a transformation applied to it.\n                if (parentMatrix) {\n                    o.matrixApplied = parentMatrix.clone();\n                    o.matrixApplied.add(m.a, m.b, m.c, m.d, m.e, m.f);\n                }\n                else {\n                    o.matrixApplied = m;\n                }\n\n                this.layerItems.each(function () {\n                    FauxNode.prototype.applyTransform.apply(this, [o.matrixApplied]);\n                })\n            },\n\n            getTransformMatrix: function () {\n                return this.matrixApplied;\n            }\n        });\n\n        Element = function (node, paper, group) {\n            var o = this,\n                parent = group || paper;\n\n            o.node = o[0] = node;\n            node.raphael = true;\n            node.raphaelid = o.id = R._oid++;\n            node._rElement = o;\n\n            o.X = 0;\n            o.Y = 0;\n\n            o.attrs = o.attrs || {};\n            o.styles = o.styles || {};\n            o.followers = o.followers || [];\n\n            o.paper = paper;\n            o.com = parent.com;\n\n            o.ca = o.customAttributes = o.customAttributes ||\n                new paper._CustomAttributes();\n\n            o.matrix = R.matrix();\n            o._ = {\n                transform: [],\n                sx: 1,\n                sy: 1,\n                dx: 0,\n                dy: 0,\n                deg: 0\n            };\n\n            o.parent = parent;\n            !parent.bottom && (parent.bottom = o);\n\n            o.prev = parent.top || null;\n            parent.top && (parent.top.next = o);\n            parent.top = o;\n            o.next = null;\n        };\n\n        Element.prototype = elproto;\n        elproto.constructor = Element;\n\n        var\n            repaint = function (el, finalAttrs, positionChanged, dimensionChanged) {\n\n                var node = getNode(el),\n                    preC = R._getConnectedNodes(node),\n                    attrs = el.attrs,\n                    elAbove = preC.above,\n                    elBelow = preC.below,\n                    len,\n                    attr,\n                    i;\n\n            for (attr in finalAttrs) {\n                    attrs[attr] = finalAttrs[attr];\n                }\n\n                node.redraw();\n            },\n\n            setFillAndStroke = function (el, params) {\n\n                var attrs = el.attrs,\n                    node = el.node,\n                    finalAttrs = {},\n                    att,\n                    val,\n                    needsRepaint = false,\n                    positionChanged = false,\n                    dimensionChanged = false,\n                    i;\n\n                for (att in params) {\n                    if (params[has](att)) {\n                        if (!R._availableAttrs[has](att)) {\n                            continue;\n                        }\n                        val = params[att];\n\n                        switch (att) {\n\n                            case 'fill-opacity':\n                            case 'opacity':\n                            case 'stroke-opcaity':\n                            case 'stroke':\n                            case 'fill':\n                                finalAttrs[att] = val;\n                                needsRepaint = true;\n                                break;\n\n                            case 'stroke-width':\n                            case \"cx\":\n                            case \"cy\":\n                            case \"x\":\n                            case \"y\":\n                                finalAttrs[att] = val;\n                                positionChanged = true;\n                                break;\n\n                            case \"width\":\n                            case \"height\":\n                                finalAttrs[att] = val;\n                                dimensionChanged = true;\n                                break;\n\n                            case \"clip-rect\":\n                                finalAttrs[att] = val;\n                                needsRepaint = true;\n                                break;\n\n                            case \"font-size\":\n                            case \"font\":\n                            case \"vertical-align\":\n                            case \"text-anchor\":\n                                finalAttrs[att] = val;\n                                needsRepaint = true;\n\n                            default:\n                                continue;\n                        }\n                    }\n                }\n\n                tuneText(el, params, finalAttrs);\n\n                finalAttrs = node.validateAttrs(finalAttrs);\n\n                if (needsRepaint || positionChanged || dimensionChanged) {\n                    repaint(el, finalAttrs, positionChanged, dimensionChanged);\n                }\n            },\n\n            leading = 1.2,\n\n            tuneText = function(el, params, finalAttrs) {\n                if (el.type != \"text\" || !(params[has](\"text\") || params[has](\"font\") ||\n                        params[has](\"font-size\") || params[has](\"x\") || params[has](\"y\") ||\n                        params[has](\"line-height\") || params[has](\"vertical-align\"))) {\n                    return;\n                }\n\n                var a = el.attr(),\n                    fontSize = params['font-size'] || a['font-size'] || 10,\n                    lineHeight = toFloat(params['line-height'] || a['line-height']) || toInt(fontSize, 10) * leading,\n                    valign = params[\"vertical-align\"] || a[\"vertical-align\"] || \"middle\";\n\n                if (isNaN(lineHeight)) {\n                    lineHeight = fontSize * leading;\n                }\n\n                finalAttrs['font-size'] = toInt(fontSize, 10) + \"px\";\n                finalAttrs['font'] = params['font'] || a['font'] || 'Verdana';\n                finalAttrs['vertical-align'] = valign;\n                finalAttrs['x'] = params['x'] || a['x'] || 0;\n                finalAttrs['y'] = params['y'] || a['y'] || 0;\n                finalAttrs['line-height'] = toInt(lineHeight, 10);\n                finalAttrs['text-anchor'] = params['text-anchor'] || a['text-anchor'] || 'middle';\n            };\n\n        R._engine.initWin = function (win) {\n            win = win;\n            doc = win.document;\n        };\n\n        R._engine.setSize = function (w, h) {\n            var paper = this,\n                cs = paper.canvas.style;\n\n            cs.width = (paper.width = (+w || paper.width)) + PX;\n            cs.height = (paper.height = (+h || paper.height)) + PX;\n            /** @todo call setViewBox from setSize() */\n            return paper;\n        };\n        /** @todo implement setViewBox() */\n        R._engine.create = function () {\n            var con = R._getContainer.apply(0, arguments) || {},\n                container = con.container,\n                x = con.x,\n                y = con.y,\n                width = con.width,\n                height = con.height,\n                //handler = R._containerEventHandler,\n                wrapper,\n                cssText,\n                image,\n                mmap,\n                i,\n                paper,\n                canvas;\n\n            if (!container) {\n                throw new Error(\"Canvas container not found.\");\n            }\n\n            paper = new R._Paper();\n            paper.canvas = wrapper = $(\"div\");\n\n            x = (x || 0);\n            y = (y || 0);\n            paper.width = width = (width || 512);\n            paper.height = height = (height || 342);\n            paper.left = paper.top = 0;\n\n            if (container == 1) {\n            wrapper.style.cssText = cssText +\n                        R.format(\";width:100%;height:100%;position:absolute;left:{0}px;top:{1}px;\", [x, y]);\n                doc.body.appendChild(wrapper);\n            }\n            else {\n                wrapper.style.cssText = cssText + \";width:100%;height:100%;position:absolute\";\n                if (container.firstChild) {\n                    container.insertBefore(wrapper, container.firstChild);\n                }\n                else {\n                    container.appendChild(wrapper);\n                }\n            }\n\n            cssText = \"overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);\" +\n                \"-webkit-user-select:none;-moz-user-select:-moz-none;\" +\n                \"-khtml-user-select:none;-ms-user-select:none;user-select:none;\" +\n                \"-o-user-select:none;cursor:default;\" +\n                R.format(\"width:{0}px;height:{1}px;\", [width, height]);\n\n            // Create the canvas element and set it to occupy full space. Retain a\n            // reference to its context.\n            canvas = $(\"canvas\");\n            canvas.style.cssText = \"position:absolute;left:0;top:0\";\n            canvas.setAttribute('width', paper.width);\n            canvas.setAttribute('height', paper.height);\n\n            paper.com = new CanvasObjectModel(canvas, wrapper, paper.width, paper.height);\n\n            wrapper.appendChild(canvas);\n\n            image = $(\"img\");\n\n            // Easter egg idea! :)\n            image.src = \"image1.png\";\n\n            image.style.cssText = \"opacity: 0;z-index: 100;background: transparent;position: absolute;left: 0;top: 0;width: \"+width+\"px;height: \"+height+\"px\";\n            wrapper.appendChild(image);\n\n            mmap = $(\"map\");\n\n            mmap.setAttribute(\"name\", \"mousemap\");\n            mmap.setAttribute(\"id\", \"mousemap\"); // Needed for FF.\n\n            wrapper.appendChild(mmap);\n\n            image.setAttribute(\"usemap\",\"#mousemap\");\n            wrapper._image = image;\n            wrapper._map = mmap;\n\n            return paper;\n        };\n\n        var getNode = R._engine.getNode = function (el) {\n            return el.node || el[0].node;\n        };\n\n        R._engine.getLastNode = function (el) {\n            return el.node || el[el.length - 1].node;\n        };\n\n        R._engine.rect = function(paper, x, y, w, h, r, group) {\n\n            var node = paper.com.createNode('rect', group && group.node),\n                el = new Element(node, paper, group),\n                attrs = el.attrs;\n\n            attrs.x = x;\n            attrs.y = y;\n            attrs.width = w;\n            attrs.height = h;\n            attrs.fill = \"#fff\";\n            attrs.stroke = \"#000\";\n            attrs['stroke-width'] = 1;\n            attrs.r = r || 0;\n            attrs.rx = r || 0;\n            attrs.ry = r || 0;\n\n            el.type = \"rect\";\n\n            node.render();\n            return el;\n        };\n\n        R._engine.circle = function(paper, x, y, r, group) {\n            var node = paper.com.createNode('circle', group && group.node),\n                el = new Element(node, paper, group),\n                attrs = el.attrs;\n\n            attrs.cx = x;\n            attrs.cy = y;\n            attrs.r = r;\n            attrs.fill = 'none';\n            attrs.stroke = '#000';\n            attrs['stroke-width'] = 1;\n\n            el.type = \"circle\";\n\n            node.render();\n            return el;\n        };\n\n        R._engine.ellipse = function(paper, x, y, rx, ry, group) {\n            var node = new FauxNode(),\n                el = new Element(node, paper, group);\n\n            el.type = \"ellipse\";\n            return el;\n        };\n\n        R._engine.image = function(paper, src, x, y, w, h, group) {\n            var node = new FauxNode(),\n                el = new Element(node, paper, group);\n\n            el.type = \"image\";\n            return el;\n        };\n\n        R._engine.text = function(paper, x, y, text, group) {\n            var node = paper.com.createNode('text', group && group.node),\n                el = new Element(node, paper, group),\n                attrs = el.attrs;\n\n            attrs.x = x;\n            attrs.y = y;\n            attrs.text = text;\n            attrs.fill = 'none';\n            attrs.stroke = '#000';\n            attrs.font = 'Verdana';\n            attrs['font-size'] = '12px';\n            attrs['vertical-align'] = 'middle';\n            attrs['text-anchor'] = 'middle'\n\n            el.type = \"text\";\n            node.render();\n            return el;\n        };\n\n        R._engine.path = function(pathString, paper, group) {\n            var node = paper.com.createNode('path', group && group.node),\n                el = new Element(node, paper, group),\n                attrs = el.attrs;\n\n            attrs.path = pathString;\n            attrs.fill = \"#fff\";\n            attrs.stroke = \"#000\";\n            attrs['stroke-width'] = 1;\n\n            el.type = \"path\";\n\n            node.render();\n\n            return el;\n        };\n\n        R._engine.group = function (paper, id, group) {\n\n            var node = paper.com.createNode('group', group && group.node),\n                el = new Element(node, paper, group),\n                wrapper = node.wrapper;\n\n            id && wrapper.setAttribute('class', ['red', id].join('-'));\n\n            el.canvas = wrapper;\n\n            //(group && group.canvas.appendChild(wrapper)) || paper.canvas.appendChild(wrapper);\n\n            el.type = \"group\";\n            return el;\n        };\n\n        elproto._getBBox = function() {\n            if (this.removed) {\n                return {};\n            }\n\n            return {\n                x: this.X + (this.bbx || 0) - this.W / 2,\n                y: this.Y + (this.bby || 0) - this.H / 2,\n                width: this.W,\n                height: this.H\n            };\n        };\n\n        /***** ELEMENT REORDERING / RESTRUCTING *****/\n\n        elproto.toFront = function() {\n            if (this.removed) {\n                return this;\n            }\n\n            var o = this,\n                thisNode = o.node,\n                parent = o.parent,\n                parentNode = thisNode.owner,\n                followers = o.followers,\n                follower,\n                i,\n                ii;\n\n            if (R._tofront(o, parent)) {\n                if (elproto.type === \"group\") {\n                    parent.canvas.appendChild(thisNode);\n                }\n                else {\n                    parentNode.nodeList.tofront(thisNode);\n                }\n            }\n\n            for (i = 0, ii = followers.length; i < ii; i++) {\n                (follower = followers[i]).stalk && follower.el[follower.stalk](o);\n            }\n\n            return o;\n        };\n\n        elproto.toBack = function() {\n            if (this.removed) {\n                return this;\n            }\n\n            var o = this,\n                thisNode = o.node,\n                parent = o.parent,\n                parentNode = thisNode.owner,\n                followers = o.followers,\n                follower,\n                i,\n                ii;\n\n            if (R._toback(o, parent)) {\n                if (elproto.type === \"group\") {\n                    parent.canvas.appendChild(thisNode);\n                }\n                else {\n                    parentNode.nodeList.toback(thisNode);\n                }\n            }\n\n            for (i = 0, ii = followers.length; i < ii; i++) {\n                (follower = followers[i]).stalk && follower.el[follower.stalk](o);\n            }\n\n\n            return o;\n        };\n\n        elproto.insertAfter = function(element) {\n            if (this.removed) {\n                return this;\n            }\n\n            var o = this,\n                thisNode = o.node,\n                thatNode = element.node,\n                parentNode = thatNode.owner,\n                followers = o.followers,\n                follower,\n                i,\n                ii;\n\n            if (thatNode.next) {\n                parentNode.nodeList.insertBefore(thisNode, thatNode.next);\n            }\n            else {\n                parentNode.appendChild(thisNode);\n            }\n\n            R._insertafter(o, element, o.parent, element.parent);\n\n            for (i = 0, ii = followers.length; i < ii; i++) {\n                (follower = followers[i]).stalk &&\n                    follower.el[follower.stalk](element);\n            }\n\n            return o;\n        };\n\n        elproto.insertBefore = function(element) {\n            if (this.removed) {\n                return this;\n            }\n\n            var o = this,\n                thisNode = o.node,\n                thatNode = element.node,\n                parentNode = thatNode.owner,\n                followers = o.followers,\n                follower,\n                i,\n                ii;\n\n            if (thatNode) {\n                parentNode.nodeList.insertBefore(thisNode, thatNode);\n            }\n            else {\n                parentNode.appendChild(thisNode);\n            }\n\n            R._insertafter(o, element, o.parent, element.parent);\n\n            for (i = 0, ii = followers.length; i < ii; i++) {\n                (follower = followers[i]).stalk &&\n                    follower.el[follower.stalk](element);\n            }\n\n            return o;\n        };\n\n        elproto.appendChild = function(element) {\n            return this;\n        };\n\n        elproto.removeChild = function(element) {\n            return this;\n        };\n\n        /***** ELEMENT REORDERING / RESTRUCTING *****/\n\n\n\n        elproto.attr = function(name, value) {\n            if (this.removed) {\n                return this;\n            }\n\n            var o = this,\n\n                attrs = o.attrs,\n                ca = o.ca,\n                names,\n                params,\n                par,\n\n                res,\n                key,\n                out,\n\n                subkey,\n                delkeys,\n\n                follower,\n                ii,\n                i;\n\n            // fetch a copy of all attributes\n            if (name == null) {\n                res = {};\n                for (key in attrs) if (attrs.hasOwnProperty(key)) {\n                    res[key] = attrs[key];\n                }\n                res.gradient && res.fill == \"none\" && (res.fill = res.gradient) && delete res.gradient;\n                res.transform = o._.transform;\n                /** @todo res.visibility = o.node.style.display === \"none\" ? \"hidden\" : \"visible\"; */\n                return res;\n            }\n\n            // fetch a single value\n            if (value == null && R.is(name, \"string\")) {\n                if (name == \"fill\" && attrs.fill == \"none\" && attrs.gradient) {\n                    return attrs.gradient;\n                }\n                if (name == \"transform\") {\n                    return o._.transform;\n                }\n                /** @todo if (name == \"visibility\") {\n                    return this.node.style.display === \"none\" ? \"hidden\" : \"visible\";\n                }*/\n\n                names = name.split(separator),\n                out = {};\n\n                for (i = 0, ii = names.length; i < ii; i++) {\n                    name = names[i];\n                    if (name in attrs) {\n                        out[name] = attrs[name];\n                    }\n                    else if (R.is(ca[name], \"function\")) {\n                        out[name] = ca[name].def;\n                    } else {\n                        out[name] = R._availableAttrs[name];\n                    }\n                }\n                return ii - 1 ? out : out[names[0]];\n            }\n\n            // fetch specific attributes\n            if (value == null && R.is(name, \"array\")) {\n                out = {};\n                for (i = 0, ii = name.length; i < ii; i++) {\n                    out[name[i]] = o.attr(name[i]);\n                }\n                return out;\n            }\n\n            // prepare setter params\n            if (value != null) {\n                params = {};\n                params[name] = value;\n            }\n            else if (name != null && R.is(name, \"object\")) {\n                params = name;\n            }\n\n            if (R.stopEvent !== false) {\n                for (key in params) {\n                    eve(\"raphael.attr.\" + key + \".\" + o.id, o, params[key], key);\n                }\n            }\n\n            delkeys = {};\n            for (key in ca) {\n\n                if (ca[key] && params.hasOwnProperty(key) &&\n                        R.is(ca[key], \"function\") && !ca['_invoked' + key]) {\n\n                    ca['_invoked'+key] = true; // prevent recursion\n                    par = ca[key].apply(o, [].concat(params[key]));\n                    delete ca['_invoked'+key];\n\n                    for (subkey in par) {\n                        if (par.hasOwnProperty(subkey)) {\n                            params[subkey] = par[subkey];\n                        }\n                    }\n                    attrs[key] = params[key];\n                    if (par === false) {\n                        delkeys[key] = params[key];\n                        delete params[key];\n                    }\n                }\n            }\n\n            setFillAndStroke(this, params);\n\n            for (i = 0, ii = o.followers.length; i < ii; i++) {\n                follower = o.followers[i];\n                (follower.cb && !follower.cb.call(follower.el, params, o)) ||\n                    follower.el.attr(params);\n            }\n\n            for (subkey in delkeys) {\n                params[subkey] = delkeys[subkey];\n            }\n            return this;\n        };\n\n\n\n\n        /**************** Drag *********************/\n        elproto.drag = function (onmove, onstart, onend, move_scope, start_scope, end_scope) {\n\n            function start(e) {\n                (e.originalEvent || e).preventDefault();\n                var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;\n                this._drag.x = e.clientX + scrollX;\n                this._drag.y = e.clientY + scrollY;\n                this._drag.id = e.identifier;\n                !drag.length && R.mousemove(dragMove).mouseup(dragUp);\n                drag.push({\n                    el: this,\n                    move_scope: move_scope,\n                    start_scope: start_scope,\n                    end_scope: end_scope,\n                    onmoveHandler: onmove,\n                    onstartHandler: onstart,\n                    onendHandler: onend\n                });\n                onstart && eve.on(\"raphael.drag.start.\" + this.id, onstart);\n                onmove && eve.on(\"raphael.drag.move.\" + this.id, onmove);\n                onend && eve.on(\"raphael.drag.end.\" + this.id, onend);\n                onstart && eve(\"raphael.drag.start.\" + this.id, start_scope || move_scope || this, e.clientX + scrollX, e.clientY + scrollY, e);\n            }\n            this._drag = {};\n            draggable.push({\n                el: this,\n                start: start\n            });\n            this.mousedown(start);\n            return this;\n        }\n\n        elproto.undrag = function() {\n            var i = draggable.length;\n            while (i--)\n                if (draggable[i].el == this) {\n                    this.unmousedown(draggable[i].start);\n                    draggable.splice(i, 1);\n                    eve.unbind(\"raphael.drag.*.\" + this.id);\n                }\n            !draggable.length && R.unmousemove(dragMove).unmouseup(dragUp);\n        };\n\n\n        /***************** Drag *****************/\n        /************ TRANSFORMATIONS *************/\n\n\n\n        elproto.rotate = function(deg, cx, cy) {\n\n            var o = this,\n                bbox;\n            if (o.removed) {\n                return o;\n            }\n            deg = Str(deg).split(separator);\n            if (deg.length - 1) {\n                cx = toFloat(deg[1]);\n                cy = toFloat(deg[2]);\n            }\n            deg = toFloat(deg[0]);\n            (cy == null) && (cx = cy);\n            if (cx == null || cy == null) {\n                bbox = o.getBBox(1);\n                cx = bbox.x + bbox.width / 2;\n                cy = bbox.y + bbox.height / 2;\n            }\n            o.transform(o._.transform.concat([[\"r\", deg, cx, cy]]));\n            return o;\n        };\n\n        elproto.scale = function(sx, sy, cx, cy) {\n            var o = this,\n                bbox;\n            if (o.removed) {\n                return o;\n            }\n            sx = Str(sx).split(separator);\n            if (sx.length - 1) {\n                sy = toFloat(sx[1]);\n                cx = toFloat(sx[2]);\n                cy = toFloat(sx[3]);\n            }\n            sx = toFloat(sx[0]);\n            (sy == null) && (sy = sx);\n            (cy == null) && (cx = cy);\n            if (cx == null || cy == null) {\n                bbox = o.getBBox(1);\n            }\n            cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n            cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n            o.transform(o._.transform.concat([[\"s\", sx, sy, cx, cy]]));\n\n            return o;\n        };\n\n        elproto.translate = function(dx, dy) {\n            var o = this;\n            if (o.removed) {\n                return o;\n            }\n            dx = Str(dx).split(separator);\n            if (dx.length - 1) {\n                dy = toFloat(dx[1]);\n            }\n            dx = toFloat(dx[0]) || 0;\n            dy = +dy || 0;\n            o.transform(o._.transform.concat([[\"t\", dx, dy]]));\n\n            return o;\n        };\n\n        elproto.transform = function(tstr) {\n\n            var o = this,\n                _ = o._,\n                sw;\n\n            if (tstr === null) {\n                return _.transform;\n            }\n\n            R._extractTransform(o, tstr);\n\n            /** @todo: what changes to be made here in the context of canvas */\n            /*o.clip && !_.clipispath && $(o.clip, {\n                transform: o.matrix.invert()\n            });\n            o.pattern && updatePosition(o); */\n            if (_.sx != 1 || _.sy != 1) {\n                sw = o.attrs[has](\"stroke-width\") ? o.attrs[\"stroke-width\"] : 1;\n                o.attr({\n                    \"stroke-width\": sw\n                });\n            }\n\n            o.node && o.node.redraw();\n\n            return o;\n        };\n\n        /************ TRANSFORMATIONS *************/\n\n\n        elproto.hide = function() {\n            return this;\n        };\n\n        elproto.show = function() {\n            return this;\n        };\n\n        elproto.on = function(eventType, handler) {\n            var el = this,\n                listeners = el.listeners;\n\n            if (!listeners) {\n                listeners = el.listeners = {};\n            }\n\n            if (!listeners[eventType]) {\n                listeners[eventType] = [];\n            }\n\n            listeners[eventType].push(handler);\n        };\n\n        elproto.remove = function() {\n            return this;\n        };\n\n\n\n\n        paperproto.clear = function () {\n            eve(\"raphael.clear\", this);\n            return this;\n        };\n\n        paperproto.remove = function () {\n            if (this.removed) {\n                return;\n            }\n\n            var paper = this,\n                canvas = paper.canvas,\n                pn = canvas.parentNode,\n                i;\n\n            eve(\"raphael.remove\", paper);\n            pn.removeChild(canvas);\n\n            for (i in paper) {\n                paper[i] = typeof paper[i] == \"function\" ? R._removedFactory(i) : null;\n            }\n\n            this.removed = true;\n        };\n\n        R.toString = function () {\n            return \"Your browser supports canvas.\\nYou are running RedRaphael \" +\n                    R.version;\n        };\n\n        for (var method in elproto) {\n            if (elproto.hasOwnProperty(method) &&\n                !setproto.hasOwnProperty(method)) {\n            setproto[method] = (function (methodname) {\n                return function () {\n                    var arg = arguments;\n                    return this.forEach(function (el) {\n                        el[methodname].apply(el, arg);\n                    });\n                };\n            })(method);\n        }\n        };\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./source/raphael.canvas.js"],"sourceRoot":""}